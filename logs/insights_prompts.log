{
  "meta": {
    "ts": "2025-09-18T03:52:14.509250Z",
    "mode": "individual-multi",
    "provider": "gemini",
    "model": "gemini-2.0-flash",
    "selected_graphs": [
      "q2"
    ],
    "graph_label": "Outlet Category Distribution (% by Region)",
    "focus_hint": ""
  },
  "metadata": {},
  "charts_meta": [],
  "prompt": "Role: You are a strict, quantitative data analyst. Your sole task is to analyze the provided snapshot of CR KPI data.\nCritical Directive: Your analysis MUST be based exclusively on the provided figures. You MUST NOT infer any time-based trends (e.g., improvement, decline, momentum) as this is a single point in time.\n\nNon-Negotiable Context: All insights must frame performance through the fundamental trade-off between short-term financial performance (sales, revenue) and long-term customer health (satisfaction, loyalty).\n**Quantification Mandate: You MUST quantify all claims. Instead of 'low' or 'high', state the actual values, ranges, and percentages. Estimate potential impact (e.g., revenue risk, churn probability) based on the magnitude of quality gaps.**\n\nTimeframe Guard: Do NOT mention or assume timeframes (e.g., 'MTD', 'YTD', 'MoM', 'YoY') unless these exact terms appear in the dataset columns or metadata. If absent, treat percentages as timeless normalized achievements and avoid any timeframe terminology.\n\nYou are a senior data analyst presenting to business stakeholders. I will provide a chart dataset as JSON.\nReturn plain markdown only (no code fences, no introductory text). Be specific, quantified, and evidence-led.\nDo not be vague or ambiguous: avoid generic statements; support each key claim with concrete numbers, names, and explicit comparisons from the provided data.\n\nKNOWLEDGE BASE:\nKPI CALCULATION FORMULAS:\n- MTD Actual (%): Month-to-date achievement as percentage of target\n  * Performance KPIs: MTD Actual / MTD Target * 100\n  * Insurance: MTD Actual / MTD Target = % (2 Decimal Point)\n  * NPS: MTD Actual / MTD Target * 100\n  * QPI: xQPI * (Total claim submission by outlet (Aging ≤3days)/Total claim submission by outlet) * 100\n- Rate: Points * Achievement (based on MTD Actual %)\n- Ranking: Sorted based on Rate in Descending order\n\nOutlet Categories (A/B/C/D) reflect whether an outlet meets performance (quantity) and quality (service) thresholds:\n- A: Performance > threshold AND Quality > threshold (top performer).\n- B: Performance > threshold BUT Quality < threshold (good performer but poor service).\n- C: Performance < threshold BUT Quality > threshold (good service, underperforming).\n- D: Performance < threshold AND Quality < threshold (poor performer).\n\nCategorical Hierarchy: A > B > C > D. When comparing categories, treat A as strictly better than B, B better than C, and so on.\n\nOutlet Types indicate business functions and relevant KPIs: **1S (Sales only)**, **2S (Service only)**, **1+2S/3S (Sales & Service)**.\n- 1S KPIs: New Car Reg, Gear Up, Insurance, POV, NPS Sales. \n- 2S KPIs: Intake, Revenue, Parts, Lubricant, NPS Svc, E-Appointment, QPI.\n- 1+2S/3S use blended metrics from both sides.\n\nDefinition of Quality vs Performance parameters (use this consistently):\n- Quality parameters: QPI (qpi_pct), E-Appointment (eappointment_pct), NPS Sales (nps_sales_pct), NPS Service (cs_service_pct).\n- All other KPI % metrics belong to Performance.\n\nAxis Thresholds by Outlet Type (for interpreting X/Y scatter parameters):\n### Y is performance , X is quality\n- 1S: Threshold X = 35, Threshold Y = 60.\n- 2S: Threshold X = 40, Threshold Y = 55.\n- 1+2S: Threshold X = 30, Threshold Y = 50.\n- 3S: Threshold X = 35, Threshold Y = 60.\n\nInterpreting % Achievement: 100% = target achieved; >100% = target exceeded; <100% = gap.\nSome KPIs (e.g., NPS, QPI) are composites or tiered scores; >100% still indicates exceeding the blended target.\n\nOutlet Type KPI Scope Rule:\n- 1S (Sales-only) focus KPIs: New Car Reg, Gear Up, Insurance, POV, NPS Sales. Treat service KPIs as 0/NA for 1S.\n- 2S (Service-only) focus KPIs: Intake, Revenue, Parts, Lubricant, NPS Svc, E-Appointment, QPI. Treat sales KPIs as 0/NA for 2S.\n- 1+2S/3S use blended metrics from both sides; all KPIs apply.\n\nCATEGORICAL ANALYSIS DECISION TREE (USE THIS):\n- If the largest group is 'A' outlets: The region is healthy. Insight = 'This region successfully balances performance and quality.'\n- If the largest group is 'B' outlets: The region is at risk. Insight = 'This region is prioritizing short-term sales over customer experience, which threatens long-term loyalty.' This is the most common and critical insight.\n- If the largest group is 'C' outlets: The region is struggling but has good service. Insight = 'This region has strong customer processes but is failing to achieve sales and volume targets.'\n- If the largest group is 'D' outlets: The region is in crisis. Insight = 'This region is failing across all key performance and quality indicators.'\n- Compare A vs. D: Always note the disparity between top and bottom performers.\n\nDATA DICTIONARY:\nData Dictionary & Terminology:\nKPI Parameters:\nPerformance:\n- Car Reg (New Car Registration): Number of new vehicles registered (primary sales volume).\n- Intake (Job Intake): Number of repair orders/service jobs opened (service volume).\n- Revenue (Service Revenue): Income from repair orders (after-sales).\n- Parts (Parts Sales): Revenue from spare parts sales.\n- Lubricant (Lubricant Sales): Quantity or revenue from engine oil/lubricants.\n- Gear Up (Accessory Sales): Vehicles fitted with optional accessories / accessory revenue.\n- Ins. T1 (Insurance Tier 1 New): Insurance policies sold for new vehicles.\n- Ins. Renew O/all (Insurance Renewal Overall): Renewed insurance policies for vehicles of any age.\n- POV (Trade-In): Perodua vehicles taken as trade-ins for new purchases.\nQuality:\n- NPS Sales: Net Promoter Score from sales surveys.\n- NPS Svc: Net Promoter Score from service surveys.\n- E-Appt (E-Appointment): Digital service appointments (Booking/Confirmed/No-Show).\n- QPI (Quality Performance Indicator): % of warranty claims submitted within required timeframe (≤3 days).\n\nOther Terms:\n- Outlet Type: 1S (Sales), 2S (Service), 1+2S (Sales & Service), 3S (Sales, Service, Spare Parts).\n- Outlet Category: Grade A/B/C/D based on Performance & Quality thresholds.\n- MTD/YTD Actual/Target: Month/Year-to-date achieved vs goal.\n- Threshold: Minimum acceptable level for Performance/Quality.\n- Weightage: Relative KPI importance by outlet type.\n\nCOMPUTED STATISTICS (authoritative, precomputed from pandas):\nUse ONLY the computed statistics below for the 'Observation' section.\nDo NOT do any arithmetic yourself; treat these as exact facts.\nMANDATORY: Explicitly state the min and max for each numeric column. If grouped statistics are provided (by 'outlet_category' or 'outlet_type'), include the min and max per group for the primary KPIs you discuss.\nIf both a small and large table are present for a chart (e.g., Tab 3 KPI gaps), FOCUS your Observations on the SMALL table; use the large-table statistics only as supporting context.\n\n### Computed Statistics — Outlet Category Distribution (% by Region)\n- rgn: count=28 (missing=0)\n- category: count=28 (missing=0)\n- count: min=0.0, p25=7.25, median=16.5, p75=33.0, max=49.0, mean=19.821428571428573, std=14.409496794947348 (missing=0)\n- pct: min=0.0, p25=12.412383177570094, median=19.004340748779164, p75=35.3173324742268, max=62.06896551724138, mean=25.0, std=16.72636707881982 (missing=0)\n\nAdditional context statistics (large table):\n- rgn: count=7 (missing=0)\n- avg_total_score: min=92.34453608247422, p25=93.72011723233317, median=94.88689655172413, p75=96.41771875, max=98.08260416666667, mean=95.08424410936162, std=2.125297688304183 (missing=0)\n- avg_rate_performance: min=57.674226804123705, p25=59.28351425438596, median=60.256551724137935, p75=62.04271320093458, max=65.53049999999999, mean=60.87339049127181, std=2.7355755141877194 (missing=0)\n- avg_rate_quality: min=31.623250000000002, p25=33.391985571405144, median=34.62965517241379, p75=34.66557023195877, max=37.1071875, mean=34.210743468448804, std=1.7335107253667839 (missing=0)\n- cat_a: min=18.0, p25=25.5, median=37.0, p75=41.0, max=49.0, mean=33.857142857142854, std=11.725024114098465 (missing=0)\n- cat_b: min=5.0, p25=18.0, median=33.0, p75=34.5, max=39.0, mean=26.0, std=13.759844960366863 (missing=0)\n- cat_c: min=0.0, p25=3.5, median=13.0, p75=15.0, max=19.0, mean=9.857142857142858, std=7.358183005529092 (missing=0)\n- cat_d: min=3.0, p25=4.5, median=9.0, p75=12.5, max=21.0, mean=9.571428571428571, std=6.373307431706682 (missing=0)\n\nMONTH-AWARE DIRECTIVE:\nIf a 'Month' column is present, you MUST compare months explicitly.\n- Quantify month-over-month deltas for the key KPIs you discuss (state sign and magnitude).\n- Identify where performance improved or declined the most by outlet_category/region/outlet_type as applicable.\n- Use only the provided computed statistics and grouped stats by 'Month' (if present) to support claims.\n- Keep comparisons concise and prioritized; avoid repeating trivial differences.\nProvide a structured analysis of the data based on the following format:\n\n### 1. Observation\n- State the most significant, factual patterns from the data.\n- Use short, direct bullet points.\n- Quantify your findings with precise numbers, ranges, or counts.\n  - **Example:** 'The [metric_name] for [Segment A] ranges from [X] to [Y].'\n  - **Example:** '[Number] of entities have a value of 0 for the [metric_name] parameter.'\n\n- Always state the explicit min and max for each numeric KPI you reference. If grouped statistics by 'outlet_category' or 'outlet_type' are provided, include the per-group min and max for the primary KPI(s).\n\n### 2. Interpretation\n- Explain the business or practical implications of your observations.\n- Identify the key drivers behind the observed patterns and the relationships between metrics.\n  - **Example:** 'The high performance in [Metric A] for [Segment B] appears to be negatively correlated with [Metric C], suggesting a potential trade-off.'\n- Quantify the potential impact, risk, or opportunity.\n  - **Example:** 'The cluster of [Number] entities in [Segment C] shows an average [Metric D] that is [Value/Percentage] below the target, indicating a high risk of [describe the business risk, e.g., user churn, quality failure, revenue loss].'\n\n### 3. Recommendation\n- Propose clear, actionable next steps based on your interpretation.\n- Prioritize your recommendations to guide decision-making.\n  - **High Priority:** Address critical issues (e.g., data integrity problems, major risks, or opportunities affecting the largest segments).\n  - **Medium Priority:** Focus on important optimizations or further investigations.\n  - **Foundation:** Suggest general best practices or foundational improvements.\n- Each recommendation should be directly linked to a specific, quantified observation.\n  - **Example:** 'Given that [Number] entities have 0 values for [metric_name], the top priority is to audit the data pipeline to correct this potential anomaly.'\n\n### Parameter Focus Coverage\n- Conclude with a brief summary for each key parameter analyzed.\n- For each parameter, provide a single bullet point with a one-sentence, numeric summary.\n  - **Example:** '[parameter_name]: The values range from [min] to [max], with the majority of entities clustered around [central_tendency_value].'\n  - **Example:** '[categorical_parameter]: The most prevalent category is '[Category_X],' accounting for [Percentage]% of the data.'\nJSON follows:\n```json\n{\"charts\": [{\"graph_id\": \"q2\", \"graph_label\": \"Outlet Category Distribution (% by Region)\", \"filters\": {\"outlet_categories\": [], \"regions\": [], \"outlet_types\": [], \"outlets\": [], \"search_text\": \"\", \"score_band\": \"All\", \"units_band\": \"All\", \"kpi_group\": \"All\", \"kpi_single\": null, \"months\": [\"March\", \"May\"], \"compare_months\": false}, \"columns\": [\"rgn\", \"category\", \"count\", \"pct\"], \"n_rows\": 28, \"rows\": [{\"rgn\": \"Central 1\", \"category\": \"A\", \"count\": 39, \"pct\": 34.21052631578947}, {\"rgn\": \"Central 2\", \"category\": \"A\", \"count\": 37, \"pct\": 38.144329896907216}, {\"rgn\": \"East Coast (Zone 1)\", \"category\": \"A\", \"count\": 19, \"pct\": 59.375}, {\"rgn\": \"East Coast (Zone 2)\", \"category\": \"A\", \"count\": 18, \"pct\": 62.06896551724138}, {\"rgn\": \"East Malaysia\", \"category\": \"A\", \"count\": 32, \"pct\": 40.0}, {\"rgn\": \"Northern\", \"category\": \"A\", \"count\": 43, \"pct\": 44.79166666666667}, {\"rgn\": \"Southern\", \"category\": \"A\", \"count\": 49, \"pct\": 45.794392523364486}, {\"rgn\": \"Central 1\", \"category\": \"B\", \"count\": 39, \"pct\": 34.21052631578947}, {\"rgn\": \"Central 2\", \"category\": \"B\", \"count\": 28, \"pct\": 28.865979381443296}, {\"rgn\": \"East Coast (Zone 1)\", \"category\": \"B\", \"count\": 5, \"pct\": 15.625}, {\"rgn\": \"East Coast (Zone 2)\", \"category\": \"B\", \"count\": 8, \"pct\": 27.586206896551722}, {\"rgn\": \"East Malaysia\", \"category\": \"B\", \"count\": 36, \"pct\": 45.0}, {\"rgn\": \"Northern\", \"category\": \"B\", \"count\": 33, \"pct\": 34.375}, {\"rgn\": \"Southern\", \"category\": \"B\", \"count\": 33, \"pct\": 30.8411214953271}, {\"rgn\": \"Central 1\", \"category\": \"C\", \"count\": 15, \"pct\": 13.157894736842104}, {\"rgn\": \"Central 2\", \"category\": \"C\", \"count\": 19, \"pct\": 19.587628865979383}, {\"rgn\": \"East Coast (Zone 1)\", \"category\": \"C\", \"count\": 4, \"pct\": 12.5}, {\"rgn\": \"East Coast (Zone 2)\", \"category\": \"C\", \"count\": 0, \"pct\": 0.0}, {\"rgn\": \"East Malaysia\", \"category\": \"C\", \"count\": 3, \"pct\": 3.75}, {\"rgn\": \"Northern\", \"category\": \"C\", \"count\": 15, \"pct\": 15.625}, {\"rgn\": \"Southern\", \"category\": \"C\", \"count\": 13, \"pct\": 12.149532710280374}, {\"rgn\": \"Central 1\", \"category\": \"D\", \"count\": 21, \"pct\": 18.421052631578945}, {\"rgn\": \"Central 2\", \"category\": \"D\", \"count\": 13, \"pct\": 13.402061855670103}, {\"rgn\": \"East Coast (Zone 1)\", \"category\": \"D\", \"count\": 4, \"pct\": 12.5}, {\"rgn\": \"East Coast (Zone 2)\", \"category\": \"D\", \"count\": 3, \"pct\": 10.344827586206897}, {\"rgn\": \"East Malaysia\", \"category\": \"D\", \"count\": 9, \"pct\": 11.25}, {\"rgn\": \"Northern\", \"category\": \"D\", \"count\": 5, \"pct\": 5.208333333333334}, {\"rgn\": \"Southern\", \"category\": \"D\", \"count\": 12, \"pct\": 11.214953271028037}], \"computed_stats\": {\"rgn\": {\"dtype\": \"object\", \"count\": 28, \"missing\": 0, \"non_null\": 28}, \"category\": {\"dtype\": \"object\", \"count\": 28, \"missing\": 0, \"non_null\": 28}, \"count\": {\"dtype\": \"int64\", \"count\": 28, \"missing\": 0, \"min\": 0.0, \"p25\": 7.25, \"median\": 16.5, \"p75\": 33.0, \"max\": 49.0, \"mean\": 19.821428571428573, \"std\": 14.409496794947348}, \"pct\": {\"dtype\": \"float64\", \"count\": 28, \"missing\": 0, \"min\": 0.0, \"p25\": 12.412383177570094, \"median\": 19.004340748779164, \"p75\": 35.3173324742268, \"max\": 62.06896551724138, \"mean\": 25.0, \"std\": 16.72636707881982}}, \"context_stats\": {\"large_computed_stats\": {\"rgn\": {\"dtype\": \"object\", \"count\": 7, \"missing\": 0, \"non_null\": 7}, \"avg_total_score\": {\"dtype\": \"float64\", \"count\": 7, \"missing\": 0, \"min\": 92.34453608247422, \"p25\": 93.72011723233317, \"median\": 94.88689655172413, \"p75\": 96.41771875, \"max\": 98.08260416666667, \"mean\": 95.08424410936162, \"std\": 2.125297688304183}, \"avg_rate_performance\": {\"dtype\": \"float64\", \"count\": 7, \"missing\": 0, \"min\": 57.674226804123705, \"p25\": 59.28351425438596, \"median\": 60.256551724137935, \"p75\": 62.04271320093458, \"max\": 65.53049999999999, \"mean\": 60.87339049127181, \"std\": 2.7355755141877194}, \"avg_rate_quality\": {\"dtype\": \"float64\", \"count\": 7, \"missing\": 0, \"min\": 31.623250000000002, \"p25\": 33.391985571405144, \"median\": 34.62965517241379, \"p75\": 34.66557023195877, \"max\": 37.1071875, \"mean\": 34.210743468448804, \"std\": 1.7335107253667839}, \"cat_a\": {\"dtype\": \"int64\", \"count\": 7, \"missing\": 0, \"min\": 18.0, \"p25\": 25.5, \"median\": 37.0, \"p75\": 41.0, \"max\": 49.0, \"mean\": 33.857142857142854, \"std\": 11.725024114098465}, \"cat_b\": {\"dtype\": \"int64\", \"count\": 7, \"missing\": 0, \"min\": 5.0, \"p25\": 18.0, \"median\": 33.0, \"p75\": 34.5, \"max\": 39.0, \"mean\": 26.0, \"std\": 13.759844960366863}, \"cat_c\": {\"dtype\": \"int64\", \"count\": 7, \"missing\": 0, \"min\": 0.0, \"p25\": 3.5, \"median\": 13.0, \"p75\": 15.0, \"max\": 19.0, \"mean\": 9.857142857142858, \"std\": 7.358183005529092}, \"cat_d\": {\"dtype\": \"int64\", \"count\": 7, \"missing\": 0, \"min\": 3.0, \"p25\": 4.5, \"median\": 9.0, \"p75\": 12.5, \"max\": 21.0, \"mean\": 9.571428571428571, \"std\": 6.373307431706682}}, \"large_group_stats\": {}}}], \"metadata\": {}}\n```",
  "prompt_lines": [
    "Role: You are a strict, quantitative data analyst. Your sole task is to analyze the provided snapshot of CR KPI data.",
    "Critical Directive: Your analysis MUST be based exclusively on the provided figures. You MUST NOT infer any time-based trends (e.g., improvement, decline, momentum) as this is a single point in time.",
    "",
    "Non-Negotiable Context: All insights must frame performance through the fundamental trade-off between short-term financial performance (sales, revenue) and long-term customer health (satisfaction, loyalty).",
    "**Quantification Mandate: You MUST quantify all claims. Instead of 'low' or 'high', state the actual values, ranges, and percentages. Estimate potential impact (e.g., revenue risk, churn probability) based on the magnitude of quality gaps.**",
    "",
    "Timeframe Guard: Do NOT mention or assume timeframes (e.g., 'MTD', 'YTD', 'MoM', 'YoY') unless these exact terms appear in the dataset columns or metadata. If absent, treat percentages as timeless normalized achievements and avoid any timeframe terminology.",
    "",
    "You are a senior data analyst presenting to business stakeholders. I will provide a chart dataset as JSON.",
    "Return plain markdown only (no code fences, no introductory text). Be specific, quantified, and evidence-led.",
    "Do not be vague or ambiguous: avoid generic statements; support each key claim with concrete numbers, names, and explicit comparisons from the provided data.",
    "",
    "KNOWLEDGE BASE:",
    "KPI CALCULATION FORMULAS:",
    "- MTD Actual (%): Month-to-date achievement as percentage of target",
    "  * Performance KPIs: MTD Actual / MTD Target * 100",
    "  * Insurance: MTD Actual / MTD Target = % (2 Decimal Point)",
    "  * NPS: MTD Actual / MTD Target * 100",
    "  * QPI: xQPI * (Total claim submission by outlet (Aging ≤3days)/Total claim submission by outlet) * 100",
    "- Rate: Points * Achievement (based on MTD Actual %)",
    "- Ranking: Sorted based on Rate in Descending order",
    "",
    "Outlet Categories (A/B/C/D) reflect whether an outlet meets performance (quantity) and quality (service) thresholds:",
    "- A: Performance > threshold AND Quality > threshold (top performer).",
    "- B: Performance > threshold BUT Quality < threshold (good performer but poor service).",
    "- C: Performance < threshold BUT Quality > threshold (good service, underperforming).",
    "- D: Performance < threshold AND Quality < threshold (poor performer).",
    "",
    "Categorical Hierarchy: A > B > C > D. When comparing categories, treat A as strictly better than B, B better than C, and so on.",
    "",
    "Outlet Types indicate business functions and relevant KPIs: **1S (Sales only)**, **2S (Service only)**, **1+2S/3S (Sales & Service)**.",
    "- 1S KPIs: New Car Reg, Gear Up, Insurance, POV, NPS Sales. ",
    "- 2S KPIs: Intake, Revenue, Parts, Lubricant, NPS Svc, E-Appointment, QPI.",
    "- 1+2S/3S use blended metrics from both sides.",
    "",
    "Definition of Quality vs Performance parameters (use this consistently):",
    "- Quality parameters: QPI (qpi_pct), E-Appointment (eappointment_pct), NPS Sales (nps_sales_pct), NPS Service (cs_service_pct).",
    "- All other KPI % metrics belong to Performance.",
    "",
    "Axis Thresholds by Outlet Type (for interpreting X/Y scatter parameters):",
    "### Y is performance , X is quality",
    "- 1S: Threshold X = 35, Threshold Y = 60.",
    "- 2S: Threshold X = 40, Threshold Y = 55.",
    "- 1+2S: Threshold X = 30, Threshold Y = 50.",
    "- 3S: Threshold X = 35, Threshold Y = 60.",
    "",
    "Interpreting % Achievement: 100% = target achieved; >100% = target exceeded; <100% = gap.",
    "Some KPIs (e.g., NPS, QPI) are composites or tiered scores; >100% still indicates exceeding the blended target.",
    "",
    "Outlet Type KPI Scope Rule:",
    "- 1S (Sales-only) focus KPIs: New Car Reg, Gear Up, Insurance, POV, NPS Sales. Treat service KPIs as 0/NA for 1S.",
    "- 2S (Service-only) focus KPIs: Intake, Revenue, Parts, Lubricant, NPS Svc, E-Appointment, QPI. Treat sales KPIs as 0/NA for 2S.",
    "- 1+2S/3S use blended metrics from both sides; all KPIs apply.",
    "",
    "CATEGORICAL ANALYSIS DECISION TREE (USE THIS):",
    "- If the largest group is 'A' outlets: The region is healthy. Insight = 'This region successfully balances performance and quality.'",
    "- If the largest group is 'B' outlets: The region is at risk. Insight = 'This region is prioritizing short-term sales over customer experience, which threatens long-term loyalty.' This is the most common and critical insight.",
    "- If the largest group is 'C' outlets: The region is struggling but has good service. Insight = 'This region has strong customer processes but is failing to achieve sales and volume targets.'",
    "- If the largest group is 'D' outlets: The region is in crisis. Insight = 'This region is failing across all key performance and quality indicators.'",
    "- Compare A vs. D: Always note the disparity between top and bottom performers.",
    "",
    "DATA DICTIONARY:",
    "Data Dictionary & Terminology:",
    "KPI Parameters:",
    "Performance:",
    "- Car Reg (New Car Registration): Number of new vehicles registered (primary sales volume).",
    "- Intake (Job Intake): Number of repair orders/service jobs opened (service volume).",
    "- Revenue (Service Revenue): Income from repair orders (after-sales).",
    "- Parts (Parts Sales): Revenue from spare parts sales.",
    "- Lubricant (Lubricant Sales): Quantity or revenue from engine oil/lubricants.",
    "- Gear Up (Accessory Sales): Vehicles fitted with optional accessories / accessory revenue.",
    "- Ins. T1 (Insurance Tier 1 New): Insurance policies sold for new vehicles.",
    "- Ins. Renew O/all (Insurance Renewal Overall): Renewed insurance policies for vehicles of any age.",
    "- POV (Trade-In): Perodua vehicles taken as trade-ins for new purchases.",
    "Quality:",
    "- NPS Sales: Net Promoter Score from sales surveys.",
    "- NPS Svc: Net Promoter Score from service surveys.",
    "- E-Appt (E-Appointment): Digital service appointments (Booking/Confirmed/No-Show).",
    "- QPI (Quality Performance Indicator): % of warranty claims submitted within required timeframe (≤3 days).",
    "",
    "Other Terms:",
    "- Outlet Type: 1S (Sales), 2S (Service), 1+2S (Sales & Service), 3S (Sales, Service, Spare Parts).",
    "- Outlet Category: Grade A/B/C/D based on Performance & Quality thresholds.",
    "- MTD/YTD Actual/Target: Month/Year-to-date achieved vs goal.",
    "- Threshold: Minimum acceptable level for Performance/Quality.",
    "- Weightage: Relative KPI importance by outlet type.",
    "",
    "COMPUTED STATISTICS (authoritative, precomputed from pandas):",
    "Use ONLY the computed statistics below for the 'Observation' section.",
    "Do NOT do any arithmetic yourself; treat these as exact facts.",
    "MANDATORY: Explicitly state the min and max for each numeric column. If grouped statistics are provided (by 'outlet_category' or 'outlet_type'), include the min and max per group for the primary KPIs you discuss.",
    "If both a small and large table are present for a chart (e.g., Tab 3 KPI gaps), FOCUS your Observations on the SMALL table; use the large-table statistics only as supporting context.",
    "",
    "### Computed Statistics — Outlet Category Distribution (% by Region)",
    "- rgn: count=28 (missing=0)",
    "- category: count=28 (missing=0)",
    "- count: min=0.0, p25=7.25, median=16.5, p75=33.0, max=49.0, mean=19.821428571428573, std=14.409496794947348 (missing=0)",
    "- pct: min=0.0, p25=12.412383177570094, median=19.004340748779164, p75=35.3173324742268, max=62.06896551724138, mean=25.0, std=16.72636707881982 (missing=0)",
    "",
    "Additional context statistics (large table):",
    "- rgn: count=7 (missing=0)",
    "- avg_total_score: min=92.34453608247422, p25=93.72011723233317, median=94.88689655172413, p75=96.41771875, max=98.08260416666667, mean=95.08424410936162, std=2.125297688304183 (missing=0)",
    "- avg_rate_performance: min=57.674226804123705, p25=59.28351425438596, median=60.256551724137935, p75=62.04271320093458, max=65.53049999999999, mean=60.87339049127181, std=2.7355755141877194 (missing=0)",
    "- avg_rate_quality: min=31.623250000000002, p25=33.391985571405144, median=34.62965517241379, p75=34.66557023195877, max=37.1071875, mean=34.210743468448804, std=1.7335107253667839 (missing=0)",
    "- cat_a: min=18.0, p25=25.5, median=37.0, p75=41.0, max=49.0, mean=33.857142857142854, std=11.725024114098465 (missing=0)",
    "- cat_b: min=5.0, p25=18.0, median=33.0, p75=34.5, max=39.0, mean=26.0, std=13.759844960366863 (missing=0)",
    "- cat_c: min=0.0, p25=3.5, median=13.0, p75=15.0, max=19.0, mean=9.857142857142858, std=7.358183005529092 (missing=0)",
    "- cat_d: min=3.0, p25=4.5, median=9.0, p75=12.5, max=21.0, mean=9.571428571428571, std=6.373307431706682 (missing=0)",
    "",
    "MONTH-AWARE DIRECTIVE:",
    "If a 'Month' column is present, you MUST compare months explicitly.",
    "- Quantify month-over-month deltas for the key KPIs you discuss (state sign and magnitude).",
    "- Identify where performance improved or declined the most by outlet_category/region/outlet_type as applicable.",
    "- Use only the provided computed statistics and grouped stats by 'Month' (if present) to support claims.",
    "- Keep comparisons concise and prioritized; avoid repeating trivial differences.",
    "Provide a structured analysis of the data based on the following format:",
    "",
    "### 1. Observation",
    "- State the most significant, factual patterns from the data.",
    "- Use short, direct bullet points.",
    "- Quantify your findings with precise numbers, ranges, or counts.",
    "  - **Example:** 'The [metric_name] for [Segment A] ranges from [X] to [Y].'",
    "  - **Example:** '[Number] of entities have a value of 0 for the [metric_name] parameter.'",
    "",
    "- Always state the explicit min and max for each numeric KPI you reference. If grouped statistics by 'outlet_category' or 'outlet_type' are provided, include the per-group min and max for the primary KPI(s).",
    "",
    "### 2. Interpretation",
    "- Explain the business or practical implications of your observations.",
    "- Identify the key drivers behind the observed patterns and the relationships between metrics.",
    "  - **Example:** 'The high performance in [Metric A] for [Segment B] appears to be negatively correlated with [Metric C], suggesting a potential trade-off.'",
    "- Quantify the potential impact, risk, or opportunity.",
    "  - **Example:** 'The cluster of [Number] entities in [Segment C] shows an average [Metric D] that is [Value/Percentage] below the target, indicating a high risk of [describe the business risk, e.g., user churn, quality failure, revenue loss].'",
    "",
    "### 3. Recommendation",
    "- Propose clear, actionable next steps based on your interpretation.",
    "- Prioritize your recommendations to guide decision-making.",
    "  - **High Priority:** Address critical issues (e.g., data integrity problems, major risks, or opportunities affecting the largest segments).",
    "  - **Medium Priority:** Focus on important optimizations or further investigations.",
    "  - **Foundation:** Suggest general best practices or foundational improvements.",
    "- Each recommendation should be directly linked to a specific, quantified observation.",
    "  - **Example:** 'Given that [Number] entities have 0 values for [metric_name], the top priority is to audit the data pipeline to correct this potential anomaly.'",
    "",
    "### Parameter Focus Coverage",
    "- Conclude with a brief summary for each key parameter analyzed.",
    "- For each parameter, provide a single bullet point with a one-sentence, numeric summary.",
    "  - **Example:** '[parameter_name]: The values range from [min] to [max], with the majority of entities clustered around [central_tendency_value].'",
    "  - **Example:** '[categorical_parameter]: The most prevalent category is '[Category_X],' accounting for [Percentage]% of the data.'",
    "JSON follows:",
    "```json",
    "{\"charts\": [{\"graph_id\": \"q2\", \"graph_label\": \"Outlet Category Distribution (% by Region)\", \"filters\": {\"outlet_categories\": [], \"regions\": [], \"outlet_types\": [], \"outlets\": [], \"search_text\": \"\", \"score_band\": \"All\", \"units_band\": \"All\", \"kpi_group\": \"All\", \"kpi_single\": null, \"months\": [\"March\", \"May\"], \"compare_months\": false}, \"columns\": [\"rgn\", \"category\", \"count\", \"pct\"], \"n_rows\": 28, \"rows\": [{\"rgn\": \"Central 1\", \"category\": \"A\", \"count\": 39, \"pct\": 34.21052631578947}, {\"rgn\": \"Central 2\", \"category\": \"A\", \"count\": 37, \"pct\": 38.144329896907216}, {\"rgn\": \"East Coast (Zone 1)\", \"category\": \"A\", \"count\": 19, \"pct\": 59.375}, {\"rgn\": \"East Coast (Zone 2)\", \"category\": \"A\", \"count\": 18, \"pct\": 62.06896551724138}, {\"rgn\": \"East Malaysia\", \"category\": \"A\", \"count\": 32, \"pct\": 40.0}, {\"rgn\": \"Northern\", \"category\": \"A\", \"count\": 43, \"pct\": 44.79166666666667}, {\"rgn\": \"Southern\", \"category\": \"A\", \"count\": 49, \"pct\": 45.794392523364486}, {\"rgn\": \"Central 1\", \"category\": \"B\", \"count\": 39, \"pct\": 34.21052631578947}, {\"rgn\": \"Central 2\", \"category\": \"B\", \"count\": 28, \"pct\": 28.865979381443296}, {\"rgn\": \"East Coast (Zone 1)\", \"category\": \"B\", \"count\": 5, \"pct\": 15.625}, {\"rgn\": \"East Coast (Zone 2)\", \"category\": \"B\", \"count\": 8, \"pct\": 27.586206896551722}, {\"rgn\": \"East Malaysia\", \"category\": \"B\", \"count\": 36, \"pct\": 45.0}, {\"rgn\": \"Northern\", \"category\": \"B\", \"count\": 33, \"pct\": 34.375}, {\"rgn\": \"Southern\", \"category\": \"B\", \"count\": 33, \"pct\": 30.8411214953271}, {\"rgn\": \"Central 1\", \"category\": \"C\", \"count\": 15, \"pct\": 13.157894736842104}, {\"rgn\": \"Central 2\", \"category\": \"C\", \"count\": 19, \"pct\": 19.587628865979383}, {\"rgn\": \"East Coast (Zone 1)\", \"category\": \"C\", \"count\": 4, \"pct\": 12.5}, {\"rgn\": \"East Coast (Zone 2)\", \"category\": \"C\", \"count\": 0, \"pct\": 0.0}, {\"rgn\": \"East Malaysia\", \"category\": \"C\", \"count\": 3, \"pct\": 3.75}, {\"rgn\": \"Northern\", \"category\": \"C\", \"count\": 15, \"pct\": 15.625}, {\"rgn\": \"Southern\", \"category\": \"C\", \"count\": 13, \"pct\": 12.149532710280374}, {\"rgn\": \"Central 1\", \"category\": \"D\", \"count\": 21, \"pct\": 18.421052631578945}, {\"rgn\": \"Central 2\", \"category\": \"D\", \"count\": 13, \"pct\": 13.402061855670103}, {\"rgn\": \"East Coast (Zone 1)\", \"category\": \"D\", \"count\": 4, \"pct\": 12.5}, {\"rgn\": \"East Coast (Zone 2)\", \"category\": \"D\", \"count\": 3, \"pct\": 10.344827586206897}, {\"rgn\": \"East Malaysia\", \"category\": \"D\", \"count\": 9, \"pct\": 11.25}, {\"rgn\": \"Northern\", \"category\": \"D\", \"count\": 5, \"pct\": 5.208333333333334}, {\"rgn\": \"Southern\", \"category\": \"D\", \"count\": 12, \"pct\": 11.214953271028037}], \"computed_stats\": {\"rgn\": {\"dtype\": \"object\", \"count\": 28, \"missing\": 0, \"non_null\": 28}, \"category\": {\"dtype\": \"object\", \"count\": 28, \"missing\": 0, \"non_null\": 28}, \"count\": {\"dtype\": \"int64\", \"count\": 28, \"missing\": 0, \"min\": 0.0, \"p25\": 7.25, \"median\": 16.5, \"p75\": 33.0, \"max\": 49.0, \"mean\": 19.821428571428573, \"std\": 14.409496794947348}, \"pct\": {\"dtype\": \"float64\", \"count\": 28, \"missing\": 0, \"min\": 0.0, \"p25\": 12.412383177570094, \"median\": 19.004340748779164, \"p75\": 35.3173324742268, \"max\": 62.06896551724138, \"mean\": 25.0, \"std\": 16.72636707881982}}, \"context_stats\": {\"large_computed_stats\": {\"rgn\": {\"dtype\": \"object\", \"count\": 7, \"missing\": 0, \"non_null\": 7}, \"avg_total_score\": {\"dtype\": \"float64\", \"count\": 7, \"missing\": 0, \"min\": 92.34453608247422, \"p25\": 93.72011723233317, \"median\": 94.88689655172413, \"p75\": 96.41771875, \"max\": 98.08260416666667, \"mean\": 95.08424410936162, \"std\": 2.125297688304183}, \"avg_rate_performance\": {\"dtype\": \"float64\", \"count\": 7, \"missing\": 0, \"min\": 57.674226804123705, \"p25\": 59.28351425438596, \"median\": 60.256551724137935, \"p75\": 62.04271320093458, \"max\": 65.53049999999999, \"mean\": 60.87339049127181, \"std\": 2.7355755141877194}, \"avg_rate_quality\": {\"dtype\": \"float64\", \"count\": 7, \"missing\": 0, \"min\": 31.623250000000002, \"p25\": 33.391985571405144, \"median\": 34.62965517241379, \"p75\": 34.66557023195877, \"max\": 37.1071875, \"mean\": 34.210743468448804, \"std\": 1.7335107253667839}, \"cat_a\": {\"dtype\": \"int64\", \"count\": 7, \"missing\": 0, \"min\": 18.0, \"p25\": 25.5, \"median\": 37.0, \"p75\": 41.0, \"max\": 49.0, \"mean\": 33.857142857142854, \"std\": 11.725024114098465}, \"cat_b\": {\"dtype\": \"int64\", \"count\": 7, \"missing\": 0, \"min\": 5.0, \"p25\": 18.0, \"median\": 33.0, \"p75\": 34.5, \"max\": 39.0, \"mean\": 26.0, \"std\": 13.759844960366863}, \"cat_c\": {\"dtype\": \"int64\", \"count\": 7, \"missing\": 0, \"min\": 0.0, \"p25\": 3.5, \"median\": 13.0, \"p75\": 15.0, \"max\": 19.0, \"mean\": 9.857142857142858, \"std\": 7.358183005529092}, \"cat_d\": {\"dtype\": \"int64\", \"count\": 7, \"missing\": 0, \"min\": 3.0, \"p25\": 4.5, \"median\": 9.0, \"p75\": 12.5, \"max\": 21.0, \"mean\": 9.571428571428571, \"std\": 6.373307431706682}}, \"large_group_stats\": {}}}], \"metadata\": {}}",
    "```"
  ]
}
{
  "meta": {
    "ts": "2025-09-18T03:52:21.360183Z",
    "mode": "individual-multi",
    "provider": "gemini",
    "model": "gemini-2.0-flash",
    "selected_graphs": [
      "q2-month-March"
    ],
    "graph_label": "Outlet Category Distribution (% by Region) — March",
    "focus_hint": ""
  },
  "metadata": {},
  "charts_meta": [],
  "prompt": "Role: You are a strict, quantitative data analyst. Your sole task is to analyze the provided snapshot of CR KPI data.\nCritical Directive: Your analysis MUST be based exclusively on the provided figures. You MUST NOT infer any time-based trends (e.g., improvement, decline, momentum) as this is a single point in time.\n\nNon-Negotiable Context: All insights must frame performance through the fundamental trade-off between short-term financial performance (sales, revenue) and long-term customer health (satisfaction, loyalty).\n**Quantification Mandate: You MUST quantify all claims. Instead of 'low' or 'high', state the actual values, ranges, and percentages. Estimate potential impact (e.g., revenue risk, churn probability) based on the magnitude of quality gaps.**\n\nTimeframe Guard: Do NOT mention or assume timeframes (e.g., 'MTD', 'YTD', 'MoM', 'YoY') unless these exact terms appear in the dataset columns or metadata. If absent, treat percentages as timeless normalized achievements and avoid any timeframe terminology.\n\nYou are a senior data analyst presenting to business stakeholders. I will provide a chart dataset as JSON.\nReturn plain markdown only (no code fences, no introductory text). Be specific, quantified, and evidence-led.\nDo not be vague or ambiguous: avoid generic statements; support each key claim with concrete numbers, names, and explicit comparisons from the provided data.\n\nKNOWLEDGE BASE:\nKPI CALCULATION FORMULAS:\n- MTD Actual (%): Month-to-date achievement as percentage of target\n  * Performance KPIs: MTD Actual / MTD Target * 100\n  * Insurance: MTD Actual / MTD Target = % (2 Decimal Point)\n  * NPS: MTD Actual / MTD Target * 100\n  * QPI: xQPI * (Total claim submission by outlet (Aging ≤3days)/Total claim submission by outlet) * 100\n- Rate: Points * Achievement (based on MTD Actual %)\n- Ranking: Sorted based on Rate in Descending order\n\nOutlet Categories (A/B/C/D) reflect whether an outlet meets performance (quantity) and quality (service) thresholds:\n- A: Performance > threshold AND Quality > threshold (top performer).\n- B: Performance > threshold BUT Quality < threshold (good performer but poor service).\n- C: Performance < threshold BUT Quality > threshold (good service, underperforming).\n- D: Performance < threshold AND Quality < threshold (poor performer).\n\nCategorical Hierarchy: A > B > C > D. When comparing categories, treat A as strictly better than B, B better than C, and so on.\n\nOutlet Types indicate business functions and relevant KPIs: **1S (Sales only)**, **2S (Service only)**, **1+2S/3S (Sales & Service)**.\n- 1S KPIs: New Car Reg, Gear Up, Insurance, POV, NPS Sales. \n- 2S KPIs: Intake, Revenue, Parts, Lubricant, NPS Svc, E-Appointment, QPI.\n- 1+2S/3S use blended metrics from both sides.\n\nDefinition of Quality vs Performance parameters (use this consistently):\n- Quality parameters: QPI (qpi_pct), E-Appointment (eappointment_pct), NPS Sales (nps_sales_pct), NPS Service (cs_service_pct).\n- All other KPI % metrics belong to Performance.\n\nAxis Thresholds by Outlet Type (for interpreting X/Y scatter parameters):\n### Y is performance , X is quality\n- 1S: Threshold X = 35, Threshold Y = 60.\n- 2S: Threshold X = 40, Threshold Y = 55.\n- 1+2S: Threshold X = 30, Threshold Y = 50.\n- 3S: Threshold X = 35, Threshold Y = 60.\n\nInterpreting % Achievement: 100% = target achieved; >100% = target exceeded; <100% = gap.\nSome KPIs (e.g., NPS, QPI) are composites or tiered scores; >100% still indicates exceeding the blended target.\n\nOutlet Type KPI Scope Rule:\n- 1S (Sales-only) focus KPIs: New Car Reg, Gear Up, Insurance, POV, NPS Sales. Treat service KPIs as 0/NA for 1S.\n- 2S (Service-only) focus KPIs: Intake, Revenue, Parts, Lubricant, NPS Svc, E-Appointment, QPI. Treat sales KPIs as 0/NA for 2S.\n- 1+2S/3S use blended metrics from both sides; all KPIs apply.\n\nCATEGORICAL ANALYSIS DECISION TREE (USE THIS):\n- If the largest group is 'A' outlets: The region is healthy. Insight = 'This region successfully balances performance and quality.'\n- If the largest group is 'B' outlets: The region is at risk. Insight = 'This region is prioritizing short-term sales over customer experience, which threatens long-term loyalty.' This is the most common and critical insight.\n- If the largest group is 'C' outlets: The region is struggling but has good service. Insight = 'This region has strong customer processes but is failing to achieve sales and volume targets.'\n- If the largest group is 'D' outlets: The region is in crisis. Insight = 'This region is failing across all key performance and quality indicators.'\n- Compare A vs. D: Always note the disparity between top and bottom performers.\n\nDATA DICTIONARY:\nData Dictionary & Terminology:\nKPI Parameters:\nPerformance:\n- Car Reg (New Car Registration): Number of new vehicles registered (primary sales volume).\n- Intake (Job Intake): Number of repair orders/service jobs opened (service volume).\n- Revenue (Service Revenue): Income from repair orders (after-sales).\n- Parts (Parts Sales): Revenue from spare parts sales.\n- Lubricant (Lubricant Sales): Quantity or revenue from engine oil/lubricants.\n- Gear Up (Accessory Sales): Vehicles fitted with optional accessories / accessory revenue.\n- Ins. T1 (Insurance Tier 1 New): Insurance policies sold for new vehicles.\n- Ins. Renew O/all (Insurance Renewal Overall): Renewed insurance policies for vehicles of any age.\n- POV (Trade-In): Perodua vehicles taken as trade-ins for new purchases.\nQuality:\n- NPS Sales: Net Promoter Score from sales surveys.\n- NPS Svc: Net Promoter Score from service surveys.\n- E-Appt (E-Appointment): Digital service appointments (Booking/Confirmed/No-Show).\n- QPI (Quality Performance Indicator): % of warranty claims submitted within required timeframe (≤3 days).\n\nOther Terms:\n- Outlet Type: 1S (Sales), 2S (Service), 1+2S (Sales & Service), 3S (Sales, Service, Spare Parts).\n- Outlet Category: Grade A/B/C/D based on Performance & Quality thresholds.\n- MTD/YTD Actual/Target: Month/Year-to-date achieved vs goal.\n- Threshold: Minimum acceptable level for Performance/Quality.\n- Weightage: Relative KPI importance by outlet type.\n\nCOMPUTED STATISTICS (authoritative, precomputed from pandas):\nUse ONLY the computed statistics below for the 'Observation' section.\nDo NOT do any arithmetic yourself; treat these as exact facts.\nMANDATORY: Explicitly state the min and max for each numeric column. If grouped statistics are provided (by 'outlet_category' or 'outlet_type'), include the min and max per group for the primary KPIs you discuss.\nIf both a small and large table are present for a chart (e.g., Tab 3 KPI gaps), FOCUS your Observations on the SMALL table; use the large-table statistics only as supporting context.\n\n### Computed Statistics — Outlet Category Distribution (% by Region) — March\n- Month: count=4 (missing=0)\n- category: count=4 (missing=0)\n- count: min=32.0, p25=38.0, median=69.5, p75=100.5, max=105.0, mean=69.0, std=38.32318706301274 (missing=0)\n- pct: min=11.594202898550725, p25=13.768115942028986, median=25.181159420289855, p75=36.413043478260875, max=38.04347826086957, mean=25.0, std=13.885212703990122 (missing=0)\n\nGrouped statistics by dimension:\n- By Month:\n  - March:\n    - count: min=32.0, max=105.0, range=73.0, mean=69.0 (n=4)\n    - pct: min=11.59, max=38.04, range=26.45, mean=25.0 (n=4)\n\nMONTH-AWARE DIRECTIVE:\nIf a 'Month' column is present, you MUST compare months explicitly.\n- Quantify month-over-month deltas for the key KPIs you discuss (state sign and magnitude).\n- Identify where performance improved or declined the most by outlet_category/region/outlet_type as applicable.\n- Use only the provided computed statistics and grouped stats by 'Month' (if present) to support claims.\n- Keep comparisons concise and prioritized; avoid repeating trivial differences.\nProvide a structured analysis of the data based on the following format:\n\n### 1. Observation\n- State the most significant, factual patterns from the data.\n- Use short, direct bullet points.\n- Quantify your findings with precise numbers, ranges, or counts.\n  - **Example:** 'The [metric_name] for [Segment A] ranges from [X] to [Y].'\n  - **Example:** '[Number] of entities have a value of 0 for the [metric_name] parameter.'\n\n- Always state the explicit min and max for each numeric KPI you reference. If grouped statistics by 'outlet_category' or 'outlet_type' are provided, include the per-group min and max for the primary KPI(s).\n\n### 2. Interpretation\n- Explain the business or practical implications of your observations.\n- Identify the key drivers behind the observed patterns and the relationships between metrics.\n  - **Example:** 'The high performance in [Metric A] for [Segment B] appears to be negatively correlated with [Metric C], suggesting a potential trade-off.'\n- Quantify the potential impact, risk, or opportunity.\n  - **Example:** 'The cluster of [Number] entities in [Segment C] shows an average [Metric D] that is [Value/Percentage] below the target, indicating a high risk of [describe the business risk, e.g., user churn, quality failure, revenue loss].'\n\n### 3. Recommendation\n- Propose clear, actionable next steps based on your interpretation.\n- Prioritize your recommendations to guide decision-making.\n  - **High Priority:** Address critical issues (e.g., data integrity problems, major risks, or opportunities affecting the largest segments).\n  - **Medium Priority:** Focus on important optimizations or further investigations.\n  - **Foundation:** Suggest general best practices or foundational improvements.\n- Each recommendation should be directly linked to a specific, quantified observation.\n  - **Example:** 'Given that [Number] entities have 0 values for [metric_name], the top priority is to audit the data pipeline to correct this potential anomaly.'\n\n### Parameter Focus Coverage\n- Conclude with a brief summary for each key parameter analyzed.\n- For each parameter, provide a single bullet point with a one-sentence, numeric summary.\n  - **Example:** '[parameter_name]: The values range from [min] to [max], with the majority of entities clustered around [central_tendency_value].'\n  - **Example:** '[categorical_parameter]: The most prevalent category is '[Category_X],' accounting for [Percentage]% of the data.'\nJSON follows:\n```json\n{\"charts\": [{\"graph_id\": \"q2-month-March\", \"graph_label\": \"Outlet Category Distribution (% by Region) — March\", \"filters\": {\"outlet_categories\": [], \"regions\": [], \"outlet_types\": [], \"outlets\": [], \"search_text\": \"\", \"score_band\": \"All\", \"units_band\": \"All\", \"kpi_group\": \"All\", \"kpi_single\": null, \"months\": [\"March\"], \"compare_months\": false}, \"columns\": [\"Month\", \"category\", \"count\", \"pct\"], \"n_rows\": 4, \"rows\": [{\"Month\": \"March\", \"category\": \"A\", \"count\": 105, \"pct\": 38.04347826086957}, {\"Month\": \"March\", \"category\": \"B\", \"count\": 99, \"pct\": 35.869565217391305}, {\"Month\": \"March\", \"category\": \"C\", \"count\": 32, \"pct\": 11.594202898550725}, {\"Month\": \"March\", \"category\": \"D\", \"count\": 40, \"pct\": 14.492753623188406}], \"computed_stats\": {\"Month\": {\"dtype\": \"object\", \"count\": 4, \"missing\": 0, \"non_null\": 4}, \"category\": {\"dtype\": \"object\", \"count\": 4, \"missing\": 0, \"non_null\": 4}, \"count\": {\"dtype\": \"int64\", \"count\": 4, \"missing\": 0, \"min\": 32.0, \"p25\": 38.0, \"median\": 69.5, \"p75\": 100.5, \"max\": 105.0, \"mean\": 69.0, \"std\": 38.32318706301274}, \"pct\": {\"dtype\": \"float64\", \"count\": 4, \"missing\": 0, \"min\": 11.594202898550725, \"p25\": 13.768115942028986, \"median\": 25.181159420289855, \"p75\": 36.413043478260875, \"max\": 38.04347826086957, \"mean\": 25.0, \"std\": 13.885212703990122}}, \"group_stats\": {\"Month\": {\"March\": {\"count\": {\"min\": 32.0, \"max\": 105.0, \"mean\": 69.0, \"range\": 73.0, \"count\": 4}, \"pct\": {\"min\": 11.59, \"max\": 38.04, \"mean\": 25.0, \"range\": 26.45, \"count\": 4}}}}}], \"metadata\": {}}\n```",
  "prompt_lines": [
    "Role: You are a strict, quantitative data analyst. Your sole task is to analyze the provided snapshot of CR KPI data.",
    "Critical Directive: Your analysis MUST be based exclusively on the provided figures. You MUST NOT infer any time-based trends (e.g., improvement, decline, momentum) as this is a single point in time.",
    "",
    "Non-Negotiable Context: All insights must frame performance through the fundamental trade-off between short-term financial performance (sales, revenue) and long-term customer health (satisfaction, loyalty).",
    "**Quantification Mandate: You MUST quantify all claims. Instead of 'low' or 'high', state the actual values, ranges, and percentages. Estimate potential impact (e.g., revenue risk, churn probability) based on the magnitude of quality gaps.**",
    "",
    "Timeframe Guard: Do NOT mention or assume timeframes (e.g., 'MTD', 'YTD', 'MoM', 'YoY') unless these exact terms appear in the dataset columns or metadata. If absent, treat percentages as timeless normalized achievements and avoid any timeframe terminology.",
    "",
    "You are a senior data analyst presenting to business stakeholders. I will provide a chart dataset as JSON.",
    "Return plain markdown only (no code fences, no introductory text). Be specific, quantified, and evidence-led.",
    "Do not be vague or ambiguous: avoid generic statements; support each key claim with concrete numbers, names, and explicit comparisons from the provided data.",
    "",
    "KNOWLEDGE BASE:",
    "KPI CALCULATION FORMULAS:",
    "- MTD Actual (%): Month-to-date achievement as percentage of target",
    "  * Performance KPIs: MTD Actual / MTD Target * 100",
    "  * Insurance: MTD Actual / MTD Target = % (2 Decimal Point)",
    "  * NPS: MTD Actual / MTD Target * 100",
    "  * QPI: xQPI * (Total claim submission by outlet (Aging ≤3days)/Total claim submission by outlet) * 100",
    "- Rate: Points * Achievement (based on MTD Actual %)",
    "- Ranking: Sorted based on Rate in Descending order",
    "",
    "Outlet Categories (A/B/C/D) reflect whether an outlet meets performance (quantity) and quality (service) thresholds:",
    "- A: Performance > threshold AND Quality > threshold (top performer).",
    "- B: Performance > threshold BUT Quality < threshold (good performer but poor service).",
    "- C: Performance < threshold BUT Quality > threshold (good service, underperforming).",
    "- D: Performance < threshold AND Quality < threshold (poor performer).",
    "",
    "Categorical Hierarchy: A > B > C > D. When comparing categories, treat A as strictly better than B, B better than C, and so on.",
    "",
    "Outlet Types indicate business functions and relevant KPIs: **1S (Sales only)**, **2S (Service only)**, **1+2S/3S (Sales & Service)**.",
    "- 1S KPIs: New Car Reg, Gear Up, Insurance, POV, NPS Sales. ",
    "- 2S KPIs: Intake, Revenue, Parts, Lubricant, NPS Svc, E-Appointment, QPI.",
    "- 1+2S/3S use blended metrics from both sides.",
    "",
    "Definition of Quality vs Performance parameters (use this consistently):",
    "- Quality parameters: QPI (qpi_pct), E-Appointment (eappointment_pct), NPS Sales (nps_sales_pct), NPS Service (cs_service_pct).",
    "- All other KPI % metrics belong to Performance.",
    "",
    "Axis Thresholds by Outlet Type (for interpreting X/Y scatter parameters):",
    "### Y is performance , X is quality",
    "- 1S: Threshold X = 35, Threshold Y = 60.",
    "- 2S: Threshold X = 40, Threshold Y = 55.",
    "- 1+2S: Threshold X = 30, Threshold Y = 50.",
    "- 3S: Threshold X = 35, Threshold Y = 60.",
    "",
    "Interpreting % Achievement: 100% = target achieved; >100% = target exceeded; <100% = gap.",
    "Some KPIs (e.g., NPS, QPI) are composites or tiered scores; >100% still indicates exceeding the blended target.",
    "",
    "Outlet Type KPI Scope Rule:",
    "- 1S (Sales-only) focus KPIs: New Car Reg, Gear Up, Insurance, POV, NPS Sales. Treat service KPIs as 0/NA for 1S.",
    "- 2S (Service-only) focus KPIs: Intake, Revenue, Parts, Lubricant, NPS Svc, E-Appointment, QPI. Treat sales KPIs as 0/NA for 2S.",
    "- 1+2S/3S use blended metrics from both sides; all KPIs apply.",
    "",
    "CATEGORICAL ANALYSIS DECISION TREE (USE THIS):",
    "- If the largest group is 'A' outlets: The region is healthy. Insight = 'This region successfully balances performance and quality.'",
    "- If the largest group is 'B' outlets: The region is at risk. Insight = 'This region is prioritizing short-term sales over customer experience, which threatens long-term loyalty.' This is the most common and critical insight.",
    "- If the largest group is 'C' outlets: The region is struggling but has good service. Insight = 'This region has strong customer processes but is failing to achieve sales and volume targets.'",
    "- If the largest group is 'D' outlets: The region is in crisis. Insight = 'This region is failing across all key performance and quality indicators.'",
    "- Compare A vs. D: Always note the disparity between top and bottom performers.",
    "",
    "DATA DICTIONARY:",
    "Data Dictionary & Terminology:",
    "KPI Parameters:",
    "Performance:",
    "- Car Reg (New Car Registration): Number of new vehicles registered (primary sales volume).",
    "- Intake (Job Intake): Number of repair orders/service jobs opened (service volume).",
    "- Revenue (Service Revenue): Income from repair orders (after-sales).",
    "- Parts (Parts Sales): Revenue from spare parts sales.",
    "- Lubricant (Lubricant Sales): Quantity or revenue from engine oil/lubricants.",
    "- Gear Up (Accessory Sales): Vehicles fitted with optional accessories / accessory revenue.",
    "- Ins. T1 (Insurance Tier 1 New): Insurance policies sold for new vehicles.",
    "- Ins. Renew O/all (Insurance Renewal Overall): Renewed insurance policies for vehicles of any age.",
    "- POV (Trade-In): Perodua vehicles taken as trade-ins for new purchases.",
    "Quality:",
    "- NPS Sales: Net Promoter Score from sales surveys.",
    "- NPS Svc: Net Promoter Score from service surveys.",
    "- E-Appt (E-Appointment): Digital service appointments (Booking/Confirmed/No-Show).",
    "- QPI (Quality Performance Indicator): % of warranty claims submitted within required timeframe (≤3 days).",
    "",
    "Other Terms:",
    "- Outlet Type: 1S (Sales), 2S (Service), 1+2S (Sales & Service), 3S (Sales, Service, Spare Parts).",
    "- Outlet Category: Grade A/B/C/D based on Performance & Quality thresholds.",
    "- MTD/YTD Actual/Target: Month/Year-to-date achieved vs goal.",
    "- Threshold: Minimum acceptable level for Performance/Quality.",
    "- Weightage: Relative KPI importance by outlet type.",
    "",
    "COMPUTED STATISTICS (authoritative, precomputed from pandas):",
    "Use ONLY the computed statistics below for the 'Observation' section.",
    "Do NOT do any arithmetic yourself; treat these as exact facts.",
    "MANDATORY: Explicitly state the min and max for each numeric column. If grouped statistics are provided (by 'outlet_category' or 'outlet_type'), include the min and max per group for the primary KPIs you discuss.",
    "If both a small and large table are present for a chart (e.g., Tab 3 KPI gaps), FOCUS your Observations on the SMALL table; use the large-table statistics only as supporting context.",
    "",
    "### Computed Statistics — Outlet Category Distribution (% by Region) — March",
    "- Month: count=4 (missing=0)",
    "- category: count=4 (missing=0)",
    "- count: min=32.0, p25=38.0, median=69.5, p75=100.5, max=105.0, mean=69.0, std=38.32318706301274 (missing=0)",
    "- pct: min=11.594202898550725, p25=13.768115942028986, median=25.181159420289855, p75=36.413043478260875, max=38.04347826086957, mean=25.0, std=13.885212703990122 (missing=0)",
    "",
    "Grouped statistics by dimension:",
    "- By Month:",
    "  - March:",
    "    - count: min=32.0, max=105.0, range=73.0, mean=69.0 (n=4)",
    "    - pct: min=11.59, max=38.04, range=26.45, mean=25.0 (n=4)",
    "",
    "MONTH-AWARE DIRECTIVE:",
    "If a 'Month' column is present, you MUST compare months explicitly.",
    "- Quantify month-over-month deltas for the key KPIs you discuss (state sign and magnitude).",
    "- Identify where performance improved or declined the most by outlet_category/region/outlet_type as applicable.",
    "- Use only the provided computed statistics and grouped stats by 'Month' (if present) to support claims.",
    "- Keep comparisons concise and prioritized; avoid repeating trivial differences.",
    "Provide a structured analysis of the data based on the following format:",
    "",
    "### 1. Observation",
    "- State the most significant, factual patterns from the data.",
    "- Use short, direct bullet points.",
    "- Quantify your findings with precise numbers, ranges, or counts.",
    "  - **Example:** 'The [metric_name] for [Segment A] ranges from [X] to [Y].'",
    "  - **Example:** '[Number] of entities have a value of 0 for the [metric_name] parameter.'",
    "",
    "- Always state the explicit min and max for each numeric KPI you reference. If grouped statistics by 'outlet_category' or 'outlet_type' are provided, include the per-group min and max for the primary KPI(s).",
    "",
    "### 2. Interpretation",
    "- Explain the business or practical implications of your observations.",
    "- Identify the key drivers behind the observed patterns and the relationships between metrics.",
    "  - **Example:** 'The high performance in [Metric A] for [Segment B] appears to be negatively correlated with [Metric C], suggesting a potential trade-off.'",
    "- Quantify the potential impact, risk, or opportunity.",
    "  - **Example:** 'The cluster of [Number] entities in [Segment C] shows an average [Metric D] that is [Value/Percentage] below the target, indicating a high risk of [describe the business risk, e.g., user churn, quality failure, revenue loss].'",
    "",
    "### 3. Recommendation",
    "- Propose clear, actionable next steps based on your interpretation.",
    "- Prioritize your recommendations to guide decision-making.",
    "  - **High Priority:** Address critical issues (e.g., data integrity problems, major risks, or opportunities affecting the largest segments).",
    "  - **Medium Priority:** Focus on important optimizations or further investigations.",
    "  - **Foundation:** Suggest general best practices or foundational improvements.",
    "- Each recommendation should be directly linked to a specific, quantified observation.",
    "  - **Example:** 'Given that [Number] entities have 0 values for [metric_name], the top priority is to audit the data pipeline to correct this potential anomaly.'",
    "",
    "### Parameter Focus Coverage",
    "- Conclude with a brief summary for each key parameter analyzed.",
    "- For each parameter, provide a single bullet point with a one-sentence, numeric summary.",
    "  - **Example:** '[parameter_name]: The values range from [min] to [max], with the majority of entities clustered around [central_tendency_value].'",
    "  - **Example:** '[categorical_parameter]: The most prevalent category is '[Category_X],' accounting for [Percentage]% of the data.'",
    "JSON follows:",
    "```json",
    "{\"charts\": [{\"graph_id\": \"q2-month-March\", \"graph_label\": \"Outlet Category Distribution (% by Region) — March\", \"filters\": {\"outlet_categories\": [], \"regions\": [], \"outlet_types\": [], \"outlets\": [], \"search_text\": \"\", \"score_band\": \"All\", \"units_band\": \"All\", \"kpi_group\": \"All\", \"kpi_single\": null, \"months\": [\"March\"], \"compare_months\": false}, \"columns\": [\"Month\", \"category\", \"count\", \"pct\"], \"n_rows\": 4, \"rows\": [{\"Month\": \"March\", \"category\": \"A\", \"count\": 105, \"pct\": 38.04347826086957}, {\"Month\": \"March\", \"category\": \"B\", \"count\": 99, \"pct\": 35.869565217391305}, {\"Month\": \"March\", \"category\": \"C\", \"count\": 32, \"pct\": 11.594202898550725}, {\"Month\": \"March\", \"category\": \"D\", \"count\": 40, \"pct\": 14.492753623188406}], \"computed_stats\": {\"Month\": {\"dtype\": \"object\", \"count\": 4, \"missing\": 0, \"non_null\": 4}, \"category\": {\"dtype\": \"object\", \"count\": 4, \"missing\": 0, \"non_null\": 4}, \"count\": {\"dtype\": \"int64\", \"count\": 4, \"missing\": 0, \"min\": 32.0, \"p25\": 38.0, \"median\": 69.5, \"p75\": 100.5, \"max\": 105.0, \"mean\": 69.0, \"std\": 38.32318706301274}, \"pct\": {\"dtype\": \"float64\", \"count\": 4, \"missing\": 0, \"min\": 11.594202898550725, \"p25\": 13.768115942028986, \"median\": 25.181159420289855, \"p75\": 36.413043478260875, \"max\": 38.04347826086957, \"mean\": 25.0, \"std\": 13.885212703990122}}, \"group_stats\": {\"Month\": {\"March\": {\"count\": {\"min\": 32.0, \"max\": 105.0, \"mean\": 69.0, \"range\": 73.0, \"count\": 4}, \"pct\": {\"min\": 11.59, \"max\": 38.04, \"mean\": 25.0, \"range\": 26.45, \"count\": 4}}}}}], \"metadata\": {}}",
    "```"
  ]
}
{
  "meta": {
    "ts": "2025-09-18T03:52:26.996986Z",
    "mode": "individual-multi",
    "provider": "gemini",
    "model": "gemini-2.0-flash",
    "selected_graphs": [
      "q2-month-May"
    ],
    "graph_label": "Outlet Category Distribution (% by Region) — May",
    "focus_hint": ""
  },
  "metadata": {},
  "charts_meta": [],
  "prompt": "Role: You are a strict, quantitative data analyst. Your sole task is to analyze the provided snapshot of CR KPI data.\nCritical Directive: Your analysis MUST be based exclusively on the provided figures. You MUST NOT infer any time-based trends (e.g., improvement, decline, momentum) as this is a single point in time.\n\nNon-Negotiable Context: All insights must frame performance through the fundamental trade-off between short-term financial performance (sales, revenue) and long-term customer health (satisfaction, loyalty).\n**Quantification Mandate: You MUST quantify all claims. Instead of 'low' or 'high', state the actual values, ranges, and percentages. Estimate potential impact (e.g., revenue risk, churn probability) based on the magnitude of quality gaps.**\n\nTimeframe Guard: Do NOT mention or assume timeframes (e.g., 'MTD', 'YTD', 'MoM', 'YoY') unless these exact terms appear in the dataset columns or metadata. If absent, treat percentages as timeless normalized achievements and avoid any timeframe terminology.\n\nYou are a senior data analyst presenting to business stakeholders. I will provide a chart dataset as JSON.\nReturn plain markdown only (no code fences, no introductory text). Be specific, quantified, and evidence-led.\nDo not be vague or ambiguous: avoid generic statements; support each key claim with concrete numbers, names, and explicit comparisons from the provided data.\n\nKNOWLEDGE BASE:\nKPI CALCULATION FORMULAS:\n- MTD Actual (%): Month-to-date achievement as percentage of target\n  * Performance KPIs: MTD Actual / MTD Target * 100\n  * Insurance: MTD Actual / MTD Target = % (2 Decimal Point)\n  * NPS: MTD Actual / MTD Target * 100\n  * QPI: xQPI * (Total claim submission by outlet (Aging ≤3days)/Total claim submission by outlet) * 100\n- Rate: Points * Achievement (based on MTD Actual %)\n- Ranking: Sorted based on Rate in Descending order\n\nOutlet Categories (A/B/C/D) reflect whether an outlet meets performance (quantity) and quality (service) thresholds:\n- A: Performance > threshold AND Quality > threshold (top performer).\n- B: Performance > threshold BUT Quality < threshold (good performer but poor service).\n- C: Performance < threshold BUT Quality > threshold (good service, underperforming).\n- D: Performance < threshold AND Quality < threshold (poor performer).\n\nCategorical Hierarchy: A > B > C > D. When comparing categories, treat A as strictly better than B, B better than C, and so on.\n\nOutlet Types indicate business functions and relevant KPIs: **1S (Sales only)**, **2S (Service only)**, **1+2S/3S (Sales & Service)**.\n- 1S KPIs: New Car Reg, Gear Up, Insurance, POV, NPS Sales. \n- 2S KPIs: Intake, Revenue, Parts, Lubricant, NPS Svc, E-Appointment, QPI.\n- 1+2S/3S use blended metrics from both sides.\n\nDefinition of Quality vs Performance parameters (use this consistently):\n- Quality parameters: QPI (qpi_pct), E-Appointment (eappointment_pct), NPS Sales (nps_sales_pct), NPS Service (cs_service_pct).\n- All other KPI % metrics belong to Performance.\n\nAxis Thresholds by Outlet Type (for interpreting X/Y scatter parameters):\n### Y is performance , X is quality\n- 1S: Threshold X = 35, Threshold Y = 60.\n- 2S: Threshold X = 40, Threshold Y = 55.\n- 1+2S: Threshold X = 30, Threshold Y = 50.\n- 3S: Threshold X = 35, Threshold Y = 60.\n\nInterpreting % Achievement: 100% = target achieved; >100% = target exceeded; <100% = gap.\nSome KPIs (e.g., NPS, QPI) are composites or tiered scores; >100% still indicates exceeding the blended target.\n\nOutlet Type KPI Scope Rule:\n- 1S (Sales-only) focus KPIs: New Car Reg, Gear Up, Insurance, POV, NPS Sales. Treat service KPIs as 0/NA for 1S.\n- 2S (Service-only) focus KPIs: Intake, Revenue, Parts, Lubricant, NPS Svc, E-Appointment, QPI. Treat sales KPIs as 0/NA for 2S.\n- 1+2S/3S use blended metrics from both sides; all KPIs apply.\n\nCATEGORICAL ANALYSIS DECISION TREE (USE THIS):\n- If the largest group is 'A' outlets: The region is healthy. Insight = 'This region successfully balances performance and quality.'\n- If the largest group is 'B' outlets: The region is at risk. Insight = 'This region is prioritizing short-term sales over customer experience, which threatens long-term loyalty.' This is the most common and critical insight.\n- If the largest group is 'C' outlets: The region is struggling but has good service. Insight = 'This region has strong customer processes but is failing to achieve sales and volume targets.'\n- If the largest group is 'D' outlets: The region is in crisis. Insight = 'This region is failing across all key performance and quality indicators.'\n- Compare A vs. D: Always note the disparity between top and bottom performers.\n\nDATA DICTIONARY:\nData Dictionary & Terminology:\nKPI Parameters:\nPerformance:\n- Car Reg (New Car Registration): Number of new vehicles registered (primary sales volume).\n- Intake (Job Intake): Number of repair orders/service jobs opened (service volume).\n- Revenue (Service Revenue): Income from repair orders (after-sales).\n- Parts (Parts Sales): Revenue from spare parts sales.\n- Lubricant (Lubricant Sales): Quantity or revenue from engine oil/lubricants.\n- Gear Up (Accessory Sales): Vehicles fitted with optional accessories / accessory revenue.\n- Ins. T1 (Insurance Tier 1 New): Insurance policies sold for new vehicles.\n- Ins. Renew O/all (Insurance Renewal Overall): Renewed insurance policies for vehicles of any age.\n- POV (Trade-In): Perodua vehicles taken as trade-ins for new purchases.\nQuality:\n- NPS Sales: Net Promoter Score from sales surveys.\n- NPS Svc: Net Promoter Score from service surveys.\n- E-Appt (E-Appointment): Digital service appointments (Booking/Confirmed/No-Show).\n- QPI (Quality Performance Indicator): % of warranty claims submitted within required timeframe (≤3 days).\n\nOther Terms:\n- Outlet Type: 1S (Sales), 2S (Service), 1+2S (Sales & Service), 3S (Sales, Service, Spare Parts).\n- Outlet Category: Grade A/B/C/D based on Performance & Quality thresholds.\n- MTD/YTD Actual/Target: Month/Year-to-date achieved vs goal.\n- Threshold: Minimum acceptable level for Performance/Quality.\n- Weightage: Relative KPI importance by outlet type.\n\nCOMPUTED STATISTICS (authoritative, precomputed from pandas):\nUse ONLY the computed statistics below for the 'Observation' section.\nDo NOT do any arithmetic yourself; treat these as exact facts.\nMANDATORY: Explicitly state the min and max for each numeric column. If grouped statistics are provided (by 'outlet_category' or 'outlet_type'), include the min and max per group for the primary KPIs you discuss.\nIf both a small and large table are present for a chart (e.g., Tab 3 KPI gaps), FOCUS your Observations on the SMALL table; use the large-table statistics only as supporting context.\n\n### Computed Statistics — Outlet Category Distribution (% by Region) — May\n- Month: count=4 (missing=0)\n- category: count=4 (missing=0)\n- count: min=27.0, p25=34.5, median=60.0, p75=95.25, max=132.0, mean=69.75, std=48.13436056152264 (missing=0)\n- pct: min=9.67741935483871, p25=12.365591397849462, median=21.50537634408602, p75=34.13978494623656, max=47.31182795698925, mean=24.999999999999996, std=17.252458982624606 (missing=0)\n\nGrouped statistics by dimension:\n- By Month:\n  - May:\n    - count: min=27.0, max=132.0, range=105.0, mean=69.75 (n=4)\n    - pct: min=9.68, max=47.31, range=37.63, mean=25.0 (n=4)\n\nMONTH-AWARE DIRECTIVE:\nIf a 'Month' column is present, you MUST compare months explicitly.\n- Quantify month-over-month deltas for the key KPIs you discuss (state sign and magnitude).\n- Identify where performance improved or declined the most by outlet_category/region/outlet_type as applicable.\n- Use only the provided computed statistics and grouped stats by 'Month' (if present) to support claims.\n- Keep comparisons concise and prioritized; avoid repeating trivial differences.\nProvide a structured analysis of the data based on the following format:\n\n### 1. Observation\n- State the most significant, factual patterns from the data.\n- Use short, direct bullet points.\n- Quantify your findings with precise numbers, ranges, or counts.\n  - **Example:** 'The [metric_name] for [Segment A] ranges from [X] to [Y].'\n  - **Example:** '[Number] of entities have a value of 0 for the [metric_name] parameter.'\n\n- Always state the explicit min and max for each numeric KPI you reference. If grouped statistics by 'outlet_category' or 'outlet_type' are provided, include the per-group min and max for the primary KPI(s).\n\n### 2. Interpretation\n- Explain the business or practical implications of your observations.\n- Identify the key drivers behind the observed patterns and the relationships between metrics.\n  - **Example:** 'The high performance in [Metric A] for [Segment B] appears to be negatively correlated with [Metric C], suggesting a potential trade-off.'\n- Quantify the potential impact, risk, or opportunity.\n  - **Example:** 'The cluster of [Number] entities in [Segment C] shows an average [Metric D] that is [Value/Percentage] below the target, indicating a high risk of [describe the business risk, e.g., user churn, quality failure, revenue loss].'\n\n### 3. Recommendation\n- Propose clear, actionable next steps based on your interpretation.\n- Prioritize your recommendations to guide decision-making.\n  - **High Priority:** Address critical issues (e.g., data integrity problems, major risks, or opportunities affecting the largest segments).\n  - **Medium Priority:** Focus on important optimizations or further investigations.\n  - **Foundation:** Suggest general best practices or foundational improvements.\n- Each recommendation should be directly linked to a specific, quantified observation.\n  - **Example:** 'Given that [Number] entities have 0 values for [metric_name], the top priority is to audit the data pipeline to correct this potential anomaly.'\n\n### Parameter Focus Coverage\n- Conclude with a brief summary for each key parameter analyzed.\n- For each parameter, provide a single bullet point with a one-sentence, numeric summary.\n  - **Example:** '[parameter_name]: The values range from [min] to [max], with the majority of entities clustered around [central_tendency_value].'\n  - **Example:** '[categorical_parameter]: The most prevalent category is '[Category_X],' accounting for [Percentage]% of the data.'\nJSON follows:\n```json\n{\"charts\": [{\"graph_id\": \"q2-month-May\", \"graph_label\": \"Outlet Category Distribution (% by Region) — May\", \"filters\": {\"outlet_categories\": [], \"regions\": [], \"outlet_types\": [], \"outlets\": [], \"search_text\": \"\", \"score_band\": \"All\", \"units_band\": \"All\", \"kpi_group\": \"All\", \"kpi_single\": null, \"months\": [\"May\"], \"compare_months\": false}, \"columns\": [\"Month\", \"category\", \"count\", \"pct\"], \"n_rows\": 4, \"rows\": [{\"Month\": \"May\", \"category\": \"A\", \"count\": 132, \"pct\": 47.31182795698925}, {\"Month\": \"May\", \"category\": \"B\", \"count\": 83, \"pct\": 29.749103942652326}, {\"Month\": \"May\", \"category\": \"C\", \"count\": 37, \"pct\": 13.261648745519713}, {\"Month\": \"May\", \"category\": \"D\", \"count\": 27, \"pct\": 9.67741935483871}], \"computed_stats\": {\"Month\": {\"dtype\": \"object\", \"count\": 4, \"missing\": 0, \"non_null\": 4}, \"category\": {\"dtype\": \"object\", \"count\": 4, \"missing\": 0, \"non_null\": 4}, \"count\": {\"dtype\": \"int64\", \"count\": 4, \"missing\": 0, \"min\": 27.0, \"p25\": 34.5, \"median\": 60.0, \"p75\": 95.25, \"max\": 132.0, \"mean\": 69.75, \"std\": 48.13436056152264}, \"pct\": {\"dtype\": \"float64\", \"count\": 4, \"missing\": 0, \"min\": 9.67741935483871, \"p25\": 12.365591397849462, \"median\": 21.50537634408602, \"p75\": 34.13978494623656, \"max\": 47.31182795698925, \"mean\": 24.999999999999996, \"std\": 17.252458982624606}}, \"group_stats\": {\"Month\": {\"May\": {\"count\": {\"min\": 27.0, \"max\": 132.0, \"mean\": 69.75, \"range\": 105.0, \"count\": 4}, \"pct\": {\"min\": 9.68, \"max\": 47.31, \"mean\": 25.0, \"range\": 37.63, \"count\": 4}}}}}], \"metadata\": {}}\n```",
  "prompt_lines": [
    "Role: You are a strict, quantitative data analyst. Your sole task is to analyze the provided snapshot of CR KPI data.",
    "Critical Directive: Your analysis MUST be based exclusively on the provided figures. You MUST NOT infer any time-based trends (e.g., improvement, decline, momentum) as this is a single point in time.",
    "",
    "Non-Negotiable Context: All insights must frame performance through the fundamental trade-off between short-term financial performance (sales, revenue) and long-term customer health (satisfaction, loyalty).",
    "**Quantification Mandate: You MUST quantify all claims. Instead of 'low' or 'high', state the actual values, ranges, and percentages. Estimate potential impact (e.g., revenue risk, churn probability) based on the magnitude of quality gaps.**",
    "",
    "Timeframe Guard: Do NOT mention or assume timeframes (e.g., 'MTD', 'YTD', 'MoM', 'YoY') unless these exact terms appear in the dataset columns or metadata. If absent, treat percentages as timeless normalized achievements and avoid any timeframe terminology.",
    "",
    "You are a senior data analyst presenting to business stakeholders. I will provide a chart dataset as JSON.",
    "Return plain markdown only (no code fences, no introductory text). Be specific, quantified, and evidence-led.",
    "Do not be vague or ambiguous: avoid generic statements; support each key claim with concrete numbers, names, and explicit comparisons from the provided data.",
    "",
    "KNOWLEDGE BASE:",
    "KPI CALCULATION FORMULAS:",
    "- MTD Actual (%): Month-to-date achievement as percentage of target",
    "  * Performance KPIs: MTD Actual / MTD Target * 100",
    "  * Insurance: MTD Actual / MTD Target = % (2 Decimal Point)",
    "  * NPS: MTD Actual / MTD Target * 100",
    "  * QPI: xQPI * (Total claim submission by outlet (Aging ≤3days)/Total claim submission by outlet) * 100",
    "- Rate: Points * Achievement (based on MTD Actual %)",
    "- Ranking: Sorted based on Rate in Descending order",
    "",
    "Outlet Categories (A/B/C/D) reflect whether an outlet meets performance (quantity) and quality (service) thresholds:",
    "- A: Performance > threshold AND Quality > threshold (top performer).",
    "- B: Performance > threshold BUT Quality < threshold (good performer but poor service).",
    "- C: Performance < threshold BUT Quality > threshold (good service, underperforming).",
    "- D: Performance < threshold AND Quality < threshold (poor performer).",
    "",
    "Categorical Hierarchy: A > B > C > D. When comparing categories, treat A as strictly better than B, B better than C, and so on.",
    "",
    "Outlet Types indicate business functions and relevant KPIs: **1S (Sales only)**, **2S (Service only)**, **1+2S/3S (Sales & Service)**.",
    "- 1S KPIs: New Car Reg, Gear Up, Insurance, POV, NPS Sales. ",
    "- 2S KPIs: Intake, Revenue, Parts, Lubricant, NPS Svc, E-Appointment, QPI.",
    "- 1+2S/3S use blended metrics from both sides.",
    "",
    "Definition of Quality vs Performance parameters (use this consistently):",
    "- Quality parameters: QPI (qpi_pct), E-Appointment (eappointment_pct), NPS Sales (nps_sales_pct), NPS Service (cs_service_pct).",
    "- All other KPI % metrics belong to Performance.",
    "",
    "Axis Thresholds by Outlet Type (for interpreting X/Y scatter parameters):",
    "### Y is performance , X is quality",
    "- 1S: Threshold X = 35, Threshold Y = 60.",
    "- 2S: Threshold X = 40, Threshold Y = 55.",
    "- 1+2S: Threshold X = 30, Threshold Y = 50.",
    "- 3S: Threshold X = 35, Threshold Y = 60.",
    "",
    "Interpreting % Achievement: 100% = target achieved; >100% = target exceeded; <100% = gap.",
    "Some KPIs (e.g., NPS, QPI) are composites or tiered scores; >100% still indicates exceeding the blended target.",
    "",
    "Outlet Type KPI Scope Rule:",
    "- 1S (Sales-only) focus KPIs: New Car Reg, Gear Up, Insurance, POV, NPS Sales. Treat service KPIs as 0/NA for 1S.",
    "- 2S (Service-only) focus KPIs: Intake, Revenue, Parts, Lubricant, NPS Svc, E-Appointment, QPI. Treat sales KPIs as 0/NA for 2S.",
    "- 1+2S/3S use blended metrics from both sides; all KPIs apply.",
    "",
    "CATEGORICAL ANALYSIS DECISION TREE (USE THIS):",
    "- If the largest group is 'A' outlets: The region is healthy. Insight = 'This region successfully balances performance and quality.'",
    "- If the largest group is 'B' outlets: The region is at risk. Insight = 'This region is prioritizing short-term sales over customer experience, which threatens long-term loyalty.' This is the most common and critical insight.",
    "- If the largest group is 'C' outlets: The region is struggling but has good service. Insight = 'This region has strong customer processes but is failing to achieve sales and volume targets.'",
    "- If the largest group is 'D' outlets: The region is in crisis. Insight = 'This region is failing across all key performance and quality indicators.'",
    "- Compare A vs. D: Always note the disparity between top and bottom performers.",
    "",
    "DATA DICTIONARY:",
    "Data Dictionary & Terminology:",
    "KPI Parameters:",
    "Performance:",
    "- Car Reg (New Car Registration): Number of new vehicles registered (primary sales volume).",
    "- Intake (Job Intake): Number of repair orders/service jobs opened (service volume).",
    "- Revenue (Service Revenue): Income from repair orders (after-sales).",
    "- Parts (Parts Sales): Revenue from spare parts sales.",
    "- Lubricant (Lubricant Sales): Quantity or revenue from engine oil/lubricants.",
    "- Gear Up (Accessory Sales): Vehicles fitted with optional accessories / accessory revenue.",
    "- Ins. T1 (Insurance Tier 1 New): Insurance policies sold for new vehicles.",
    "- Ins. Renew O/all (Insurance Renewal Overall): Renewed insurance policies for vehicles of any age.",
    "- POV (Trade-In): Perodua vehicles taken as trade-ins for new purchases.",
    "Quality:",
    "- NPS Sales: Net Promoter Score from sales surveys.",
    "- NPS Svc: Net Promoter Score from service surveys.",
    "- E-Appt (E-Appointment): Digital service appointments (Booking/Confirmed/No-Show).",
    "- QPI (Quality Performance Indicator): % of warranty claims submitted within required timeframe (≤3 days).",
    "",
    "Other Terms:",
    "- Outlet Type: 1S (Sales), 2S (Service), 1+2S (Sales & Service), 3S (Sales, Service, Spare Parts).",
    "- Outlet Category: Grade A/B/C/D based on Performance & Quality thresholds.",
    "- MTD/YTD Actual/Target: Month/Year-to-date achieved vs goal.",
    "- Threshold: Minimum acceptable level for Performance/Quality.",
    "- Weightage: Relative KPI importance by outlet type.",
    "",
    "COMPUTED STATISTICS (authoritative, precomputed from pandas):",
    "Use ONLY the computed statistics below for the 'Observation' section.",
    "Do NOT do any arithmetic yourself; treat these as exact facts.",
    "MANDATORY: Explicitly state the min and max for each numeric column. If grouped statistics are provided (by 'outlet_category' or 'outlet_type'), include the min and max per group for the primary KPIs you discuss.",
    "If both a small and large table are present for a chart (e.g., Tab 3 KPI gaps), FOCUS your Observations on the SMALL table; use the large-table statistics only as supporting context.",
    "",
    "### Computed Statistics — Outlet Category Distribution (% by Region) — May",
    "- Month: count=4 (missing=0)",
    "- category: count=4 (missing=0)",
    "- count: min=27.0, p25=34.5, median=60.0, p75=95.25, max=132.0, mean=69.75, std=48.13436056152264 (missing=0)",
    "- pct: min=9.67741935483871, p25=12.365591397849462, median=21.50537634408602, p75=34.13978494623656, max=47.31182795698925, mean=24.999999999999996, std=17.252458982624606 (missing=0)",
    "",
    "Grouped statistics by dimension:",
    "- By Month:",
    "  - May:",
    "    - count: min=27.0, max=132.0, range=105.0, mean=69.75 (n=4)",
    "    - pct: min=9.68, max=47.31, range=37.63, mean=25.0 (n=4)",
    "",
    "MONTH-AWARE DIRECTIVE:",
    "If a 'Month' column is present, you MUST compare months explicitly.",
    "- Quantify month-over-month deltas for the key KPIs you discuss (state sign and magnitude).",
    "- Identify where performance improved or declined the most by outlet_category/region/outlet_type as applicable.",
    "- Use only the provided computed statistics and grouped stats by 'Month' (if present) to support claims.",
    "- Keep comparisons concise and prioritized; avoid repeating trivial differences.",
    "Provide a structured analysis of the data based on the following format:",
    "",
    "### 1. Observation",
    "- State the most significant, factual patterns from the data.",
    "- Use short, direct bullet points.",
    "- Quantify your findings with precise numbers, ranges, or counts.",
    "  - **Example:** 'The [metric_name] for [Segment A] ranges from [X] to [Y].'",
    "  - **Example:** '[Number] of entities have a value of 0 for the [metric_name] parameter.'",
    "",
    "- Always state the explicit min and max for each numeric KPI you reference. If grouped statistics by 'outlet_category' or 'outlet_type' are provided, include the per-group min and max for the primary KPI(s).",
    "",
    "### 2. Interpretation",
    "- Explain the business or practical implications of your observations.",
    "- Identify the key drivers behind the observed patterns and the relationships between metrics.",
    "  - **Example:** 'The high performance in [Metric A] for [Segment B] appears to be negatively correlated with [Metric C], suggesting a potential trade-off.'",
    "- Quantify the potential impact, risk, or opportunity.",
    "  - **Example:** 'The cluster of [Number] entities in [Segment C] shows an average [Metric D] that is [Value/Percentage] below the target, indicating a high risk of [describe the business risk, e.g., user churn, quality failure, revenue loss].'",
    "",
    "### 3. Recommendation",
    "- Propose clear, actionable next steps based on your interpretation.",
    "- Prioritize your recommendations to guide decision-making.",
    "  - **High Priority:** Address critical issues (e.g., data integrity problems, major risks, or opportunities affecting the largest segments).",
    "  - **Medium Priority:** Focus on important optimizations or further investigations.",
    "  - **Foundation:** Suggest general best practices or foundational improvements.",
    "- Each recommendation should be directly linked to a specific, quantified observation.",
    "  - **Example:** 'Given that [Number] entities have 0 values for [metric_name], the top priority is to audit the data pipeline to correct this potential anomaly.'",
    "",
    "### Parameter Focus Coverage",
    "- Conclude with a brief summary for each key parameter analyzed.",
    "- For each parameter, provide a single bullet point with a one-sentence, numeric summary.",
    "  - **Example:** '[parameter_name]: The values range from [min] to [max], with the majority of entities clustered around [central_tendency_value].'",
    "  - **Example:** '[categorical_parameter]: The most prevalent category is '[Category_X],' accounting for [Percentage]% of the data.'",
    "JSON follows:",
    "```json",
    "{\"charts\": [{\"graph_id\": \"q2-month-May\", \"graph_label\": \"Outlet Category Distribution (% by Region) — May\", \"filters\": {\"outlet_categories\": [], \"regions\": [], \"outlet_types\": [], \"outlets\": [], \"search_text\": \"\", \"score_band\": \"All\", \"units_band\": \"All\", \"kpi_group\": \"All\", \"kpi_single\": null, \"months\": [\"May\"], \"compare_months\": false}, \"columns\": [\"Month\", \"category\", \"count\", \"pct\"], \"n_rows\": 4, \"rows\": [{\"Month\": \"May\", \"category\": \"A\", \"count\": 132, \"pct\": 47.31182795698925}, {\"Month\": \"May\", \"category\": \"B\", \"count\": 83, \"pct\": 29.749103942652326}, {\"Month\": \"May\", \"category\": \"C\", \"count\": 37, \"pct\": 13.261648745519713}, {\"Month\": \"May\", \"category\": \"D\", \"count\": 27, \"pct\": 9.67741935483871}], \"computed_stats\": {\"Month\": {\"dtype\": \"object\", \"count\": 4, \"missing\": 0, \"non_null\": 4}, \"category\": {\"dtype\": \"object\", \"count\": 4, \"missing\": 0, \"non_null\": 4}, \"count\": {\"dtype\": \"int64\", \"count\": 4, \"missing\": 0, \"min\": 27.0, \"p25\": 34.5, \"median\": 60.0, \"p75\": 95.25, \"max\": 132.0, \"mean\": 69.75, \"std\": 48.13436056152264}, \"pct\": {\"dtype\": \"float64\", \"count\": 4, \"missing\": 0, \"min\": 9.67741935483871, \"p25\": 12.365591397849462, \"median\": 21.50537634408602, \"p75\": 34.13978494623656, \"max\": 47.31182795698925, \"mean\": 24.999999999999996, \"std\": 17.252458982624606}}, \"group_stats\": {\"Month\": {\"May\": {\"count\": {\"min\": 27.0, \"max\": 132.0, \"mean\": 69.75, \"range\": 105.0, \"count\": 4}, \"pct\": {\"min\": 9.68, \"max\": 47.31, \"mean\": 25.0, \"range\": 37.63, \"count\": 4}}}}}], \"metadata\": {}}",
    "```"
  ]
}
{
  "meta": {
    "ts": "2025-09-18T03:52:39.052934Z",
    "mode": "individual-multi",
    "provider": "gemini",
    "model": "gemini-2.0-flash",
    "selected_graphs": [
      "q2"
    ],
    "graph_label": "Outlet Category Distribution (% by Region)",
    "focus_hint": ""
  },
  "metadata": {},
  "charts_meta": [],
  "prompt": "Role: You are a strict, quantitative data analyst. Your sole task is to analyze the provided snapshot of CR KPI data.\nCritical Directive: Your analysis MUST be based exclusively on the provided figures. You MUST NOT infer any time-based trends (e.g., improvement, decline, momentum) as this is a single point in time.\n\nNon-Negotiable Context: All insights must frame performance through the fundamental trade-off between short-term financial performance (sales, revenue) and long-term customer health (satisfaction, loyalty).\n**Quantification Mandate: You MUST quantify all claims. Instead of 'low' or 'high', state the actual values, ranges, and percentages. Estimate potential impact (e.g., revenue risk, churn probability) based on the magnitude of quality gaps.**\n\nTimeframe Guard: Do NOT mention or assume timeframes (e.g., 'MTD', 'YTD', 'MoM', 'YoY') unless these exact terms appear in the dataset columns or metadata. If absent, treat percentages as timeless normalized achievements and avoid any timeframe terminology.\n\nYou are a senior data analyst presenting to business stakeholders. I will provide a chart dataset as JSON.\nReturn plain markdown only (no code fences, no introductory text). Be specific, quantified, and evidence-led.\nDo not be vague or ambiguous: avoid generic statements; support each key claim with concrete numbers, names, and explicit comparisons from the provided data.\n\nKNOWLEDGE BASE:\nKPI CALCULATION FORMULAS:\n- MTD Actual (%): Month-to-date achievement as percentage of target\n  * Performance KPIs: MTD Actual / MTD Target * 100\n  * Insurance: MTD Actual / MTD Target = % (2 Decimal Point)\n  * NPS: MTD Actual / MTD Target * 100\n  * QPI: xQPI * (Total claim submission by outlet (Aging ≤3days)/Total claim submission by outlet) * 100\n- Rate: Points * Achievement (based on MTD Actual %)\n- Ranking: Sorted based on Rate in Descending order\n\nOutlet Categories (A/B/C/D) reflect whether an outlet meets performance (quantity) and quality (service) thresholds:\n- A: Performance > threshold AND Quality > threshold (top performer).\n- B: Performance > threshold BUT Quality < threshold (good performer but poor service).\n- C: Performance < threshold BUT Quality > threshold (good service, underperforming).\n- D: Performance < threshold AND Quality < threshold (poor performer).\n\nCategorical Hierarchy: A > B > C > D. When comparing categories, treat A as strictly better than B, B better than C, and so on.\n\nOutlet Types indicate business functions and relevant KPIs: **1S (Sales only)**, **2S (Service only)**, **1+2S/3S (Sales & Service)**.\n- 1S KPIs: New Car Reg, Gear Up, Insurance, POV, NPS Sales. \n- 2S KPIs: Intake, Revenue, Parts, Lubricant, NPS Svc, E-Appointment, QPI.\n- 1+2S/3S use blended metrics from both sides.\n\nDefinition of Quality vs Performance parameters (use this consistently):\n- Quality parameters: QPI (qpi_pct), E-Appointment (eappointment_pct), NPS Sales (nps_sales_pct), NPS Service (cs_service_pct).\n- All other KPI % metrics belong to Performance.\n\nAxis Thresholds by Outlet Type (for interpreting X/Y scatter parameters):\n### Y is performance , X is quality\n- 1S: Threshold X = 35, Threshold Y = 60.\n- 2S: Threshold X = 40, Threshold Y = 55.\n- 1+2S: Threshold X = 30, Threshold Y = 50.\n- 3S: Threshold X = 35, Threshold Y = 60.\n\nInterpreting % Achievement: 100% = target achieved; >100% = target exceeded; <100% = gap.\nSome KPIs (e.g., NPS, QPI) are composites or tiered scores; >100% still indicates exceeding the blended target.\n\nOutlet Type KPI Scope Rule:\n- 1S (Sales-only) focus KPIs: New Car Reg, Gear Up, Insurance, POV, NPS Sales. Treat service KPIs as 0/NA for 1S.\n- 2S (Service-only) focus KPIs: Intake, Revenue, Parts, Lubricant, NPS Svc, E-Appointment, QPI. Treat sales KPIs as 0/NA for 2S.\n- 1+2S/3S use blended metrics from both sides; all KPIs apply.\n\nCATEGORICAL ANALYSIS DECISION TREE (USE THIS):\n- If the largest group is 'A' outlets: The region is healthy. Insight = 'This region successfully balances performance and quality.'\n- If the largest group is 'B' outlets: The region is at risk. Insight = 'This region is prioritizing short-term sales over customer experience, which threatens long-term loyalty.' This is the most common and critical insight.\n- If the largest group is 'C' outlets: The region is struggling but has good service. Insight = 'This region has strong customer processes but is failing to achieve sales and volume targets.'\n- If the largest group is 'D' outlets: The region is in crisis. Insight = 'This region is failing across all key performance and quality indicators.'\n- Compare A vs. D: Always note the disparity between top and bottom performers.\n\nDATA DICTIONARY:\nData Dictionary & Terminology:\nKPI Parameters:\nPerformance:\n- Car Reg (New Car Registration): Number of new vehicles registered (primary sales volume).\n- Intake (Job Intake): Number of repair orders/service jobs opened (service volume).\n- Revenue (Service Revenue): Income from repair orders (after-sales).\n- Parts (Parts Sales): Revenue from spare parts sales.\n- Lubricant (Lubricant Sales): Quantity or revenue from engine oil/lubricants.\n- Gear Up (Accessory Sales): Vehicles fitted with optional accessories / accessory revenue.\n- Ins. T1 (Insurance Tier 1 New): Insurance policies sold for new vehicles.\n- Ins. Renew O/all (Insurance Renewal Overall): Renewed insurance policies for vehicles of any age.\n- POV (Trade-In): Perodua vehicles taken as trade-ins for new purchases.\nQuality:\n- NPS Sales: Net Promoter Score from sales surveys.\n- NPS Svc: Net Promoter Score from service surveys.\n- E-Appt (E-Appointment): Digital service appointments (Booking/Confirmed/No-Show).\n- QPI (Quality Performance Indicator): % of warranty claims submitted within required timeframe (≤3 days).\n\nOther Terms:\n- Outlet Type: 1S (Sales), 2S (Service), 1+2S (Sales & Service), 3S (Sales, Service, Spare Parts).\n- Outlet Category: Grade A/B/C/D based on Performance & Quality thresholds.\n- MTD/YTD Actual/Target: Month/Year-to-date achieved vs goal.\n- Threshold: Minimum acceptable level for Performance/Quality.\n- Weightage: Relative KPI importance by outlet type.\n\nCOMPUTED STATISTICS (authoritative, precomputed from pandas):\nUse ONLY the computed statistics below for the 'Observation' section.\nDo NOT do any arithmetic yourself; treat these as exact facts.\nMANDATORY: Explicitly state the min and max for each numeric column. If grouped statistics are provided (by 'outlet_category' or 'outlet_type'), include the min and max per group for the primary KPIs you discuss.\nIf both a small and large table are present for a chart (e.g., Tab 3 KPI gaps), FOCUS your Observations on the SMALL table; use the large-table statistics only as supporting context.\n\n### Computed Statistics — Outlet Category Distribution (% by Region)\n- rgn: count=28 (missing=0)\n- category: count=28 (missing=0)\n- count: min=0.0, p25=7.25, median=16.5, p75=33.0, max=49.0, mean=19.821428571428573, std=14.409496794947348 (missing=0)\n- pct: min=0.0, p25=12.412383177570094, median=19.004340748779164, p75=35.3173324742268, max=62.06896551724138, mean=25.0, std=16.72636707881982 (missing=0)\n\nAdditional context statistics (large table):\n- rgn: count=7 (missing=0)\n- avg_total_score: min=92.34453608247422, p25=93.72011723233317, median=94.88689655172413, p75=96.41771875, max=98.08260416666667, mean=95.08424410936162, std=2.125297688304183 (missing=0)\n- avg_rate_performance: min=57.674226804123705, p25=59.28351425438596, median=60.256551724137935, p75=62.04271320093458, max=65.53049999999999, mean=60.87339049127181, std=2.7355755141877194 (missing=0)\n- avg_rate_quality: min=31.623250000000002, p25=33.391985571405144, median=34.62965517241379, p75=34.66557023195877, max=37.1071875, mean=34.210743468448804, std=1.7335107253667839 (missing=0)\n- cat_a: min=18.0, p25=25.5, median=37.0, p75=41.0, max=49.0, mean=33.857142857142854, std=11.725024114098465 (missing=0)\n- cat_b: min=5.0, p25=18.0, median=33.0, p75=34.5, max=39.0, mean=26.0, std=13.759844960366863 (missing=0)\n- cat_c: min=0.0, p25=3.5, median=13.0, p75=15.0, max=19.0, mean=9.857142857142858, std=7.358183005529092 (missing=0)\n- cat_d: min=3.0, p25=4.5, median=9.0, p75=12.5, max=21.0, mean=9.571428571428571, std=6.373307431706682 (missing=0)\n\nMONTH-AWARE DIRECTIVE:\nIf a 'Month' column is present, you MUST compare months explicitly.\n- Quantify month-over-month deltas for the key KPIs you discuss (state sign and magnitude).\n- Identify where performance improved or declined the most by outlet_category/region/outlet_type as applicable.\n- Use only the provided computed statistics and grouped stats by 'Month' (if present) to support claims.\n- Keep comparisons concise and prioritized; avoid repeating trivial differences.\nProvide a structured analysis of the data based on the following format:\n\n### 1. Observation\n- State the most significant, factual patterns from the data.\n- Use short, direct bullet points.\n- Quantify your findings with precise numbers, ranges, or counts.\n  - **Example:** 'The [metric_name] for [Segment A] ranges from [X] to [Y].'\n  - **Example:** '[Number] of entities have a value of 0 for the [metric_name] parameter.'\n\n- Always state the explicit min and max for each numeric KPI you reference. If grouped statistics by 'outlet_category' or 'outlet_type' are provided, include the per-group min and max for the primary KPI(s).\n\n### 2. Interpretation\n- Explain the business or practical implications of your observations.\n- Identify the key drivers behind the observed patterns and the relationships between metrics.\n  - **Example:** 'The high performance in [Metric A] for [Segment B] appears to be negatively correlated with [Metric C], suggesting a potential trade-off.'\n- Quantify the potential impact, risk, or opportunity.\n  - **Example:** 'The cluster of [Number] entities in [Segment C] shows an average [Metric D] that is [Value/Percentage] below the target, indicating a high risk of [describe the business risk, e.g., user churn, quality failure, revenue loss].'\n\n### 3. Recommendation\n- Propose clear, actionable next steps based on your interpretation.\n- Prioritize your recommendations to guide decision-making.\n  - **High Priority:** Address critical issues (e.g., data integrity problems, major risks, or opportunities affecting the largest segments).\n  - **Medium Priority:** Focus on important optimizations or further investigations.\n  - **Foundation:** Suggest general best practices or foundational improvements.\n- Each recommendation should be directly linked to a specific, quantified observation.\n  - **Example:** 'Given that [Number] entities have 0 values for [metric_name], the top priority is to audit the data pipeline to correct this potential anomaly.'\n\n### Parameter Focus Coverage\n- Conclude with a brief summary for each key parameter analyzed.\n- For each parameter, provide a single bullet point with a one-sentence, numeric summary.\n  - **Example:** '[parameter_name]: The values range from [min] to [max], with the majority of entities clustered around [central_tendency_value].'\n  - **Example:** '[categorical_parameter]: The most prevalent category is '[Category_X],' accounting for [Percentage]% of the data.'\nJSON follows:\n```json\n{\"charts\": [{\"graph_id\": \"q2\", \"graph_label\": \"Outlet Category Distribution (% by Region)\", \"filters\": {\"outlet_categories\": [], \"regions\": [], \"outlet_types\": [], \"outlets\": [], \"search_text\": \"\", \"score_band\": \"All\", \"units_band\": \"All\", \"kpi_group\": \"All\", \"kpi_single\": null, \"months\": [\"March\", \"May\"], \"compare_months\": true}, \"columns\": [\"rgn\", \"category\", \"count\", \"pct\"], \"n_rows\": 28, \"rows\": [{\"rgn\": \"Central 1\", \"category\": \"A\", \"count\": 39, \"pct\": 34.21052631578947}, {\"rgn\": \"Central 2\", \"category\": \"A\", \"count\": 37, \"pct\": 38.144329896907216}, {\"rgn\": \"East Coast (Zone 1)\", \"category\": \"A\", \"count\": 19, \"pct\": 59.375}, {\"rgn\": \"East Coast (Zone 2)\", \"category\": \"A\", \"count\": 18, \"pct\": 62.06896551724138}, {\"rgn\": \"East Malaysia\", \"category\": \"A\", \"count\": 32, \"pct\": 40.0}, {\"rgn\": \"Northern\", \"category\": \"A\", \"count\": 43, \"pct\": 44.79166666666667}, {\"rgn\": \"Southern\", \"category\": \"A\", \"count\": 49, \"pct\": 45.794392523364486}, {\"rgn\": \"Central 1\", \"category\": \"B\", \"count\": 39, \"pct\": 34.21052631578947}, {\"rgn\": \"Central 2\", \"category\": \"B\", \"count\": 28, \"pct\": 28.865979381443296}, {\"rgn\": \"East Coast (Zone 1)\", \"category\": \"B\", \"count\": 5, \"pct\": 15.625}, {\"rgn\": \"East Coast (Zone 2)\", \"category\": \"B\", \"count\": 8, \"pct\": 27.586206896551722}, {\"rgn\": \"East Malaysia\", \"category\": \"B\", \"count\": 36, \"pct\": 45.0}, {\"rgn\": \"Northern\", \"category\": \"B\", \"count\": 33, \"pct\": 34.375}, {\"rgn\": \"Southern\", \"category\": \"B\", \"count\": 33, \"pct\": 30.8411214953271}, {\"rgn\": \"Central 1\", \"category\": \"C\", \"count\": 15, \"pct\": 13.157894736842104}, {\"rgn\": \"Central 2\", \"category\": \"C\", \"count\": 19, \"pct\": 19.587628865979383}, {\"rgn\": \"East Coast (Zone 1)\", \"category\": \"C\", \"count\": 4, \"pct\": 12.5}, {\"rgn\": \"East Coast (Zone 2)\", \"category\": \"C\", \"count\": 0, \"pct\": 0.0}, {\"rgn\": \"East Malaysia\", \"category\": \"C\", \"count\": 3, \"pct\": 3.75}, {\"rgn\": \"Northern\", \"category\": \"C\", \"count\": 15, \"pct\": 15.625}, {\"rgn\": \"Southern\", \"category\": \"C\", \"count\": 13, \"pct\": 12.149532710280374}, {\"rgn\": \"Central 1\", \"category\": \"D\", \"count\": 21, \"pct\": 18.421052631578945}, {\"rgn\": \"Central 2\", \"category\": \"D\", \"count\": 13, \"pct\": 13.402061855670103}, {\"rgn\": \"East Coast (Zone 1)\", \"category\": \"D\", \"count\": 4, \"pct\": 12.5}, {\"rgn\": \"East Coast (Zone 2)\", \"category\": \"D\", \"count\": 3, \"pct\": 10.344827586206897}, {\"rgn\": \"East Malaysia\", \"category\": \"D\", \"count\": 9, \"pct\": 11.25}, {\"rgn\": \"Northern\", \"category\": \"D\", \"count\": 5, \"pct\": 5.208333333333334}, {\"rgn\": \"Southern\", \"category\": \"D\", \"count\": 12, \"pct\": 11.214953271028037}], \"computed_stats\": {\"rgn\": {\"dtype\": \"object\", \"count\": 28, \"missing\": 0, \"non_null\": 28}, \"category\": {\"dtype\": \"object\", \"count\": 28, \"missing\": 0, \"non_null\": 28}, \"count\": {\"dtype\": \"int64\", \"count\": 28, \"missing\": 0, \"min\": 0.0, \"p25\": 7.25, \"median\": 16.5, \"p75\": 33.0, \"max\": 49.0, \"mean\": 19.821428571428573, \"std\": 14.409496794947348}, \"pct\": {\"dtype\": \"float64\", \"count\": 28, \"missing\": 0, \"min\": 0.0, \"p25\": 12.412383177570094, \"median\": 19.004340748779164, \"p75\": 35.3173324742268, \"max\": 62.06896551724138, \"mean\": 25.0, \"std\": 16.72636707881982}}, \"context_stats\": {\"large_computed_stats\": {\"rgn\": {\"dtype\": \"object\", \"count\": 7, \"missing\": 0, \"non_null\": 7}, \"avg_total_score\": {\"dtype\": \"float64\", \"count\": 7, \"missing\": 0, \"min\": 92.34453608247422, \"p25\": 93.72011723233317, \"median\": 94.88689655172413, \"p75\": 96.41771875, \"max\": 98.08260416666667, \"mean\": 95.08424410936162, \"std\": 2.125297688304183}, \"avg_rate_performance\": {\"dtype\": \"float64\", \"count\": 7, \"missing\": 0, \"min\": 57.674226804123705, \"p25\": 59.28351425438596, \"median\": 60.256551724137935, \"p75\": 62.04271320093458, \"max\": 65.53049999999999, \"mean\": 60.87339049127181, \"std\": 2.7355755141877194}, \"avg_rate_quality\": {\"dtype\": \"float64\", \"count\": 7, \"missing\": 0, \"min\": 31.623250000000002, \"p25\": 33.391985571405144, \"median\": 34.62965517241379, \"p75\": 34.66557023195877, \"max\": 37.1071875, \"mean\": 34.210743468448804, \"std\": 1.7335107253667839}, \"cat_a\": {\"dtype\": \"int64\", \"count\": 7, \"missing\": 0, \"min\": 18.0, \"p25\": 25.5, \"median\": 37.0, \"p75\": 41.0, \"max\": 49.0, \"mean\": 33.857142857142854, \"std\": 11.725024114098465}, \"cat_b\": {\"dtype\": \"int64\", \"count\": 7, \"missing\": 0, \"min\": 5.0, \"p25\": 18.0, \"median\": 33.0, \"p75\": 34.5, \"max\": 39.0, \"mean\": 26.0, \"std\": 13.759844960366863}, \"cat_c\": {\"dtype\": \"int64\", \"count\": 7, \"missing\": 0, \"min\": 0.0, \"p25\": 3.5, \"median\": 13.0, \"p75\": 15.0, \"max\": 19.0, \"mean\": 9.857142857142858, \"std\": 7.358183005529092}, \"cat_d\": {\"dtype\": \"int64\", \"count\": 7, \"missing\": 0, \"min\": 3.0, \"p25\": 4.5, \"median\": 9.0, \"p75\": 12.5, \"max\": 21.0, \"mean\": 9.571428571428571, \"std\": 6.373307431706682}}, \"large_group_stats\": {}}}], \"metadata\": {}}\n```",
  "prompt_lines": [
    "Role: You are a strict, quantitative data analyst. Your sole task is to analyze the provided snapshot of CR KPI data.",
    "Critical Directive: Your analysis MUST be based exclusively on the provided figures. You MUST NOT infer any time-based trends (e.g., improvement, decline, momentum) as this is a single point in time.",
    "",
    "Non-Negotiable Context: All insights must frame performance through the fundamental trade-off between short-term financial performance (sales, revenue) and long-term customer health (satisfaction, loyalty).",
    "**Quantification Mandate: You MUST quantify all claims. Instead of 'low' or 'high', state the actual values, ranges, and percentages. Estimate potential impact (e.g., revenue risk, churn probability) based on the magnitude of quality gaps.**",
    "",
    "Timeframe Guard: Do NOT mention or assume timeframes (e.g., 'MTD', 'YTD', 'MoM', 'YoY') unless these exact terms appear in the dataset columns or metadata. If absent, treat percentages as timeless normalized achievements and avoid any timeframe terminology.",
    "",
    "You are a senior data analyst presenting to business stakeholders. I will provide a chart dataset as JSON.",
    "Return plain markdown only (no code fences, no introductory text). Be specific, quantified, and evidence-led.",
    "Do not be vague or ambiguous: avoid generic statements; support each key claim with concrete numbers, names, and explicit comparisons from the provided data.",
    "",
    "KNOWLEDGE BASE:",
    "KPI CALCULATION FORMULAS:",
    "- MTD Actual (%): Month-to-date achievement as percentage of target",
    "  * Performance KPIs: MTD Actual / MTD Target * 100",
    "  * Insurance: MTD Actual / MTD Target = % (2 Decimal Point)",
    "  * NPS: MTD Actual / MTD Target * 100",
    "  * QPI: xQPI * (Total claim submission by outlet (Aging ≤3days)/Total claim submission by outlet) * 100",
    "- Rate: Points * Achievement (based on MTD Actual %)",
    "- Ranking: Sorted based on Rate in Descending order",
    "",
    "Outlet Categories (A/B/C/D) reflect whether an outlet meets performance (quantity) and quality (service) thresholds:",
    "- A: Performance > threshold AND Quality > threshold (top performer).",
    "- B: Performance > threshold BUT Quality < threshold (good performer but poor service).",
    "- C: Performance < threshold BUT Quality > threshold (good service, underperforming).",
    "- D: Performance < threshold AND Quality < threshold (poor performer).",
    "",
    "Categorical Hierarchy: A > B > C > D. When comparing categories, treat A as strictly better than B, B better than C, and so on.",
    "",
    "Outlet Types indicate business functions and relevant KPIs: **1S (Sales only)**, **2S (Service only)**, **1+2S/3S (Sales & Service)**.",
    "- 1S KPIs: New Car Reg, Gear Up, Insurance, POV, NPS Sales. ",
    "- 2S KPIs: Intake, Revenue, Parts, Lubricant, NPS Svc, E-Appointment, QPI.",
    "- 1+2S/3S use blended metrics from both sides.",
    "",
    "Definition of Quality vs Performance parameters (use this consistently):",
    "- Quality parameters: QPI (qpi_pct), E-Appointment (eappointment_pct), NPS Sales (nps_sales_pct), NPS Service (cs_service_pct).",
    "- All other KPI % metrics belong to Performance.",
    "",
    "Axis Thresholds by Outlet Type (for interpreting X/Y scatter parameters):",
    "### Y is performance , X is quality",
    "- 1S: Threshold X = 35, Threshold Y = 60.",
    "- 2S: Threshold X = 40, Threshold Y = 55.",
    "- 1+2S: Threshold X = 30, Threshold Y = 50.",
    "- 3S: Threshold X = 35, Threshold Y = 60.",
    "",
    "Interpreting % Achievement: 100% = target achieved; >100% = target exceeded; <100% = gap.",
    "Some KPIs (e.g., NPS, QPI) are composites or tiered scores; >100% still indicates exceeding the blended target.",
    "",
    "Outlet Type KPI Scope Rule:",
    "- 1S (Sales-only) focus KPIs: New Car Reg, Gear Up, Insurance, POV, NPS Sales. Treat service KPIs as 0/NA for 1S.",
    "- 2S (Service-only) focus KPIs: Intake, Revenue, Parts, Lubricant, NPS Svc, E-Appointment, QPI. Treat sales KPIs as 0/NA for 2S.",
    "- 1+2S/3S use blended metrics from both sides; all KPIs apply.",
    "",
    "CATEGORICAL ANALYSIS DECISION TREE (USE THIS):",
    "- If the largest group is 'A' outlets: The region is healthy. Insight = 'This region successfully balances performance and quality.'",
    "- If the largest group is 'B' outlets: The region is at risk. Insight = 'This region is prioritizing short-term sales over customer experience, which threatens long-term loyalty.' This is the most common and critical insight.",
    "- If the largest group is 'C' outlets: The region is struggling but has good service. Insight = 'This region has strong customer processes but is failing to achieve sales and volume targets.'",
    "- If the largest group is 'D' outlets: The region is in crisis. Insight = 'This region is failing across all key performance and quality indicators.'",
    "- Compare A vs. D: Always note the disparity between top and bottom performers.",
    "",
    "DATA DICTIONARY:",
    "Data Dictionary & Terminology:",
    "KPI Parameters:",
    "Performance:",
    "- Car Reg (New Car Registration): Number of new vehicles registered (primary sales volume).",
    "- Intake (Job Intake): Number of repair orders/service jobs opened (service volume).",
    "- Revenue (Service Revenue): Income from repair orders (after-sales).",
    "- Parts (Parts Sales): Revenue from spare parts sales.",
    "- Lubricant (Lubricant Sales): Quantity or revenue from engine oil/lubricants.",
    "- Gear Up (Accessory Sales): Vehicles fitted with optional accessories / accessory revenue.",
    "- Ins. T1 (Insurance Tier 1 New): Insurance policies sold for new vehicles.",
    "- Ins. Renew O/all (Insurance Renewal Overall): Renewed insurance policies for vehicles of any age.",
    "- POV (Trade-In): Perodua vehicles taken as trade-ins for new purchases.",
    "Quality:",
    "- NPS Sales: Net Promoter Score from sales surveys.",
    "- NPS Svc: Net Promoter Score from service surveys.",
    "- E-Appt (E-Appointment): Digital service appointments (Booking/Confirmed/No-Show).",
    "- QPI (Quality Performance Indicator): % of warranty claims submitted within required timeframe (≤3 days).",
    "",
    "Other Terms:",
    "- Outlet Type: 1S (Sales), 2S (Service), 1+2S (Sales & Service), 3S (Sales, Service, Spare Parts).",
    "- Outlet Category: Grade A/B/C/D based on Performance & Quality thresholds.",
    "- MTD/YTD Actual/Target: Month/Year-to-date achieved vs goal.",
    "- Threshold: Minimum acceptable level for Performance/Quality.",
    "- Weightage: Relative KPI importance by outlet type.",
    "",
    "COMPUTED STATISTICS (authoritative, precomputed from pandas):",
    "Use ONLY the computed statistics below for the 'Observation' section.",
    "Do NOT do any arithmetic yourself; treat these as exact facts.",
    "MANDATORY: Explicitly state the min and max for each numeric column. If grouped statistics are provided (by 'outlet_category' or 'outlet_type'), include the min and max per group for the primary KPIs you discuss.",
    "If both a small and large table are present for a chart (e.g., Tab 3 KPI gaps), FOCUS your Observations on the SMALL table; use the large-table statistics only as supporting context.",
    "",
    "### Computed Statistics — Outlet Category Distribution (% by Region)",
    "- rgn: count=28 (missing=0)",
    "- category: count=28 (missing=0)",
    "- count: min=0.0, p25=7.25, median=16.5, p75=33.0, max=49.0, mean=19.821428571428573, std=14.409496794947348 (missing=0)",
    "- pct: min=0.0, p25=12.412383177570094, median=19.004340748779164, p75=35.3173324742268, max=62.06896551724138, mean=25.0, std=16.72636707881982 (missing=0)",
    "",
    "Additional context statistics (large table):",
    "- rgn: count=7 (missing=0)",
    "- avg_total_score: min=92.34453608247422, p25=93.72011723233317, median=94.88689655172413, p75=96.41771875, max=98.08260416666667, mean=95.08424410936162, std=2.125297688304183 (missing=0)",
    "- avg_rate_performance: min=57.674226804123705, p25=59.28351425438596, median=60.256551724137935, p75=62.04271320093458, max=65.53049999999999, mean=60.87339049127181, std=2.7355755141877194 (missing=0)",
    "- avg_rate_quality: min=31.623250000000002, p25=33.391985571405144, median=34.62965517241379, p75=34.66557023195877, max=37.1071875, mean=34.210743468448804, std=1.7335107253667839 (missing=0)",
    "- cat_a: min=18.0, p25=25.5, median=37.0, p75=41.0, max=49.0, mean=33.857142857142854, std=11.725024114098465 (missing=0)",
    "- cat_b: min=5.0, p25=18.0, median=33.0, p75=34.5, max=39.0, mean=26.0, std=13.759844960366863 (missing=0)",
    "- cat_c: min=0.0, p25=3.5, median=13.0, p75=15.0, max=19.0, mean=9.857142857142858, std=7.358183005529092 (missing=0)",
    "- cat_d: min=3.0, p25=4.5, median=9.0, p75=12.5, max=21.0, mean=9.571428571428571, std=6.373307431706682 (missing=0)",
    "",
    "MONTH-AWARE DIRECTIVE:",
    "If a 'Month' column is present, you MUST compare months explicitly.",
    "- Quantify month-over-month deltas for the key KPIs you discuss (state sign and magnitude).",
    "- Identify where performance improved or declined the most by outlet_category/region/outlet_type as applicable.",
    "- Use only the provided computed statistics and grouped stats by 'Month' (if present) to support claims.",
    "- Keep comparisons concise and prioritized; avoid repeating trivial differences.",
    "Provide a structured analysis of the data based on the following format:",
    "",
    "### 1. Observation",
    "- State the most significant, factual patterns from the data.",
    "- Use short, direct bullet points.",
    "- Quantify your findings with precise numbers, ranges, or counts.",
    "  - **Example:** 'The [metric_name] for [Segment A] ranges from [X] to [Y].'",
    "  - **Example:** '[Number] of entities have a value of 0 for the [metric_name] parameter.'",
    "",
    "- Always state the explicit min and max for each numeric KPI you reference. If grouped statistics by 'outlet_category' or 'outlet_type' are provided, include the per-group min and max for the primary KPI(s).",
    "",
    "### 2. Interpretation",
    "- Explain the business or practical implications of your observations.",
    "- Identify the key drivers behind the observed patterns and the relationships between metrics.",
    "  - **Example:** 'The high performance in [Metric A] for [Segment B] appears to be negatively correlated with [Metric C], suggesting a potential trade-off.'",
    "- Quantify the potential impact, risk, or opportunity.",
    "  - **Example:** 'The cluster of [Number] entities in [Segment C] shows an average [Metric D] that is [Value/Percentage] below the target, indicating a high risk of [describe the business risk, e.g., user churn, quality failure, revenue loss].'",
    "",
    "### 3. Recommendation",
    "- Propose clear, actionable next steps based on your interpretation.",
    "- Prioritize your recommendations to guide decision-making.",
    "  - **High Priority:** Address critical issues (e.g., data integrity problems, major risks, or opportunities affecting the largest segments).",
    "  - **Medium Priority:** Focus on important optimizations or further investigations.",
    "  - **Foundation:** Suggest general best practices or foundational improvements.",
    "- Each recommendation should be directly linked to a specific, quantified observation.",
    "  - **Example:** 'Given that [Number] entities have 0 values for [metric_name], the top priority is to audit the data pipeline to correct this potential anomaly.'",
    "",
    "### Parameter Focus Coverage",
    "- Conclude with a brief summary for each key parameter analyzed.",
    "- For each parameter, provide a single bullet point with a one-sentence, numeric summary.",
    "  - **Example:** '[parameter_name]: The values range from [min] to [max], with the majority of entities clustered around [central_tendency_value].'",
    "  - **Example:** '[categorical_parameter]: The most prevalent category is '[Category_X],' accounting for [Percentage]% of the data.'",
    "JSON follows:",
    "```json",
    "{\"charts\": [{\"graph_id\": \"q2\", \"graph_label\": \"Outlet Category Distribution (% by Region)\", \"filters\": {\"outlet_categories\": [], \"regions\": [], \"outlet_types\": [], \"outlets\": [], \"search_text\": \"\", \"score_band\": \"All\", \"units_band\": \"All\", \"kpi_group\": \"All\", \"kpi_single\": null, \"months\": [\"March\", \"May\"], \"compare_months\": true}, \"columns\": [\"rgn\", \"category\", \"count\", \"pct\"], \"n_rows\": 28, \"rows\": [{\"rgn\": \"Central 1\", \"category\": \"A\", \"count\": 39, \"pct\": 34.21052631578947}, {\"rgn\": \"Central 2\", \"category\": \"A\", \"count\": 37, \"pct\": 38.144329896907216}, {\"rgn\": \"East Coast (Zone 1)\", \"category\": \"A\", \"count\": 19, \"pct\": 59.375}, {\"rgn\": \"East Coast (Zone 2)\", \"category\": \"A\", \"count\": 18, \"pct\": 62.06896551724138}, {\"rgn\": \"East Malaysia\", \"category\": \"A\", \"count\": 32, \"pct\": 40.0}, {\"rgn\": \"Northern\", \"category\": \"A\", \"count\": 43, \"pct\": 44.79166666666667}, {\"rgn\": \"Southern\", \"category\": \"A\", \"count\": 49, \"pct\": 45.794392523364486}, {\"rgn\": \"Central 1\", \"category\": \"B\", \"count\": 39, \"pct\": 34.21052631578947}, {\"rgn\": \"Central 2\", \"category\": \"B\", \"count\": 28, \"pct\": 28.865979381443296}, {\"rgn\": \"East Coast (Zone 1)\", \"category\": \"B\", \"count\": 5, \"pct\": 15.625}, {\"rgn\": \"East Coast (Zone 2)\", \"category\": \"B\", \"count\": 8, \"pct\": 27.586206896551722}, {\"rgn\": \"East Malaysia\", \"category\": \"B\", \"count\": 36, \"pct\": 45.0}, {\"rgn\": \"Northern\", \"category\": \"B\", \"count\": 33, \"pct\": 34.375}, {\"rgn\": \"Southern\", \"category\": \"B\", \"count\": 33, \"pct\": 30.8411214953271}, {\"rgn\": \"Central 1\", \"category\": \"C\", \"count\": 15, \"pct\": 13.157894736842104}, {\"rgn\": \"Central 2\", \"category\": \"C\", \"count\": 19, \"pct\": 19.587628865979383}, {\"rgn\": \"East Coast (Zone 1)\", \"category\": \"C\", \"count\": 4, \"pct\": 12.5}, {\"rgn\": \"East Coast (Zone 2)\", \"category\": \"C\", \"count\": 0, \"pct\": 0.0}, {\"rgn\": \"East Malaysia\", \"category\": \"C\", \"count\": 3, \"pct\": 3.75}, {\"rgn\": \"Northern\", \"category\": \"C\", \"count\": 15, \"pct\": 15.625}, {\"rgn\": \"Southern\", \"category\": \"C\", \"count\": 13, \"pct\": 12.149532710280374}, {\"rgn\": \"Central 1\", \"category\": \"D\", \"count\": 21, \"pct\": 18.421052631578945}, {\"rgn\": \"Central 2\", \"category\": \"D\", \"count\": 13, \"pct\": 13.402061855670103}, {\"rgn\": \"East Coast (Zone 1)\", \"category\": \"D\", \"count\": 4, \"pct\": 12.5}, {\"rgn\": \"East Coast (Zone 2)\", \"category\": \"D\", \"count\": 3, \"pct\": 10.344827586206897}, {\"rgn\": \"East Malaysia\", \"category\": \"D\", \"count\": 9, \"pct\": 11.25}, {\"rgn\": \"Northern\", \"category\": \"D\", \"count\": 5, \"pct\": 5.208333333333334}, {\"rgn\": \"Southern\", \"category\": \"D\", \"count\": 12, \"pct\": 11.214953271028037}], \"computed_stats\": {\"rgn\": {\"dtype\": \"object\", \"count\": 28, \"missing\": 0, \"non_null\": 28}, \"category\": {\"dtype\": \"object\", \"count\": 28, \"missing\": 0, \"non_null\": 28}, \"count\": {\"dtype\": \"int64\", \"count\": 28, \"missing\": 0, \"min\": 0.0, \"p25\": 7.25, \"median\": 16.5, \"p75\": 33.0, \"max\": 49.0, \"mean\": 19.821428571428573, \"std\": 14.409496794947348}, \"pct\": {\"dtype\": \"float64\", \"count\": 28, \"missing\": 0, \"min\": 0.0, \"p25\": 12.412383177570094, \"median\": 19.004340748779164, \"p75\": 35.3173324742268, \"max\": 62.06896551724138, \"mean\": 25.0, \"std\": 16.72636707881982}}, \"context_stats\": {\"large_computed_stats\": {\"rgn\": {\"dtype\": \"object\", \"count\": 7, \"missing\": 0, \"non_null\": 7}, \"avg_total_score\": {\"dtype\": \"float64\", \"count\": 7, \"missing\": 0, \"min\": 92.34453608247422, \"p25\": 93.72011723233317, \"median\": 94.88689655172413, \"p75\": 96.41771875, \"max\": 98.08260416666667, \"mean\": 95.08424410936162, \"std\": 2.125297688304183}, \"avg_rate_performance\": {\"dtype\": \"float64\", \"count\": 7, \"missing\": 0, \"min\": 57.674226804123705, \"p25\": 59.28351425438596, \"median\": 60.256551724137935, \"p75\": 62.04271320093458, \"max\": 65.53049999999999, \"mean\": 60.87339049127181, \"std\": 2.7355755141877194}, \"avg_rate_quality\": {\"dtype\": \"float64\", \"count\": 7, \"missing\": 0, \"min\": 31.623250000000002, \"p25\": 33.391985571405144, \"median\": 34.62965517241379, \"p75\": 34.66557023195877, \"max\": 37.1071875, \"mean\": 34.210743468448804, \"std\": 1.7335107253667839}, \"cat_a\": {\"dtype\": \"int64\", \"count\": 7, \"missing\": 0, \"min\": 18.0, \"p25\": 25.5, \"median\": 37.0, \"p75\": 41.0, \"max\": 49.0, \"mean\": 33.857142857142854, \"std\": 11.725024114098465}, \"cat_b\": {\"dtype\": \"int64\", \"count\": 7, \"missing\": 0, \"min\": 5.0, \"p25\": 18.0, \"median\": 33.0, \"p75\": 34.5, \"max\": 39.0, \"mean\": 26.0, \"std\": 13.759844960366863}, \"cat_c\": {\"dtype\": \"int64\", \"count\": 7, \"missing\": 0, \"min\": 0.0, \"p25\": 3.5, \"median\": 13.0, \"p75\": 15.0, \"max\": 19.0, \"mean\": 9.857142857142858, \"std\": 7.358183005529092}, \"cat_d\": {\"dtype\": \"int64\", \"count\": 7, \"missing\": 0, \"min\": 3.0, \"p25\": 4.5, \"median\": 9.0, \"p75\": 12.5, \"max\": 21.0, \"mean\": 9.571428571428571, \"std\": 6.373307431706682}}, \"large_group_stats\": {}}}], \"metadata\": {}}",
    "```"
  ]
}
{
  "meta": {
    "ts": "2025-09-18T03:52:46.435392Z",
    "mode": "individual-multi",
    "provider": "gemini",
    "model": "gemini-2.0-flash",
    "selected_graphs": [
      "q2-month-March"
    ],
    "graph_label": "Outlet Category Distribution (% by Region) — March",
    "focus_hint": ""
  },
  "metadata": {},
  "charts_meta": [],
  "prompt": "Role: You are a strict, quantitative data analyst. Your sole task is to analyze the provided snapshot of CR KPI data.\nCritical Directive: Your analysis MUST be based exclusively on the provided figures. You MUST NOT infer any time-based trends (e.g., improvement, decline, momentum) as this is a single point in time.\n\nNon-Negotiable Context: All insights must frame performance through the fundamental trade-off between short-term financial performance (sales, revenue) and long-term customer health (satisfaction, loyalty).\n**Quantification Mandate: You MUST quantify all claims. Instead of 'low' or 'high', state the actual values, ranges, and percentages. Estimate potential impact (e.g., revenue risk, churn probability) based on the magnitude of quality gaps.**\n\nTimeframe Guard: Do NOT mention or assume timeframes (e.g., 'MTD', 'YTD', 'MoM', 'YoY') unless these exact terms appear in the dataset columns or metadata. If absent, treat percentages as timeless normalized achievements and avoid any timeframe terminology.\n\nYou are a senior data analyst presenting to business stakeholders. I will provide a chart dataset as JSON.\nReturn plain markdown only (no code fences, no introductory text). Be specific, quantified, and evidence-led.\nDo not be vague or ambiguous: avoid generic statements; support each key claim with concrete numbers, names, and explicit comparisons from the provided data.\n\nKNOWLEDGE BASE:\nKPI CALCULATION FORMULAS:\n- MTD Actual (%): Month-to-date achievement as percentage of target\n  * Performance KPIs: MTD Actual / MTD Target * 100\n  * Insurance: MTD Actual / MTD Target = % (2 Decimal Point)\n  * NPS: MTD Actual / MTD Target * 100\n  * QPI: xQPI * (Total claim submission by outlet (Aging ≤3days)/Total claim submission by outlet) * 100\n- Rate: Points * Achievement (based on MTD Actual %)\n- Ranking: Sorted based on Rate in Descending order\n\nOutlet Categories (A/B/C/D) reflect whether an outlet meets performance (quantity) and quality (service) thresholds:\n- A: Performance > threshold AND Quality > threshold (top performer).\n- B: Performance > threshold BUT Quality < threshold (good performer but poor service).\n- C: Performance < threshold BUT Quality > threshold (good service, underperforming).\n- D: Performance < threshold AND Quality < threshold (poor performer).\n\nCategorical Hierarchy: A > B > C > D. When comparing categories, treat A as strictly better than B, B better than C, and so on.\n\nOutlet Types indicate business functions and relevant KPIs: **1S (Sales only)**, **2S (Service only)**, **1+2S/3S (Sales & Service)**.\n- 1S KPIs: New Car Reg, Gear Up, Insurance, POV, NPS Sales. \n- 2S KPIs: Intake, Revenue, Parts, Lubricant, NPS Svc, E-Appointment, QPI.\n- 1+2S/3S use blended metrics from both sides.\n\nDefinition of Quality vs Performance parameters (use this consistently):\n- Quality parameters: QPI (qpi_pct), E-Appointment (eappointment_pct), NPS Sales (nps_sales_pct), NPS Service (cs_service_pct).\n- All other KPI % metrics belong to Performance.\n\nAxis Thresholds by Outlet Type (for interpreting X/Y scatter parameters):\n### Y is performance , X is quality\n- 1S: Threshold X = 35, Threshold Y = 60.\n- 2S: Threshold X = 40, Threshold Y = 55.\n- 1+2S: Threshold X = 30, Threshold Y = 50.\n- 3S: Threshold X = 35, Threshold Y = 60.\n\nInterpreting % Achievement: 100% = target achieved; >100% = target exceeded; <100% = gap.\nSome KPIs (e.g., NPS, QPI) are composites or tiered scores; >100% still indicates exceeding the blended target.\n\nOutlet Type KPI Scope Rule:\n- 1S (Sales-only) focus KPIs: New Car Reg, Gear Up, Insurance, POV, NPS Sales. Treat service KPIs as 0/NA for 1S.\n- 2S (Service-only) focus KPIs: Intake, Revenue, Parts, Lubricant, NPS Svc, E-Appointment, QPI. Treat sales KPIs as 0/NA for 2S.\n- 1+2S/3S use blended metrics from both sides; all KPIs apply.\n\nCATEGORICAL ANALYSIS DECISION TREE (USE THIS):\n- If the largest group is 'A' outlets: The region is healthy. Insight = 'This region successfully balances performance and quality.'\n- If the largest group is 'B' outlets: The region is at risk. Insight = 'This region is prioritizing short-term sales over customer experience, which threatens long-term loyalty.' This is the most common and critical insight.\n- If the largest group is 'C' outlets: The region is struggling but has good service. Insight = 'This region has strong customer processes but is failing to achieve sales and volume targets.'\n- If the largest group is 'D' outlets: The region is in crisis. Insight = 'This region is failing across all key performance and quality indicators.'\n- Compare A vs. D: Always note the disparity between top and bottom performers.\n\nDATA DICTIONARY:\nData Dictionary & Terminology:\nKPI Parameters:\nPerformance:\n- Car Reg (New Car Registration): Number of new vehicles registered (primary sales volume).\n- Intake (Job Intake): Number of repair orders/service jobs opened (service volume).\n- Revenue (Service Revenue): Income from repair orders (after-sales).\n- Parts (Parts Sales): Revenue from spare parts sales.\n- Lubricant (Lubricant Sales): Quantity or revenue from engine oil/lubricants.\n- Gear Up (Accessory Sales): Vehicles fitted with optional accessories / accessory revenue.\n- Ins. T1 (Insurance Tier 1 New): Insurance policies sold for new vehicles.\n- Ins. Renew O/all (Insurance Renewal Overall): Renewed insurance policies for vehicles of any age.\n- POV (Trade-In): Perodua vehicles taken as trade-ins for new purchases.\nQuality:\n- NPS Sales: Net Promoter Score from sales surveys.\n- NPS Svc: Net Promoter Score from service surveys.\n- E-Appt (E-Appointment): Digital service appointments (Booking/Confirmed/No-Show).\n- QPI (Quality Performance Indicator): % of warranty claims submitted within required timeframe (≤3 days).\n\nOther Terms:\n- Outlet Type: 1S (Sales), 2S (Service), 1+2S (Sales & Service), 3S (Sales, Service, Spare Parts).\n- Outlet Category: Grade A/B/C/D based on Performance & Quality thresholds.\n- MTD/YTD Actual/Target: Month/Year-to-date achieved vs goal.\n- Threshold: Minimum acceptable level for Performance/Quality.\n- Weightage: Relative KPI importance by outlet type.\n\nCOMPUTED STATISTICS (authoritative, precomputed from pandas):\nUse ONLY the computed statistics below for the 'Observation' section.\nDo NOT do any arithmetic yourself; treat these as exact facts.\nMANDATORY: Explicitly state the min and max for each numeric column. If grouped statistics are provided (by 'outlet_category' or 'outlet_type'), include the min and max per group for the primary KPIs you discuss.\nIf both a small and large table are present for a chart (e.g., Tab 3 KPI gaps), FOCUS your Observations on the SMALL table; use the large-table statistics only as supporting context.\n\n### Computed Statistics — Outlet Category Distribution (% by Region) — March\n- Month: count=4 (missing=0)\n- category: count=4 (missing=0)\n- count: min=32.0, p25=38.0, median=69.5, p75=100.5, max=105.0, mean=69.0, std=38.32318706301274 (missing=0)\n- pct: min=11.594202898550725, p25=13.768115942028986, median=25.181159420289855, p75=36.413043478260875, max=38.04347826086957, mean=25.0, std=13.885212703990122 (missing=0)\n\nGrouped statistics by dimension:\n- By Month:\n  - March:\n    - count: min=32.0, max=105.0, range=73.0, mean=69.0 (n=4)\n    - pct: min=11.59, max=38.04, range=26.45, mean=25.0 (n=4)\n\nMONTH-AWARE DIRECTIVE:\nIf a 'Month' column is present, you MUST compare months explicitly.\n- Quantify month-over-month deltas for the key KPIs you discuss (state sign and magnitude).\n- Identify where performance improved or declined the most by outlet_category/region/outlet_type as applicable.\n- Use only the provided computed statistics and grouped stats by 'Month' (if present) to support claims.\n- Keep comparisons concise and prioritized; avoid repeating trivial differences.\nProvide a structured analysis of the data based on the following format:\n\n### 1. Observation\n- State the most significant, factual patterns from the data.\n- Use short, direct bullet points.\n- Quantify your findings with precise numbers, ranges, or counts.\n  - **Example:** 'The [metric_name] for [Segment A] ranges from [X] to [Y].'\n  - **Example:** '[Number] of entities have a value of 0 for the [metric_name] parameter.'\n\n- Always state the explicit min and max for each numeric KPI you reference. If grouped statistics by 'outlet_category' or 'outlet_type' are provided, include the per-group min and max for the primary KPI(s).\n\n### 2. Interpretation\n- Explain the business or practical implications of your observations.\n- Identify the key drivers behind the observed patterns and the relationships between metrics.\n  - **Example:** 'The high performance in [Metric A] for [Segment B] appears to be negatively correlated with [Metric C], suggesting a potential trade-off.'\n- Quantify the potential impact, risk, or opportunity.\n  - **Example:** 'The cluster of [Number] entities in [Segment C] shows an average [Metric D] that is [Value/Percentage] below the target, indicating a high risk of [describe the business risk, e.g., user churn, quality failure, revenue loss].'\n\n### 3. Recommendation\n- Propose clear, actionable next steps based on your interpretation.\n- Prioritize your recommendations to guide decision-making.\n  - **High Priority:** Address critical issues (e.g., data integrity problems, major risks, or opportunities affecting the largest segments).\n  - **Medium Priority:** Focus on important optimizations or further investigations.\n  - **Foundation:** Suggest general best practices or foundational improvements.\n- Each recommendation should be directly linked to a specific, quantified observation.\n  - **Example:** 'Given that [Number] entities have 0 values for [metric_name], the top priority is to audit the data pipeline to correct this potential anomaly.'\n\n### Parameter Focus Coverage\n- Conclude with a brief summary for each key parameter analyzed.\n- For each parameter, provide a single bullet point with a one-sentence, numeric summary.\n  - **Example:** '[parameter_name]: The values range from [min] to [max], with the majority of entities clustered around [central_tendency_value].'\n  - **Example:** '[categorical_parameter]: The most prevalent category is '[Category_X],' accounting for [Percentage]% of the data.'\nJSON follows:\n```json\n{\"charts\": [{\"graph_id\": \"q2-month-March\", \"graph_label\": \"Outlet Category Distribution (% by Region) — March\", \"filters\": {\"outlet_categories\": [], \"regions\": [], \"outlet_types\": [], \"outlets\": [], \"search_text\": \"\", \"score_band\": \"All\", \"units_band\": \"All\", \"kpi_group\": \"All\", \"kpi_single\": null, \"months\": [\"March\"], \"compare_months\": true}, \"columns\": [\"Month\", \"category\", \"count\", \"pct\"], \"n_rows\": 4, \"rows\": [{\"Month\": \"March\", \"category\": \"A\", \"count\": 105, \"pct\": 38.04347826086957}, {\"Month\": \"March\", \"category\": \"B\", \"count\": 99, \"pct\": 35.869565217391305}, {\"Month\": \"March\", \"category\": \"C\", \"count\": 32, \"pct\": 11.594202898550725}, {\"Month\": \"March\", \"category\": \"D\", \"count\": 40, \"pct\": 14.492753623188406}], \"computed_stats\": {\"Month\": {\"dtype\": \"object\", \"count\": 4, \"missing\": 0, \"non_null\": 4}, \"category\": {\"dtype\": \"object\", \"count\": 4, \"missing\": 0, \"non_null\": 4}, \"count\": {\"dtype\": \"int64\", \"count\": 4, \"missing\": 0, \"min\": 32.0, \"p25\": 38.0, \"median\": 69.5, \"p75\": 100.5, \"max\": 105.0, \"mean\": 69.0, \"std\": 38.32318706301274}, \"pct\": {\"dtype\": \"float64\", \"count\": 4, \"missing\": 0, \"min\": 11.594202898550725, \"p25\": 13.768115942028986, \"median\": 25.181159420289855, \"p75\": 36.413043478260875, \"max\": 38.04347826086957, \"mean\": 25.0, \"std\": 13.885212703990122}}, \"group_stats\": {\"Month\": {\"March\": {\"count\": {\"min\": 32.0, \"max\": 105.0, \"mean\": 69.0, \"range\": 73.0, \"count\": 4}, \"pct\": {\"min\": 11.59, \"max\": 38.04, \"mean\": 25.0, \"range\": 26.45, \"count\": 4}}}}}], \"metadata\": {}}\n```",
  "prompt_lines": [
    "Role: You are a strict, quantitative data analyst. Your sole task is to analyze the provided snapshot of CR KPI data.",
    "Critical Directive: Your analysis MUST be based exclusively on the provided figures. You MUST NOT infer any time-based trends (e.g., improvement, decline, momentum) as this is a single point in time.",
    "",
    "Non-Negotiable Context: All insights must frame performance through the fundamental trade-off between short-term financial performance (sales, revenue) and long-term customer health (satisfaction, loyalty).",
    "**Quantification Mandate: You MUST quantify all claims. Instead of 'low' or 'high', state the actual values, ranges, and percentages. Estimate potential impact (e.g., revenue risk, churn probability) based on the magnitude of quality gaps.**",
    "",
    "Timeframe Guard: Do NOT mention or assume timeframes (e.g., 'MTD', 'YTD', 'MoM', 'YoY') unless these exact terms appear in the dataset columns or metadata. If absent, treat percentages as timeless normalized achievements and avoid any timeframe terminology.",
    "",
    "You are a senior data analyst presenting to business stakeholders. I will provide a chart dataset as JSON.",
    "Return plain markdown only (no code fences, no introductory text). Be specific, quantified, and evidence-led.",
    "Do not be vague or ambiguous: avoid generic statements; support each key claim with concrete numbers, names, and explicit comparisons from the provided data.",
    "",
    "KNOWLEDGE BASE:",
    "KPI CALCULATION FORMULAS:",
    "- MTD Actual (%): Month-to-date achievement as percentage of target",
    "  * Performance KPIs: MTD Actual / MTD Target * 100",
    "  * Insurance: MTD Actual / MTD Target = % (2 Decimal Point)",
    "  * NPS: MTD Actual / MTD Target * 100",
    "  * QPI: xQPI * (Total claim submission by outlet (Aging ≤3days)/Total claim submission by outlet) * 100",
    "- Rate: Points * Achievement (based on MTD Actual %)",
    "- Ranking: Sorted based on Rate in Descending order",
    "",
    "Outlet Categories (A/B/C/D) reflect whether an outlet meets performance (quantity) and quality (service) thresholds:",
    "- A: Performance > threshold AND Quality > threshold (top performer).",
    "- B: Performance > threshold BUT Quality < threshold (good performer but poor service).",
    "- C: Performance < threshold BUT Quality > threshold (good service, underperforming).",
    "- D: Performance < threshold AND Quality < threshold (poor performer).",
    "",
    "Categorical Hierarchy: A > B > C > D. When comparing categories, treat A as strictly better than B, B better than C, and so on.",
    "",
    "Outlet Types indicate business functions and relevant KPIs: **1S (Sales only)**, **2S (Service only)**, **1+2S/3S (Sales & Service)**.",
    "- 1S KPIs: New Car Reg, Gear Up, Insurance, POV, NPS Sales. ",
    "- 2S KPIs: Intake, Revenue, Parts, Lubricant, NPS Svc, E-Appointment, QPI.",
    "- 1+2S/3S use blended metrics from both sides.",
    "",
    "Definition of Quality vs Performance parameters (use this consistently):",
    "- Quality parameters: QPI (qpi_pct), E-Appointment (eappointment_pct), NPS Sales (nps_sales_pct), NPS Service (cs_service_pct).",
    "- All other KPI % metrics belong to Performance.",
    "",
    "Axis Thresholds by Outlet Type (for interpreting X/Y scatter parameters):",
    "### Y is performance , X is quality",
    "- 1S: Threshold X = 35, Threshold Y = 60.",
    "- 2S: Threshold X = 40, Threshold Y = 55.",
    "- 1+2S: Threshold X = 30, Threshold Y = 50.",
    "- 3S: Threshold X = 35, Threshold Y = 60.",
    "",
    "Interpreting % Achievement: 100% = target achieved; >100% = target exceeded; <100% = gap.",
    "Some KPIs (e.g., NPS, QPI) are composites or tiered scores; >100% still indicates exceeding the blended target.",
    "",
    "Outlet Type KPI Scope Rule:",
    "- 1S (Sales-only) focus KPIs: New Car Reg, Gear Up, Insurance, POV, NPS Sales. Treat service KPIs as 0/NA for 1S.",
    "- 2S (Service-only) focus KPIs: Intake, Revenue, Parts, Lubricant, NPS Svc, E-Appointment, QPI. Treat sales KPIs as 0/NA for 2S.",
    "- 1+2S/3S use blended metrics from both sides; all KPIs apply.",
    "",
    "CATEGORICAL ANALYSIS DECISION TREE (USE THIS):",
    "- If the largest group is 'A' outlets: The region is healthy. Insight = 'This region successfully balances performance and quality.'",
    "- If the largest group is 'B' outlets: The region is at risk. Insight = 'This region is prioritizing short-term sales over customer experience, which threatens long-term loyalty.' This is the most common and critical insight.",
    "- If the largest group is 'C' outlets: The region is struggling but has good service. Insight = 'This region has strong customer processes but is failing to achieve sales and volume targets.'",
    "- If the largest group is 'D' outlets: The region is in crisis. Insight = 'This region is failing across all key performance and quality indicators.'",
    "- Compare A vs. D: Always note the disparity between top and bottom performers.",
    "",
    "DATA DICTIONARY:",
    "Data Dictionary & Terminology:",
    "KPI Parameters:",
    "Performance:",
    "- Car Reg (New Car Registration): Number of new vehicles registered (primary sales volume).",
    "- Intake (Job Intake): Number of repair orders/service jobs opened (service volume).",
    "- Revenue (Service Revenue): Income from repair orders (after-sales).",
    "- Parts (Parts Sales): Revenue from spare parts sales.",
    "- Lubricant (Lubricant Sales): Quantity or revenue from engine oil/lubricants.",
    "- Gear Up (Accessory Sales): Vehicles fitted with optional accessories / accessory revenue.",
    "- Ins. T1 (Insurance Tier 1 New): Insurance policies sold for new vehicles.",
    "- Ins. Renew O/all (Insurance Renewal Overall): Renewed insurance policies for vehicles of any age.",
    "- POV (Trade-In): Perodua vehicles taken as trade-ins for new purchases.",
    "Quality:",
    "- NPS Sales: Net Promoter Score from sales surveys.",
    "- NPS Svc: Net Promoter Score from service surveys.",
    "- E-Appt (E-Appointment): Digital service appointments (Booking/Confirmed/No-Show).",
    "- QPI (Quality Performance Indicator): % of warranty claims submitted within required timeframe (≤3 days).",
    "",
    "Other Terms:",
    "- Outlet Type: 1S (Sales), 2S (Service), 1+2S (Sales & Service), 3S (Sales, Service, Spare Parts).",
    "- Outlet Category: Grade A/B/C/D based on Performance & Quality thresholds.",
    "- MTD/YTD Actual/Target: Month/Year-to-date achieved vs goal.",
    "- Threshold: Minimum acceptable level for Performance/Quality.",
    "- Weightage: Relative KPI importance by outlet type.",
    "",
    "COMPUTED STATISTICS (authoritative, precomputed from pandas):",
    "Use ONLY the computed statistics below for the 'Observation' section.",
    "Do NOT do any arithmetic yourself; treat these as exact facts.",
    "MANDATORY: Explicitly state the min and max for each numeric column. If grouped statistics are provided (by 'outlet_category' or 'outlet_type'), include the min and max per group for the primary KPIs you discuss.",
    "If both a small and large table are present for a chart (e.g., Tab 3 KPI gaps), FOCUS your Observations on the SMALL table; use the large-table statistics only as supporting context.",
    "",
    "### Computed Statistics — Outlet Category Distribution (% by Region) — March",
    "- Month: count=4 (missing=0)",
    "- category: count=4 (missing=0)",
    "- count: min=32.0, p25=38.0, median=69.5, p75=100.5, max=105.0, mean=69.0, std=38.32318706301274 (missing=0)",
    "- pct: min=11.594202898550725, p25=13.768115942028986, median=25.181159420289855, p75=36.413043478260875, max=38.04347826086957, mean=25.0, std=13.885212703990122 (missing=0)",
    "",
    "Grouped statistics by dimension:",
    "- By Month:",
    "  - March:",
    "    - count: min=32.0, max=105.0, range=73.0, mean=69.0 (n=4)",
    "    - pct: min=11.59, max=38.04, range=26.45, mean=25.0 (n=4)",
    "",
    "MONTH-AWARE DIRECTIVE:",
    "If a 'Month' column is present, you MUST compare months explicitly.",
    "- Quantify month-over-month deltas for the key KPIs you discuss (state sign and magnitude).",
    "- Identify where performance improved or declined the most by outlet_category/region/outlet_type as applicable.",
    "- Use only the provided computed statistics and grouped stats by 'Month' (if present) to support claims.",
    "- Keep comparisons concise and prioritized; avoid repeating trivial differences.",
    "Provide a structured analysis of the data based on the following format:",
    "",
    "### 1. Observation",
    "- State the most significant, factual patterns from the data.",
    "- Use short, direct bullet points.",
    "- Quantify your findings with precise numbers, ranges, or counts.",
    "  - **Example:** 'The [metric_name] for [Segment A] ranges from [X] to [Y].'",
    "  - **Example:** '[Number] of entities have a value of 0 for the [metric_name] parameter.'",
    "",
    "- Always state the explicit min and max for each numeric KPI you reference. If grouped statistics by 'outlet_category' or 'outlet_type' are provided, include the per-group min and max for the primary KPI(s).",
    "",
    "### 2. Interpretation",
    "- Explain the business or practical implications of your observations.",
    "- Identify the key drivers behind the observed patterns and the relationships between metrics.",
    "  - **Example:** 'The high performance in [Metric A] for [Segment B] appears to be negatively correlated with [Metric C], suggesting a potential trade-off.'",
    "- Quantify the potential impact, risk, or opportunity.",
    "  - **Example:** 'The cluster of [Number] entities in [Segment C] shows an average [Metric D] that is [Value/Percentage] below the target, indicating a high risk of [describe the business risk, e.g., user churn, quality failure, revenue loss].'",
    "",
    "### 3. Recommendation",
    "- Propose clear, actionable next steps based on your interpretation.",
    "- Prioritize your recommendations to guide decision-making.",
    "  - **High Priority:** Address critical issues (e.g., data integrity problems, major risks, or opportunities affecting the largest segments).",
    "  - **Medium Priority:** Focus on important optimizations or further investigations.",
    "  - **Foundation:** Suggest general best practices or foundational improvements.",
    "- Each recommendation should be directly linked to a specific, quantified observation.",
    "  - **Example:** 'Given that [Number] entities have 0 values for [metric_name], the top priority is to audit the data pipeline to correct this potential anomaly.'",
    "",
    "### Parameter Focus Coverage",
    "- Conclude with a brief summary for each key parameter analyzed.",
    "- For each parameter, provide a single bullet point with a one-sentence, numeric summary.",
    "  - **Example:** '[parameter_name]: The values range from [min] to [max], with the majority of entities clustered around [central_tendency_value].'",
    "  - **Example:** '[categorical_parameter]: The most prevalent category is '[Category_X],' accounting for [Percentage]% of the data.'",
    "JSON follows:",
    "```json",
    "{\"charts\": [{\"graph_id\": \"q2-month-March\", \"graph_label\": \"Outlet Category Distribution (% by Region) — March\", \"filters\": {\"outlet_categories\": [], \"regions\": [], \"outlet_types\": [], \"outlets\": [], \"search_text\": \"\", \"score_band\": \"All\", \"units_band\": \"All\", \"kpi_group\": \"All\", \"kpi_single\": null, \"months\": [\"March\"], \"compare_months\": true}, \"columns\": [\"Month\", \"category\", \"count\", \"pct\"], \"n_rows\": 4, \"rows\": [{\"Month\": \"March\", \"category\": \"A\", \"count\": 105, \"pct\": 38.04347826086957}, {\"Month\": \"March\", \"category\": \"B\", \"count\": 99, \"pct\": 35.869565217391305}, {\"Month\": \"March\", \"category\": \"C\", \"count\": 32, \"pct\": 11.594202898550725}, {\"Month\": \"March\", \"category\": \"D\", \"count\": 40, \"pct\": 14.492753623188406}], \"computed_stats\": {\"Month\": {\"dtype\": \"object\", \"count\": 4, \"missing\": 0, \"non_null\": 4}, \"category\": {\"dtype\": \"object\", \"count\": 4, \"missing\": 0, \"non_null\": 4}, \"count\": {\"dtype\": \"int64\", \"count\": 4, \"missing\": 0, \"min\": 32.0, \"p25\": 38.0, \"median\": 69.5, \"p75\": 100.5, \"max\": 105.0, \"mean\": 69.0, \"std\": 38.32318706301274}, \"pct\": {\"dtype\": \"float64\", \"count\": 4, \"missing\": 0, \"min\": 11.594202898550725, \"p25\": 13.768115942028986, \"median\": 25.181159420289855, \"p75\": 36.413043478260875, \"max\": 38.04347826086957, \"mean\": 25.0, \"std\": 13.885212703990122}}, \"group_stats\": {\"Month\": {\"March\": {\"count\": {\"min\": 32.0, \"max\": 105.0, \"mean\": 69.0, \"range\": 73.0, \"count\": 4}, \"pct\": {\"min\": 11.59, \"max\": 38.04, \"mean\": 25.0, \"range\": 26.45, \"count\": 4}}}}}], \"metadata\": {}}",
    "```"
  ]
}
{
  "meta": {
    "ts": "2025-09-18T03:52:51.036043Z",
    "mode": "individual-multi",
    "provider": "gemini",
    "model": "gemini-2.0-flash",
    "selected_graphs": [
      "q2-month-May"
    ],
    "graph_label": "Outlet Category Distribution (% by Region) — May",
    "focus_hint": ""
  },
  "metadata": {},
  "charts_meta": [],
  "prompt": "Role: You are a strict, quantitative data analyst. Your sole task is to analyze the provided snapshot of CR KPI data.\nCritical Directive: Your analysis MUST be based exclusively on the provided figures. You MUST NOT infer any time-based trends (e.g., improvement, decline, momentum) as this is a single point in time.\n\nNon-Negotiable Context: All insights must frame performance through the fundamental trade-off between short-term financial performance (sales, revenue) and long-term customer health (satisfaction, loyalty).\n**Quantification Mandate: You MUST quantify all claims. Instead of 'low' or 'high', state the actual values, ranges, and percentages. Estimate potential impact (e.g., revenue risk, churn probability) based on the magnitude of quality gaps.**\n\nTimeframe Guard: Do NOT mention or assume timeframes (e.g., 'MTD', 'YTD', 'MoM', 'YoY') unless these exact terms appear in the dataset columns or metadata. If absent, treat percentages as timeless normalized achievements and avoid any timeframe terminology.\n\nYou are a senior data analyst presenting to business stakeholders. I will provide a chart dataset as JSON.\nReturn plain markdown only (no code fences, no introductory text). Be specific, quantified, and evidence-led.\nDo not be vague or ambiguous: avoid generic statements; support each key claim with concrete numbers, names, and explicit comparisons from the provided data.\n\nKNOWLEDGE BASE:\nKPI CALCULATION FORMULAS:\n- MTD Actual (%): Month-to-date achievement as percentage of target\n  * Performance KPIs: MTD Actual / MTD Target * 100\n  * Insurance: MTD Actual / MTD Target = % (2 Decimal Point)\n  * NPS: MTD Actual / MTD Target * 100\n  * QPI: xQPI * (Total claim submission by outlet (Aging ≤3days)/Total claim submission by outlet) * 100\n- Rate: Points * Achievement (based on MTD Actual %)\n- Ranking: Sorted based on Rate in Descending order\n\nOutlet Categories (A/B/C/D) reflect whether an outlet meets performance (quantity) and quality (service) thresholds:\n- A: Performance > threshold AND Quality > threshold (top performer).\n- B: Performance > threshold BUT Quality < threshold (good performer but poor service).\n- C: Performance < threshold BUT Quality > threshold (good service, underperforming).\n- D: Performance < threshold AND Quality < threshold (poor performer).\n\nCategorical Hierarchy: A > B > C > D. When comparing categories, treat A as strictly better than B, B better than C, and so on.\n\nOutlet Types indicate business functions and relevant KPIs: **1S (Sales only)**, **2S (Service only)**, **1+2S/3S (Sales & Service)**.\n- 1S KPIs: New Car Reg, Gear Up, Insurance, POV, NPS Sales. \n- 2S KPIs: Intake, Revenue, Parts, Lubricant, NPS Svc, E-Appointment, QPI.\n- 1+2S/3S use blended metrics from both sides.\n\nDefinition of Quality vs Performance parameters (use this consistently):\n- Quality parameters: QPI (qpi_pct), E-Appointment (eappointment_pct), NPS Sales (nps_sales_pct), NPS Service (cs_service_pct).\n- All other KPI % metrics belong to Performance.\n\nAxis Thresholds by Outlet Type (for interpreting X/Y scatter parameters):\n### Y is performance , X is quality\n- 1S: Threshold X = 35, Threshold Y = 60.\n- 2S: Threshold X = 40, Threshold Y = 55.\n- 1+2S: Threshold X = 30, Threshold Y = 50.\n- 3S: Threshold X = 35, Threshold Y = 60.\n\nInterpreting % Achievement: 100% = target achieved; >100% = target exceeded; <100% = gap.\nSome KPIs (e.g., NPS, QPI) are composites or tiered scores; >100% still indicates exceeding the blended target.\n\nOutlet Type KPI Scope Rule:\n- 1S (Sales-only) focus KPIs: New Car Reg, Gear Up, Insurance, POV, NPS Sales. Treat service KPIs as 0/NA for 1S.\n- 2S (Service-only) focus KPIs: Intake, Revenue, Parts, Lubricant, NPS Svc, E-Appointment, QPI. Treat sales KPIs as 0/NA for 2S.\n- 1+2S/3S use blended metrics from both sides; all KPIs apply.\n\nCATEGORICAL ANALYSIS DECISION TREE (USE THIS):\n- If the largest group is 'A' outlets: The region is healthy. Insight = 'This region successfully balances performance and quality.'\n- If the largest group is 'B' outlets: The region is at risk. Insight = 'This region is prioritizing short-term sales over customer experience, which threatens long-term loyalty.' This is the most common and critical insight.\n- If the largest group is 'C' outlets: The region is struggling but has good service. Insight = 'This region has strong customer processes but is failing to achieve sales and volume targets.'\n- If the largest group is 'D' outlets: The region is in crisis. Insight = 'This region is failing across all key performance and quality indicators.'\n- Compare A vs. D: Always note the disparity between top and bottom performers.\n\nDATA DICTIONARY:\nData Dictionary & Terminology:\nKPI Parameters:\nPerformance:\n- Car Reg (New Car Registration): Number of new vehicles registered (primary sales volume).\n- Intake (Job Intake): Number of repair orders/service jobs opened (service volume).\n- Revenue (Service Revenue): Income from repair orders (after-sales).\n- Parts (Parts Sales): Revenue from spare parts sales.\n- Lubricant (Lubricant Sales): Quantity or revenue from engine oil/lubricants.\n- Gear Up (Accessory Sales): Vehicles fitted with optional accessories / accessory revenue.\n- Ins. T1 (Insurance Tier 1 New): Insurance policies sold for new vehicles.\n- Ins. Renew O/all (Insurance Renewal Overall): Renewed insurance policies for vehicles of any age.\n- POV (Trade-In): Perodua vehicles taken as trade-ins for new purchases.\nQuality:\n- NPS Sales: Net Promoter Score from sales surveys.\n- NPS Svc: Net Promoter Score from service surveys.\n- E-Appt (E-Appointment): Digital service appointments (Booking/Confirmed/No-Show).\n- QPI (Quality Performance Indicator): % of warranty claims submitted within required timeframe (≤3 days).\n\nOther Terms:\n- Outlet Type: 1S (Sales), 2S (Service), 1+2S (Sales & Service), 3S (Sales, Service, Spare Parts).\n- Outlet Category: Grade A/B/C/D based on Performance & Quality thresholds.\n- MTD/YTD Actual/Target: Month/Year-to-date achieved vs goal.\n- Threshold: Minimum acceptable level for Performance/Quality.\n- Weightage: Relative KPI importance by outlet type.\n\nCOMPUTED STATISTICS (authoritative, precomputed from pandas):\nUse ONLY the computed statistics below for the 'Observation' section.\nDo NOT do any arithmetic yourself; treat these as exact facts.\nMANDATORY: Explicitly state the min and max for each numeric column. If grouped statistics are provided (by 'outlet_category' or 'outlet_type'), include the min and max per group for the primary KPIs you discuss.\nIf both a small and large table are present for a chart (e.g., Tab 3 KPI gaps), FOCUS your Observations on the SMALL table; use the large-table statistics only as supporting context.\n\n### Computed Statistics — Outlet Category Distribution (% by Region) — May\n- Month: count=4 (missing=0)\n- category: count=4 (missing=0)\n- count: min=27.0, p25=34.5, median=60.0, p75=95.25, max=132.0, mean=69.75, std=48.13436056152264 (missing=0)\n- pct: min=9.67741935483871, p25=12.365591397849462, median=21.50537634408602, p75=34.13978494623656, max=47.31182795698925, mean=24.999999999999996, std=17.252458982624606 (missing=0)\n\nGrouped statistics by dimension:\n- By Month:\n  - May:\n    - count: min=27.0, max=132.0, range=105.0, mean=69.75 (n=4)\n    - pct: min=9.68, max=47.31, range=37.63, mean=25.0 (n=4)\n\nMONTH-AWARE DIRECTIVE:\nIf a 'Month' column is present, you MUST compare months explicitly.\n- Quantify month-over-month deltas for the key KPIs you discuss (state sign and magnitude).\n- Identify where performance improved or declined the most by outlet_category/region/outlet_type as applicable.\n- Use only the provided computed statistics and grouped stats by 'Month' (if present) to support claims.\n- Keep comparisons concise and prioritized; avoid repeating trivial differences.\nProvide a structured analysis of the data based on the following format:\n\n### 1. Observation\n- State the most significant, factual patterns from the data.\n- Use short, direct bullet points.\n- Quantify your findings with precise numbers, ranges, or counts.\n  - **Example:** 'The [metric_name] for [Segment A] ranges from [X] to [Y].'\n  - **Example:** '[Number] of entities have a value of 0 for the [metric_name] parameter.'\n\n- Always state the explicit min and max for each numeric KPI you reference. If grouped statistics by 'outlet_category' or 'outlet_type' are provided, include the per-group min and max for the primary KPI(s).\n\n### 2. Interpretation\n- Explain the business or practical implications of your observations.\n- Identify the key drivers behind the observed patterns and the relationships between metrics.\n  - **Example:** 'The high performance in [Metric A] for [Segment B] appears to be negatively correlated with [Metric C], suggesting a potential trade-off.'\n- Quantify the potential impact, risk, or opportunity.\n  - **Example:** 'The cluster of [Number] entities in [Segment C] shows an average [Metric D] that is [Value/Percentage] below the target, indicating a high risk of [describe the business risk, e.g., user churn, quality failure, revenue loss].'\n\n### 3. Recommendation\n- Propose clear, actionable next steps based on your interpretation.\n- Prioritize your recommendations to guide decision-making.\n  - **High Priority:** Address critical issues (e.g., data integrity problems, major risks, or opportunities affecting the largest segments).\n  - **Medium Priority:** Focus on important optimizations or further investigations.\n  - **Foundation:** Suggest general best practices or foundational improvements.\n- Each recommendation should be directly linked to a specific, quantified observation.\n  - **Example:** 'Given that [Number] entities have 0 values for [metric_name], the top priority is to audit the data pipeline to correct this potential anomaly.'\n\n### Parameter Focus Coverage\n- Conclude with a brief summary for each key parameter analyzed.\n- For each parameter, provide a single bullet point with a one-sentence, numeric summary.\n  - **Example:** '[parameter_name]: The values range from [min] to [max], with the majority of entities clustered around [central_tendency_value].'\n  - **Example:** '[categorical_parameter]: The most prevalent category is '[Category_X],' accounting for [Percentage]% of the data.'\nJSON follows:\n```json\n{\"charts\": [{\"graph_id\": \"q2-month-May\", \"graph_label\": \"Outlet Category Distribution (% by Region) — May\", \"filters\": {\"outlet_categories\": [], \"regions\": [], \"outlet_types\": [], \"outlets\": [], \"search_text\": \"\", \"score_band\": \"All\", \"units_band\": \"All\", \"kpi_group\": \"All\", \"kpi_single\": null, \"months\": [\"May\"], \"compare_months\": true}, \"columns\": [\"Month\", \"category\", \"count\", \"pct\"], \"n_rows\": 4, \"rows\": [{\"Month\": \"May\", \"category\": \"A\", \"count\": 132, \"pct\": 47.31182795698925}, {\"Month\": \"May\", \"category\": \"B\", \"count\": 83, \"pct\": 29.749103942652326}, {\"Month\": \"May\", \"category\": \"C\", \"count\": 37, \"pct\": 13.261648745519713}, {\"Month\": \"May\", \"category\": \"D\", \"count\": 27, \"pct\": 9.67741935483871}], \"computed_stats\": {\"Month\": {\"dtype\": \"object\", \"count\": 4, \"missing\": 0, \"non_null\": 4}, \"category\": {\"dtype\": \"object\", \"count\": 4, \"missing\": 0, \"non_null\": 4}, \"count\": {\"dtype\": \"int64\", \"count\": 4, \"missing\": 0, \"min\": 27.0, \"p25\": 34.5, \"median\": 60.0, \"p75\": 95.25, \"max\": 132.0, \"mean\": 69.75, \"std\": 48.13436056152264}, \"pct\": {\"dtype\": \"float64\", \"count\": 4, \"missing\": 0, \"min\": 9.67741935483871, \"p25\": 12.365591397849462, \"median\": 21.50537634408602, \"p75\": 34.13978494623656, \"max\": 47.31182795698925, \"mean\": 24.999999999999996, \"std\": 17.252458982624606}}, \"group_stats\": {\"Month\": {\"May\": {\"count\": {\"min\": 27.0, \"max\": 132.0, \"mean\": 69.75, \"range\": 105.0, \"count\": 4}, \"pct\": {\"min\": 9.68, \"max\": 47.31, \"mean\": 25.0, \"range\": 37.63, \"count\": 4}}}}}], \"metadata\": {}}\n```",
  "prompt_lines": [
    "Role: You are a strict, quantitative data analyst. Your sole task is to analyze the provided snapshot of CR KPI data.",
    "Critical Directive: Your analysis MUST be based exclusively on the provided figures. You MUST NOT infer any time-based trends (e.g., improvement, decline, momentum) as this is a single point in time.",
    "",
    "Non-Negotiable Context: All insights must frame performance through the fundamental trade-off between short-term financial performance (sales, revenue) and long-term customer health (satisfaction, loyalty).",
    "**Quantification Mandate: You MUST quantify all claims. Instead of 'low' or 'high', state the actual values, ranges, and percentages. Estimate potential impact (e.g., revenue risk, churn probability) based on the magnitude of quality gaps.**",
    "",
    "Timeframe Guard: Do NOT mention or assume timeframes (e.g., 'MTD', 'YTD', 'MoM', 'YoY') unless these exact terms appear in the dataset columns or metadata. If absent, treat percentages as timeless normalized achievements and avoid any timeframe terminology.",
    "",
    "You are a senior data analyst presenting to business stakeholders. I will provide a chart dataset as JSON.",
    "Return plain markdown only (no code fences, no introductory text). Be specific, quantified, and evidence-led.",
    "Do not be vague or ambiguous: avoid generic statements; support each key claim with concrete numbers, names, and explicit comparisons from the provided data.",
    "",
    "KNOWLEDGE BASE:",
    "KPI CALCULATION FORMULAS:",
    "- MTD Actual (%): Month-to-date achievement as percentage of target",
    "  * Performance KPIs: MTD Actual / MTD Target * 100",
    "  * Insurance: MTD Actual / MTD Target = % (2 Decimal Point)",
    "  * NPS: MTD Actual / MTD Target * 100",
    "  * QPI: xQPI * (Total claim submission by outlet (Aging ≤3days)/Total claim submission by outlet) * 100",
    "- Rate: Points * Achievement (based on MTD Actual %)",
    "- Ranking: Sorted based on Rate in Descending order",
    "",
    "Outlet Categories (A/B/C/D) reflect whether an outlet meets performance (quantity) and quality (service) thresholds:",
    "- A: Performance > threshold AND Quality > threshold (top performer).",
    "- B: Performance > threshold BUT Quality < threshold (good performer but poor service).",
    "- C: Performance < threshold BUT Quality > threshold (good service, underperforming).",
    "- D: Performance < threshold AND Quality < threshold (poor performer).",
    "",
    "Categorical Hierarchy: A > B > C > D. When comparing categories, treat A as strictly better than B, B better than C, and so on.",
    "",
    "Outlet Types indicate business functions and relevant KPIs: **1S (Sales only)**, **2S (Service only)**, **1+2S/3S (Sales & Service)**.",
    "- 1S KPIs: New Car Reg, Gear Up, Insurance, POV, NPS Sales. ",
    "- 2S KPIs: Intake, Revenue, Parts, Lubricant, NPS Svc, E-Appointment, QPI.",
    "- 1+2S/3S use blended metrics from both sides.",
    "",
    "Definition of Quality vs Performance parameters (use this consistently):",
    "- Quality parameters: QPI (qpi_pct), E-Appointment (eappointment_pct), NPS Sales (nps_sales_pct), NPS Service (cs_service_pct).",
    "- All other KPI % metrics belong to Performance.",
    "",
    "Axis Thresholds by Outlet Type (for interpreting X/Y scatter parameters):",
    "### Y is performance , X is quality",
    "- 1S: Threshold X = 35, Threshold Y = 60.",
    "- 2S: Threshold X = 40, Threshold Y = 55.",
    "- 1+2S: Threshold X = 30, Threshold Y = 50.",
    "- 3S: Threshold X = 35, Threshold Y = 60.",
    "",
    "Interpreting % Achievement: 100% = target achieved; >100% = target exceeded; <100% = gap.",
    "Some KPIs (e.g., NPS, QPI) are composites or tiered scores; >100% still indicates exceeding the blended target.",
    "",
    "Outlet Type KPI Scope Rule:",
    "- 1S (Sales-only) focus KPIs: New Car Reg, Gear Up, Insurance, POV, NPS Sales. Treat service KPIs as 0/NA for 1S.",
    "- 2S (Service-only) focus KPIs: Intake, Revenue, Parts, Lubricant, NPS Svc, E-Appointment, QPI. Treat sales KPIs as 0/NA for 2S.",
    "- 1+2S/3S use blended metrics from both sides; all KPIs apply.",
    "",
    "CATEGORICAL ANALYSIS DECISION TREE (USE THIS):",
    "- If the largest group is 'A' outlets: The region is healthy. Insight = 'This region successfully balances performance and quality.'",
    "- If the largest group is 'B' outlets: The region is at risk. Insight = 'This region is prioritizing short-term sales over customer experience, which threatens long-term loyalty.' This is the most common and critical insight.",
    "- If the largest group is 'C' outlets: The region is struggling but has good service. Insight = 'This region has strong customer processes but is failing to achieve sales and volume targets.'",
    "- If the largest group is 'D' outlets: The region is in crisis. Insight = 'This region is failing across all key performance and quality indicators.'",
    "- Compare A vs. D: Always note the disparity between top and bottom performers.",
    "",
    "DATA DICTIONARY:",
    "Data Dictionary & Terminology:",
    "KPI Parameters:",
    "Performance:",
    "- Car Reg (New Car Registration): Number of new vehicles registered (primary sales volume).",
    "- Intake (Job Intake): Number of repair orders/service jobs opened (service volume).",
    "- Revenue (Service Revenue): Income from repair orders (after-sales).",
    "- Parts (Parts Sales): Revenue from spare parts sales.",
    "- Lubricant (Lubricant Sales): Quantity or revenue from engine oil/lubricants.",
    "- Gear Up (Accessory Sales): Vehicles fitted with optional accessories / accessory revenue.",
    "- Ins. T1 (Insurance Tier 1 New): Insurance policies sold for new vehicles.",
    "- Ins. Renew O/all (Insurance Renewal Overall): Renewed insurance policies for vehicles of any age.",
    "- POV (Trade-In): Perodua vehicles taken as trade-ins for new purchases.",
    "Quality:",
    "- NPS Sales: Net Promoter Score from sales surveys.",
    "- NPS Svc: Net Promoter Score from service surveys.",
    "- E-Appt (E-Appointment): Digital service appointments (Booking/Confirmed/No-Show).",
    "- QPI (Quality Performance Indicator): % of warranty claims submitted within required timeframe (≤3 days).",
    "",
    "Other Terms:",
    "- Outlet Type: 1S (Sales), 2S (Service), 1+2S (Sales & Service), 3S (Sales, Service, Spare Parts).",
    "- Outlet Category: Grade A/B/C/D based on Performance & Quality thresholds.",
    "- MTD/YTD Actual/Target: Month/Year-to-date achieved vs goal.",
    "- Threshold: Minimum acceptable level for Performance/Quality.",
    "- Weightage: Relative KPI importance by outlet type.",
    "",
    "COMPUTED STATISTICS (authoritative, precomputed from pandas):",
    "Use ONLY the computed statistics below for the 'Observation' section.",
    "Do NOT do any arithmetic yourself; treat these as exact facts.",
    "MANDATORY: Explicitly state the min and max for each numeric column. If grouped statistics are provided (by 'outlet_category' or 'outlet_type'), include the min and max per group for the primary KPIs you discuss.",
    "If both a small and large table are present for a chart (e.g., Tab 3 KPI gaps), FOCUS your Observations on the SMALL table; use the large-table statistics only as supporting context.",
    "",
    "### Computed Statistics — Outlet Category Distribution (% by Region) — May",
    "- Month: count=4 (missing=0)",
    "- category: count=4 (missing=0)",
    "- count: min=27.0, p25=34.5, median=60.0, p75=95.25, max=132.0, mean=69.75, std=48.13436056152264 (missing=0)",
    "- pct: min=9.67741935483871, p25=12.365591397849462, median=21.50537634408602, p75=34.13978494623656, max=47.31182795698925, mean=24.999999999999996, std=17.252458982624606 (missing=0)",
    "",
    "Grouped statistics by dimension:",
    "- By Month:",
    "  - May:",
    "    - count: min=27.0, max=132.0, range=105.0, mean=69.75 (n=4)",
    "    - pct: min=9.68, max=47.31, range=37.63, mean=25.0 (n=4)",
    "",
    "MONTH-AWARE DIRECTIVE:",
    "If a 'Month' column is present, you MUST compare months explicitly.",
    "- Quantify month-over-month deltas for the key KPIs you discuss (state sign and magnitude).",
    "- Identify where performance improved or declined the most by outlet_category/region/outlet_type as applicable.",
    "- Use only the provided computed statistics and grouped stats by 'Month' (if present) to support claims.",
    "- Keep comparisons concise and prioritized; avoid repeating trivial differences.",
    "Provide a structured analysis of the data based on the following format:",
    "",
    "### 1. Observation",
    "- State the most significant, factual patterns from the data.",
    "- Use short, direct bullet points.",
    "- Quantify your findings with precise numbers, ranges, or counts.",
    "  - **Example:** 'The [metric_name] for [Segment A] ranges from [X] to [Y].'",
    "  - **Example:** '[Number] of entities have a value of 0 for the [metric_name] parameter.'",
    "",
    "- Always state the explicit min and max for each numeric KPI you reference. If grouped statistics by 'outlet_category' or 'outlet_type' are provided, include the per-group min and max for the primary KPI(s).",
    "",
    "### 2. Interpretation",
    "- Explain the business or practical implications of your observations.",
    "- Identify the key drivers behind the observed patterns and the relationships between metrics.",
    "  - **Example:** 'The high performance in [Metric A] for [Segment B] appears to be negatively correlated with [Metric C], suggesting a potential trade-off.'",
    "- Quantify the potential impact, risk, or opportunity.",
    "  - **Example:** 'The cluster of [Number] entities in [Segment C] shows an average [Metric D] that is [Value/Percentage] below the target, indicating a high risk of [describe the business risk, e.g., user churn, quality failure, revenue loss].'",
    "",
    "### 3. Recommendation",
    "- Propose clear, actionable next steps based on your interpretation.",
    "- Prioritize your recommendations to guide decision-making.",
    "  - **High Priority:** Address critical issues (e.g., data integrity problems, major risks, or opportunities affecting the largest segments).",
    "  - **Medium Priority:** Focus on important optimizations or further investigations.",
    "  - **Foundation:** Suggest general best practices or foundational improvements.",
    "- Each recommendation should be directly linked to a specific, quantified observation.",
    "  - **Example:** 'Given that [Number] entities have 0 values for [metric_name], the top priority is to audit the data pipeline to correct this potential anomaly.'",
    "",
    "### Parameter Focus Coverage",
    "- Conclude with a brief summary for each key parameter analyzed.",
    "- For each parameter, provide a single bullet point with a one-sentence, numeric summary.",
    "  - **Example:** '[parameter_name]: The values range from [min] to [max], with the majority of entities clustered around [central_tendency_value].'",
    "  - **Example:** '[categorical_parameter]: The most prevalent category is '[Category_X],' accounting for [Percentage]% of the data.'",
    "JSON follows:",
    "```json",
    "{\"charts\": [{\"graph_id\": \"q2-month-May\", \"graph_label\": \"Outlet Category Distribution (% by Region) — May\", \"filters\": {\"outlet_categories\": [], \"regions\": [], \"outlet_types\": [], \"outlets\": [], \"search_text\": \"\", \"score_band\": \"All\", \"units_band\": \"All\", \"kpi_group\": \"All\", \"kpi_single\": null, \"months\": [\"May\"], \"compare_months\": true}, \"columns\": [\"Month\", \"category\", \"count\", \"pct\"], \"n_rows\": 4, \"rows\": [{\"Month\": \"May\", \"category\": \"A\", \"count\": 132, \"pct\": 47.31182795698925}, {\"Month\": \"May\", \"category\": \"B\", \"count\": 83, \"pct\": 29.749103942652326}, {\"Month\": \"May\", \"category\": \"C\", \"count\": 37, \"pct\": 13.261648745519713}, {\"Month\": \"May\", \"category\": \"D\", \"count\": 27, \"pct\": 9.67741935483871}], \"computed_stats\": {\"Month\": {\"dtype\": \"object\", \"count\": 4, \"missing\": 0, \"non_null\": 4}, \"category\": {\"dtype\": \"object\", \"count\": 4, \"missing\": 0, \"non_null\": 4}, \"count\": {\"dtype\": \"int64\", \"count\": 4, \"missing\": 0, \"min\": 27.0, \"p25\": 34.5, \"median\": 60.0, \"p75\": 95.25, \"max\": 132.0, \"mean\": 69.75, \"std\": 48.13436056152264}, \"pct\": {\"dtype\": \"float64\", \"count\": 4, \"missing\": 0, \"min\": 9.67741935483871, \"p25\": 12.365591397849462, \"median\": 21.50537634408602, \"p75\": 34.13978494623656, \"max\": 47.31182795698925, \"mean\": 24.999999999999996, \"std\": 17.252458982624606}}, \"group_stats\": {\"Month\": {\"May\": {\"count\": {\"min\": 27.0, \"max\": 132.0, \"mean\": 69.75, \"range\": 105.0, \"count\": 4}, \"pct\": {\"min\": 9.68, \"max\": 47.31, \"mean\": 25.0, \"range\": 37.63, \"count\": 4}}}}}], \"metadata\": {}}",
    "```"
  ]
}
{
  "meta": {
    "ts": "2025-09-18T03:53:05.109576Z",
    "mode": "individual-multi",
    "provider": "gemini",
    "model": "gemini-2.0-flash",
    "selected_graphs": [
      "q2"
    ],
    "graph_label": "Outlet Category Distribution (% by Region)",
    "focus_hint": ""
  },
  "metadata": {},
  "charts_meta": [],
  "prompt": "Role: You are a strict, quantitative data analyst. Your sole task is to analyze the provided snapshot of CR KPI data.\nCritical Directive: Your analysis MUST be based exclusively on the provided figures. You MUST NOT infer any time-based trends (e.g., improvement, decline, momentum) as this is a single point in time.\n\nNon-Negotiable Context: All insights must frame performance through the fundamental trade-off between short-term financial performance (sales, revenue) and long-term customer health (satisfaction, loyalty).\n**Quantification Mandate: You MUST quantify all claims. Instead of 'low' or 'high', state the actual values, ranges, and percentages. Estimate potential impact (e.g., revenue risk, churn probability) based on the magnitude of quality gaps.**\n\nTimeframe Guard: Do NOT mention or assume timeframes (e.g., 'MTD', 'YTD', 'MoM', 'YoY') unless these exact terms appear in the dataset columns or metadata. If absent, treat percentages as timeless normalized achievements and avoid any timeframe terminology.\n\nYou are a senior data analyst presenting to business stakeholders. I will provide a chart dataset as JSON.\nReturn plain markdown only (no code fences, no introductory text). Be specific, quantified, and evidence-led.\nDo not be vague or ambiguous: avoid generic statements; support each key claim with concrete numbers, names, and explicit comparisons from the provided data.\n\nKNOWLEDGE BASE:\nKPI CALCULATION FORMULAS:\n- MTD Actual (%): Month-to-date achievement as percentage of target\n  * Performance KPIs: MTD Actual / MTD Target * 100\n  * Insurance: MTD Actual / MTD Target = % (2 Decimal Point)\n  * NPS: MTD Actual / MTD Target * 100\n  * QPI: xQPI * (Total claim submission by outlet (Aging ≤3days)/Total claim submission by outlet) * 100\n- Rate: Points * Achievement (based on MTD Actual %)\n- Ranking: Sorted based on Rate in Descending order\n\nOutlet Categories (A/B/C/D) reflect whether an outlet meets performance (quantity) and quality (service) thresholds:\n- A: Performance > threshold AND Quality > threshold (top performer).\n- B: Performance > threshold BUT Quality < threshold (good performer but poor service).\n- C: Performance < threshold BUT Quality > threshold (good service, underperforming).\n- D: Performance < threshold AND Quality < threshold (poor performer).\n\nCategorical Hierarchy: A > B > C > D. When comparing categories, treat A as strictly better than B, B better than C, and so on.\n\nOutlet Types indicate business functions and relevant KPIs: **1S (Sales only)**, **2S (Service only)**, **1+2S/3S (Sales & Service)**.\n- 1S KPIs: New Car Reg, Gear Up, Insurance, POV, NPS Sales. \n- 2S KPIs: Intake, Revenue, Parts, Lubricant, NPS Svc, E-Appointment, QPI.\n- 1+2S/3S use blended metrics from both sides.\n\nDefinition of Quality vs Performance parameters (use this consistently):\n- Quality parameters: QPI (qpi_pct), E-Appointment (eappointment_pct), NPS Sales (nps_sales_pct), NPS Service (cs_service_pct).\n- All other KPI % metrics belong to Performance.\n\nAxis Thresholds by Outlet Type (for interpreting X/Y scatter parameters):\n### Y is performance , X is quality\n- 1S: Threshold X = 35, Threshold Y = 60.\n- 2S: Threshold X = 40, Threshold Y = 55.\n- 1+2S: Threshold X = 30, Threshold Y = 50.\n- 3S: Threshold X = 35, Threshold Y = 60.\n\nInterpreting % Achievement: 100% = target achieved; >100% = target exceeded; <100% = gap.\nSome KPIs (e.g., NPS, QPI) are composites or tiered scores; >100% still indicates exceeding the blended target.\n\nOutlet Type KPI Scope Rule:\n- 1S (Sales-only) focus KPIs: New Car Reg, Gear Up, Insurance, POV, NPS Sales. Treat service KPIs as 0/NA for 1S.\n- 2S (Service-only) focus KPIs: Intake, Revenue, Parts, Lubricant, NPS Svc, E-Appointment, QPI. Treat sales KPIs as 0/NA for 2S.\n- 1+2S/3S use blended metrics from both sides; all KPIs apply.\n\nCATEGORICAL ANALYSIS DECISION TREE (USE THIS):\n- If the largest group is 'A' outlets: The region is healthy. Insight = 'This region successfully balances performance and quality.'\n- If the largest group is 'B' outlets: The region is at risk. Insight = 'This region is prioritizing short-term sales over customer experience, which threatens long-term loyalty.' This is the most common and critical insight.\n- If the largest group is 'C' outlets: The region is struggling but has good service. Insight = 'This region has strong customer processes but is failing to achieve sales and volume targets.'\n- If the largest group is 'D' outlets: The region is in crisis. Insight = 'This region is failing across all key performance and quality indicators.'\n- Compare A vs. D: Always note the disparity between top and bottom performers.\n\nDATA DICTIONARY:\nData Dictionary & Terminology:\nKPI Parameters:\nPerformance:\n- Car Reg (New Car Registration): Number of new vehicles registered (primary sales volume).\n- Intake (Job Intake): Number of repair orders/service jobs opened (service volume).\n- Revenue (Service Revenue): Income from repair orders (after-sales).\n- Parts (Parts Sales): Revenue from spare parts sales.\n- Lubricant (Lubricant Sales): Quantity or revenue from engine oil/lubricants.\n- Gear Up (Accessory Sales): Vehicles fitted with optional accessories / accessory revenue.\n- Ins. T1 (Insurance Tier 1 New): Insurance policies sold for new vehicles.\n- Ins. Renew O/all (Insurance Renewal Overall): Renewed insurance policies for vehicles of any age.\n- POV (Trade-In): Perodua vehicles taken as trade-ins for new purchases.\nQuality:\n- NPS Sales: Net Promoter Score from sales surveys.\n- NPS Svc: Net Promoter Score from service surveys.\n- E-Appt (E-Appointment): Digital service appointments (Booking/Confirmed/No-Show).\n- QPI (Quality Performance Indicator): % of warranty claims submitted within required timeframe (≤3 days).\n\nOther Terms:\n- Outlet Type: 1S (Sales), 2S (Service), 1+2S (Sales & Service), 3S (Sales, Service, Spare Parts).\n- Outlet Category: Grade A/B/C/D based on Performance & Quality thresholds.\n- MTD/YTD Actual/Target: Month/Year-to-date achieved vs goal.\n- Threshold: Minimum acceptable level for Performance/Quality.\n- Weightage: Relative KPI importance by outlet type.\n\nCOMPUTED STATISTICS (authoritative, precomputed from pandas):\nUse ONLY the computed statistics below for the 'Observation' section.\nDo NOT do any arithmetic yourself; treat these as exact facts.\nMANDATORY: Explicitly state the min and max for each numeric column. If grouped statistics are provided (by 'outlet_category' or 'outlet_type'), include the min and max per group for the primary KPIs you discuss.\nIf both a small and large table are present for a chart (e.g., Tab 3 KPI gaps), FOCUS your Observations on the SMALL table; use the large-table statistics only as supporting context.\n\n### Computed Statistics — Outlet Category Distribution (% by Region)\n- rgn: count=28 (missing=0)\n- category: count=28 (missing=0)\n- count: min=0.0, p25=7.25, median=16.5, p75=33.0, max=49.0, mean=19.821428571428573, std=14.409496794947348 (missing=0)\n- pct: min=0.0, p25=12.412383177570094, median=19.004340748779164, p75=35.3173324742268, max=62.06896551724138, mean=25.0, std=16.72636707881982 (missing=0)\n\nAdditional context statistics (large table):\n- rgn: count=7 (missing=0)\n- avg_total_score: min=92.34453608247422, p25=93.72011723233317, median=94.88689655172413, p75=96.41771875, max=98.08260416666667, mean=95.08424410936162, std=2.125297688304183 (missing=0)\n- avg_rate_performance: min=57.674226804123705, p25=59.28351425438596, median=60.256551724137935, p75=62.04271320093458, max=65.53049999999999, mean=60.87339049127181, std=2.7355755141877194 (missing=0)\n- avg_rate_quality: min=31.623250000000002, p25=33.391985571405144, median=34.62965517241379, p75=34.66557023195877, max=37.1071875, mean=34.210743468448804, std=1.7335107253667839 (missing=0)\n- cat_a: min=18.0, p25=25.5, median=37.0, p75=41.0, max=49.0, mean=33.857142857142854, std=11.725024114098465 (missing=0)\n- cat_b: min=5.0, p25=18.0, median=33.0, p75=34.5, max=39.0, mean=26.0, std=13.759844960366863 (missing=0)\n- cat_c: min=0.0, p25=3.5, median=13.0, p75=15.0, max=19.0, mean=9.857142857142858, std=7.358183005529092 (missing=0)\n- cat_d: min=3.0, p25=4.5, median=9.0, p75=12.5, max=21.0, mean=9.571428571428571, std=6.373307431706682 (missing=0)\n\nMONTH-AWARE DIRECTIVE:\nIf a 'Month' column is present, you MUST compare months explicitly.\n- Quantify month-over-month deltas for the key KPIs you discuss (state sign and magnitude).\n- Identify where performance improved or declined the most by outlet_category/region/outlet_type as applicable.\n- Use only the provided computed statistics and grouped stats by 'Month' (if present) to support claims.\n- Keep comparisons concise and prioritized; avoid repeating trivial differences.\nProvide a structured analysis of the data based on the following format:\n\n### 1. Observation\n- State the most significant, factual patterns from the data.\n- Use short, direct bullet points.\n- Quantify your findings with precise numbers, ranges, or counts.\n  - **Example:** 'The [metric_name] for [Segment A] ranges from [X] to [Y].'\n  - **Example:** '[Number] of entities have a value of 0 for the [metric_name] parameter.'\n\n- Always state the explicit min and max for each numeric KPI you reference. If grouped statistics by 'outlet_category' or 'outlet_type' are provided, include the per-group min and max for the primary KPI(s).\n\n### 2. Interpretation\n- Explain the business or practical implications of your observations.\n- Identify the key drivers behind the observed patterns and the relationships between metrics.\n  - **Example:** 'The high performance in [Metric A] for [Segment B] appears to be negatively correlated with [Metric C], suggesting a potential trade-off.'\n- Quantify the potential impact, risk, or opportunity.\n  - **Example:** 'The cluster of [Number] entities in [Segment C] shows an average [Metric D] that is [Value/Percentage] below the target, indicating a high risk of [describe the business risk, e.g., user churn, quality failure, revenue loss].'\n\n### 3. Recommendation\n- Propose clear, actionable next steps based on your interpretation.\n- Prioritize your recommendations to guide decision-making.\n  - **High Priority:** Address critical issues (e.g., data integrity problems, major risks, or opportunities affecting the largest segments).\n  - **Medium Priority:** Focus on important optimizations or further investigations.\n  - **Foundation:** Suggest general best practices or foundational improvements.\n- Each recommendation should be directly linked to a specific, quantified observation.\n  - **Example:** 'Given that [Number] entities have 0 values for [metric_name], the top priority is to audit the data pipeline to correct this potential anomaly.'\n\n### Parameter Focus Coverage\n- Conclude with a brief summary for each key parameter analyzed.\n- For each parameter, provide a single bullet point with a one-sentence, numeric summary.\n  - **Example:** '[parameter_name]: The values range from [min] to [max], with the majority of entities clustered around [central_tendency_value].'\n  - **Example:** '[categorical_parameter]: The most prevalent category is '[Category_X],' accounting for [Percentage]% of the data.'\nJSON follows:\n```json\n{\"charts\": [{\"graph_id\": \"q2\", \"graph_label\": \"Outlet Category Distribution (% by Region)\", \"filters\": {\"outlet_categories\": [], \"regions\": [], \"outlet_types\": [], \"outlets\": [], \"search_text\": \"\", \"score_band\": \"All\", \"units_band\": \"All\", \"kpi_group\": \"All\", \"kpi_single\": null, \"months\": [\"March\", \"May\"], \"compare_months\": true}, \"columns\": [\"rgn\", \"category\", \"count\", \"pct\"], \"n_rows\": 28, \"rows\": [{\"rgn\": \"Central 1\", \"category\": \"A\", \"count\": 39, \"pct\": 34.21052631578947}, {\"rgn\": \"Central 2\", \"category\": \"A\", \"count\": 37, \"pct\": 38.144329896907216}, {\"rgn\": \"East Coast (Zone 1)\", \"category\": \"A\", \"count\": 19, \"pct\": 59.375}, {\"rgn\": \"East Coast (Zone 2)\", \"category\": \"A\", \"count\": 18, \"pct\": 62.06896551724138}, {\"rgn\": \"East Malaysia\", \"category\": \"A\", \"count\": 32, \"pct\": 40.0}, {\"rgn\": \"Northern\", \"category\": \"A\", \"count\": 43, \"pct\": 44.79166666666667}, {\"rgn\": \"Southern\", \"category\": \"A\", \"count\": 49, \"pct\": 45.794392523364486}, {\"rgn\": \"Central 1\", \"category\": \"B\", \"count\": 39, \"pct\": 34.21052631578947}, {\"rgn\": \"Central 2\", \"category\": \"B\", \"count\": 28, \"pct\": 28.865979381443296}, {\"rgn\": \"East Coast (Zone 1)\", \"category\": \"B\", \"count\": 5, \"pct\": 15.625}, {\"rgn\": \"East Coast (Zone 2)\", \"category\": \"B\", \"count\": 8, \"pct\": 27.586206896551722}, {\"rgn\": \"East Malaysia\", \"category\": \"B\", \"count\": 36, \"pct\": 45.0}, {\"rgn\": \"Northern\", \"category\": \"B\", \"count\": 33, \"pct\": 34.375}, {\"rgn\": \"Southern\", \"category\": \"B\", \"count\": 33, \"pct\": 30.8411214953271}, {\"rgn\": \"Central 1\", \"category\": \"C\", \"count\": 15, \"pct\": 13.157894736842104}, {\"rgn\": \"Central 2\", \"category\": \"C\", \"count\": 19, \"pct\": 19.587628865979383}, {\"rgn\": \"East Coast (Zone 1)\", \"category\": \"C\", \"count\": 4, \"pct\": 12.5}, {\"rgn\": \"East Coast (Zone 2)\", \"category\": \"C\", \"count\": 0, \"pct\": 0.0}, {\"rgn\": \"East Malaysia\", \"category\": \"C\", \"count\": 3, \"pct\": 3.75}, {\"rgn\": \"Northern\", \"category\": \"C\", \"count\": 15, \"pct\": 15.625}, {\"rgn\": \"Southern\", \"category\": \"C\", \"count\": 13, \"pct\": 12.149532710280374}, {\"rgn\": \"Central 1\", \"category\": \"D\", \"count\": 21, \"pct\": 18.421052631578945}, {\"rgn\": \"Central 2\", \"category\": \"D\", \"count\": 13, \"pct\": 13.402061855670103}, {\"rgn\": \"East Coast (Zone 1)\", \"category\": \"D\", \"count\": 4, \"pct\": 12.5}, {\"rgn\": \"East Coast (Zone 2)\", \"category\": \"D\", \"count\": 3, \"pct\": 10.344827586206897}, {\"rgn\": \"East Malaysia\", \"category\": \"D\", \"count\": 9, \"pct\": 11.25}, {\"rgn\": \"Northern\", \"category\": \"D\", \"count\": 5, \"pct\": 5.208333333333334}, {\"rgn\": \"Southern\", \"category\": \"D\", \"count\": 12, \"pct\": 11.214953271028037}], \"computed_stats\": {\"rgn\": {\"dtype\": \"object\", \"count\": 28, \"missing\": 0, \"non_null\": 28}, \"category\": {\"dtype\": \"object\", \"count\": 28, \"missing\": 0, \"non_null\": 28}, \"count\": {\"dtype\": \"int64\", \"count\": 28, \"missing\": 0, \"min\": 0.0, \"p25\": 7.25, \"median\": 16.5, \"p75\": 33.0, \"max\": 49.0, \"mean\": 19.821428571428573, \"std\": 14.409496794947348}, \"pct\": {\"dtype\": \"float64\", \"count\": 28, \"missing\": 0, \"min\": 0.0, \"p25\": 12.412383177570094, \"median\": 19.004340748779164, \"p75\": 35.3173324742268, \"max\": 62.06896551724138, \"mean\": 25.0, \"std\": 16.72636707881982}}, \"context_stats\": {\"large_computed_stats\": {\"rgn\": {\"dtype\": \"object\", \"count\": 7, \"missing\": 0, \"non_null\": 7}, \"avg_total_score\": {\"dtype\": \"float64\", \"count\": 7, \"missing\": 0, \"min\": 92.34453608247422, \"p25\": 93.72011723233317, \"median\": 94.88689655172413, \"p75\": 96.41771875, \"max\": 98.08260416666667, \"mean\": 95.08424410936162, \"std\": 2.125297688304183}, \"avg_rate_performance\": {\"dtype\": \"float64\", \"count\": 7, \"missing\": 0, \"min\": 57.674226804123705, \"p25\": 59.28351425438596, \"median\": 60.256551724137935, \"p75\": 62.04271320093458, \"max\": 65.53049999999999, \"mean\": 60.87339049127181, \"std\": 2.7355755141877194}, \"avg_rate_quality\": {\"dtype\": \"float64\", \"count\": 7, \"missing\": 0, \"min\": 31.623250000000002, \"p25\": 33.391985571405144, \"median\": 34.62965517241379, \"p75\": 34.66557023195877, \"max\": 37.1071875, \"mean\": 34.210743468448804, \"std\": 1.7335107253667839}, \"cat_a\": {\"dtype\": \"int64\", \"count\": 7, \"missing\": 0, \"min\": 18.0, \"p25\": 25.5, \"median\": 37.0, \"p75\": 41.0, \"max\": 49.0, \"mean\": 33.857142857142854, \"std\": 11.725024114098465}, \"cat_b\": {\"dtype\": \"int64\", \"count\": 7, \"missing\": 0, \"min\": 5.0, \"p25\": 18.0, \"median\": 33.0, \"p75\": 34.5, \"max\": 39.0, \"mean\": 26.0, \"std\": 13.759844960366863}, \"cat_c\": {\"dtype\": \"int64\", \"count\": 7, \"missing\": 0, \"min\": 0.0, \"p25\": 3.5, \"median\": 13.0, \"p75\": 15.0, \"max\": 19.0, \"mean\": 9.857142857142858, \"std\": 7.358183005529092}, \"cat_d\": {\"dtype\": \"int64\", \"count\": 7, \"missing\": 0, \"min\": 3.0, \"p25\": 4.5, \"median\": 9.0, \"p75\": 12.5, \"max\": 21.0, \"mean\": 9.571428571428571, \"std\": 6.373307431706682}}, \"large_group_stats\": {}}}], \"metadata\": {}}\n```",
  "prompt_lines": [
    "Role: You are a strict, quantitative data analyst. Your sole task is to analyze the provided snapshot of CR KPI data.",
    "Critical Directive: Your analysis MUST be based exclusively on the provided figures. You MUST NOT infer any time-based trends (e.g., improvement, decline, momentum) as this is a single point in time.",
    "",
    "Non-Negotiable Context: All insights must frame performance through the fundamental trade-off between short-term financial performance (sales, revenue) and long-term customer health (satisfaction, loyalty).",
    "**Quantification Mandate: You MUST quantify all claims. Instead of 'low' or 'high', state the actual values, ranges, and percentages. Estimate potential impact (e.g., revenue risk, churn probability) based on the magnitude of quality gaps.**",
    "",
    "Timeframe Guard: Do NOT mention or assume timeframes (e.g., 'MTD', 'YTD', 'MoM', 'YoY') unless these exact terms appear in the dataset columns or metadata. If absent, treat percentages as timeless normalized achievements and avoid any timeframe terminology.",
    "",
    "You are a senior data analyst presenting to business stakeholders. I will provide a chart dataset as JSON.",
    "Return plain markdown only (no code fences, no introductory text). Be specific, quantified, and evidence-led.",
    "Do not be vague or ambiguous: avoid generic statements; support each key claim with concrete numbers, names, and explicit comparisons from the provided data.",
    "",
    "KNOWLEDGE BASE:",
    "KPI CALCULATION FORMULAS:",
    "- MTD Actual (%): Month-to-date achievement as percentage of target",
    "  * Performance KPIs: MTD Actual / MTD Target * 100",
    "  * Insurance: MTD Actual / MTD Target = % (2 Decimal Point)",
    "  * NPS: MTD Actual / MTD Target * 100",
    "  * QPI: xQPI * (Total claim submission by outlet (Aging ≤3days)/Total claim submission by outlet) * 100",
    "- Rate: Points * Achievement (based on MTD Actual %)",
    "- Ranking: Sorted based on Rate in Descending order",
    "",
    "Outlet Categories (A/B/C/D) reflect whether an outlet meets performance (quantity) and quality (service) thresholds:",
    "- A: Performance > threshold AND Quality > threshold (top performer).",
    "- B: Performance > threshold BUT Quality < threshold (good performer but poor service).",
    "- C: Performance < threshold BUT Quality > threshold (good service, underperforming).",
    "- D: Performance < threshold AND Quality < threshold (poor performer).",
    "",
    "Categorical Hierarchy: A > B > C > D. When comparing categories, treat A as strictly better than B, B better than C, and so on.",
    "",
    "Outlet Types indicate business functions and relevant KPIs: **1S (Sales only)**, **2S (Service only)**, **1+2S/3S (Sales & Service)**.",
    "- 1S KPIs: New Car Reg, Gear Up, Insurance, POV, NPS Sales. ",
    "- 2S KPIs: Intake, Revenue, Parts, Lubricant, NPS Svc, E-Appointment, QPI.",
    "- 1+2S/3S use blended metrics from both sides.",
    "",
    "Definition of Quality vs Performance parameters (use this consistently):",
    "- Quality parameters: QPI (qpi_pct), E-Appointment (eappointment_pct), NPS Sales (nps_sales_pct), NPS Service (cs_service_pct).",
    "- All other KPI % metrics belong to Performance.",
    "",
    "Axis Thresholds by Outlet Type (for interpreting X/Y scatter parameters):",
    "### Y is performance , X is quality",
    "- 1S: Threshold X = 35, Threshold Y = 60.",
    "- 2S: Threshold X = 40, Threshold Y = 55.",
    "- 1+2S: Threshold X = 30, Threshold Y = 50.",
    "- 3S: Threshold X = 35, Threshold Y = 60.",
    "",
    "Interpreting % Achievement: 100% = target achieved; >100% = target exceeded; <100% = gap.",
    "Some KPIs (e.g., NPS, QPI) are composites or tiered scores; >100% still indicates exceeding the blended target.",
    "",
    "Outlet Type KPI Scope Rule:",
    "- 1S (Sales-only) focus KPIs: New Car Reg, Gear Up, Insurance, POV, NPS Sales. Treat service KPIs as 0/NA for 1S.",
    "- 2S (Service-only) focus KPIs: Intake, Revenue, Parts, Lubricant, NPS Svc, E-Appointment, QPI. Treat sales KPIs as 0/NA for 2S.",
    "- 1+2S/3S use blended metrics from both sides; all KPIs apply.",
    "",
    "CATEGORICAL ANALYSIS DECISION TREE (USE THIS):",
    "- If the largest group is 'A' outlets: The region is healthy. Insight = 'This region successfully balances performance and quality.'",
    "- If the largest group is 'B' outlets: The region is at risk. Insight = 'This region is prioritizing short-term sales over customer experience, which threatens long-term loyalty.' This is the most common and critical insight.",
    "- If the largest group is 'C' outlets: The region is struggling but has good service. Insight = 'This region has strong customer processes but is failing to achieve sales and volume targets.'",
    "- If the largest group is 'D' outlets: The region is in crisis. Insight = 'This region is failing across all key performance and quality indicators.'",
    "- Compare A vs. D: Always note the disparity between top and bottom performers.",
    "",
    "DATA DICTIONARY:",
    "Data Dictionary & Terminology:",
    "KPI Parameters:",
    "Performance:",
    "- Car Reg (New Car Registration): Number of new vehicles registered (primary sales volume).",
    "- Intake (Job Intake): Number of repair orders/service jobs opened (service volume).",
    "- Revenue (Service Revenue): Income from repair orders (after-sales).",
    "- Parts (Parts Sales): Revenue from spare parts sales.",
    "- Lubricant (Lubricant Sales): Quantity or revenue from engine oil/lubricants.",
    "- Gear Up (Accessory Sales): Vehicles fitted with optional accessories / accessory revenue.",
    "- Ins. T1 (Insurance Tier 1 New): Insurance policies sold for new vehicles.",
    "- Ins. Renew O/all (Insurance Renewal Overall): Renewed insurance policies for vehicles of any age.",
    "- POV (Trade-In): Perodua vehicles taken as trade-ins for new purchases.",
    "Quality:",
    "- NPS Sales: Net Promoter Score from sales surveys.",
    "- NPS Svc: Net Promoter Score from service surveys.",
    "- E-Appt (E-Appointment): Digital service appointments (Booking/Confirmed/No-Show).",
    "- QPI (Quality Performance Indicator): % of warranty claims submitted within required timeframe (≤3 days).",
    "",
    "Other Terms:",
    "- Outlet Type: 1S (Sales), 2S (Service), 1+2S (Sales & Service), 3S (Sales, Service, Spare Parts).",
    "- Outlet Category: Grade A/B/C/D based on Performance & Quality thresholds.",
    "- MTD/YTD Actual/Target: Month/Year-to-date achieved vs goal.",
    "- Threshold: Minimum acceptable level for Performance/Quality.",
    "- Weightage: Relative KPI importance by outlet type.",
    "",
    "COMPUTED STATISTICS (authoritative, precomputed from pandas):",
    "Use ONLY the computed statistics below for the 'Observation' section.",
    "Do NOT do any arithmetic yourself; treat these as exact facts.",
    "MANDATORY: Explicitly state the min and max for each numeric column. If grouped statistics are provided (by 'outlet_category' or 'outlet_type'), include the min and max per group for the primary KPIs you discuss.",
    "If both a small and large table are present for a chart (e.g., Tab 3 KPI gaps), FOCUS your Observations on the SMALL table; use the large-table statistics only as supporting context.",
    "",
    "### Computed Statistics — Outlet Category Distribution (% by Region)",
    "- rgn: count=28 (missing=0)",
    "- category: count=28 (missing=0)",
    "- count: min=0.0, p25=7.25, median=16.5, p75=33.0, max=49.0, mean=19.821428571428573, std=14.409496794947348 (missing=0)",
    "- pct: min=0.0, p25=12.412383177570094, median=19.004340748779164, p75=35.3173324742268, max=62.06896551724138, mean=25.0, std=16.72636707881982 (missing=0)",
    "",
    "Additional context statistics (large table):",
    "- rgn: count=7 (missing=0)",
    "- avg_total_score: min=92.34453608247422, p25=93.72011723233317, median=94.88689655172413, p75=96.41771875, max=98.08260416666667, mean=95.08424410936162, std=2.125297688304183 (missing=0)",
    "- avg_rate_performance: min=57.674226804123705, p25=59.28351425438596, median=60.256551724137935, p75=62.04271320093458, max=65.53049999999999, mean=60.87339049127181, std=2.7355755141877194 (missing=0)",
    "- avg_rate_quality: min=31.623250000000002, p25=33.391985571405144, median=34.62965517241379, p75=34.66557023195877, max=37.1071875, mean=34.210743468448804, std=1.7335107253667839 (missing=0)",
    "- cat_a: min=18.0, p25=25.5, median=37.0, p75=41.0, max=49.0, mean=33.857142857142854, std=11.725024114098465 (missing=0)",
    "- cat_b: min=5.0, p25=18.0, median=33.0, p75=34.5, max=39.0, mean=26.0, std=13.759844960366863 (missing=0)",
    "- cat_c: min=0.0, p25=3.5, median=13.0, p75=15.0, max=19.0, mean=9.857142857142858, std=7.358183005529092 (missing=0)",
    "- cat_d: min=3.0, p25=4.5, median=9.0, p75=12.5, max=21.0, mean=9.571428571428571, std=6.373307431706682 (missing=0)",
    "",
    "MONTH-AWARE DIRECTIVE:",
    "If a 'Month' column is present, you MUST compare months explicitly.",
    "- Quantify month-over-month deltas for the key KPIs you discuss (state sign and magnitude).",
    "- Identify where performance improved or declined the most by outlet_category/region/outlet_type as applicable.",
    "- Use only the provided computed statistics and grouped stats by 'Month' (if present) to support claims.",
    "- Keep comparisons concise and prioritized; avoid repeating trivial differences.",
    "Provide a structured analysis of the data based on the following format:",
    "",
    "### 1. Observation",
    "- State the most significant, factual patterns from the data.",
    "- Use short, direct bullet points.",
    "- Quantify your findings with precise numbers, ranges, or counts.",
    "  - **Example:** 'The [metric_name] for [Segment A] ranges from [X] to [Y].'",
    "  - **Example:** '[Number] of entities have a value of 0 for the [metric_name] parameter.'",
    "",
    "- Always state the explicit min and max for each numeric KPI you reference. If grouped statistics by 'outlet_category' or 'outlet_type' are provided, include the per-group min and max for the primary KPI(s).",
    "",
    "### 2. Interpretation",
    "- Explain the business or practical implications of your observations.",
    "- Identify the key drivers behind the observed patterns and the relationships between metrics.",
    "  - **Example:** 'The high performance in [Metric A] for [Segment B] appears to be negatively correlated with [Metric C], suggesting a potential trade-off.'",
    "- Quantify the potential impact, risk, or opportunity.",
    "  - **Example:** 'The cluster of [Number] entities in [Segment C] shows an average [Metric D] that is [Value/Percentage] below the target, indicating a high risk of [describe the business risk, e.g., user churn, quality failure, revenue loss].'",
    "",
    "### 3. Recommendation",
    "- Propose clear, actionable next steps based on your interpretation.",
    "- Prioritize your recommendations to guide decision-making.",
    "  - **High Priority:** Address critical issues (e.g., data integrity problems, major risks, or opportunities affecting the largest segments).",
    "  - **Medium Priority:** Focus on important optimizations or further investigations.",
    "  - **Foundation:** Suggest general best practices or foundational improvements.",
    "- Each recommendation should be directly linked to a specific, quantified observation.",
    "  - **Example:** 'Given that [Number] entities have 0 values for [metric_name], the top priority is to audit the data pipeline to correct this potential anomaly.'",
    "",
    "### Parameter Focus Coverage",
    "- Conclude with a brief summary for each key parameter analyzed.",
    "- For each parameter, provide a single bullet point with a one-sentence, numeric summary.",
    "  - **Example:** '[parameter_name]: The values range from [min] to [max], with the majority of entities clustered around [central_tendency_value].'",
    "  - **Example:** '[categorical_parameter]: The most prevalent category is '[Category_X],' accounting for [Percentage]% of the data.'",
    "JSON follows:",
    "```json",
    "{\"charts\": [{\"graph_id\": \"q2\", \"graph_label\": \"Outlet Category Distribution (% by Region)\", \"filters\": {\"outlet_categories\": [], \"regions\": [], \"outlet_types\": [], \"outlets\": [], \"search_text\": \"\", \"score_band\": \"All\", \"units_band\": \"All\", \"kpi_group\": \"All\", \"kpi_single\": null, \"months\": [\"March\", \"May\"], \"compare_months\": true}, \"columns\": [\"rgn\", \"category\", \"count\", \"pct\"], \"n_rows\": 28, \"rows\": [{\"rgn\": \"Central 1\", \"category\": \"A\", \"count\": 39, \"pct\": 34.21052631578947}, {\"rgn\": \"Central 2\", \"category\": \"A\", \"count\": 37, \"pct\": 38.144329896907216}, {\"rgn\": \"East Coast (Zone 1)\", \"category\": \"A\", \"count\": 19, \"pct\": 59.375}, {\"rgn\": \"East Coast (Zone 2)\", \"category\": \"A\", \"count\": 18, \"pct\": 62.06896551724138}, {\"rgn\": \"East Malaysia\", \"category\": \"A\", \"count\": 32, \"pct\": 40.0}, {\"rgn\": \"Northern\", \"category\": \"A\", \"count\": 43, \"pct\": 44.79166666666667}, {\"rgn\": \"Southern\", \"category\": \"A\", \"count\": 49, \"pct\": 45.794392523364486}, {\"rgn\": \"Central 1\", \"category\": \"B\", \"count\": 39, \"pct\": 34.21052631578947}, {\"rgn\": \"Central 2\", \"category\": \"B\", \"count\": 28, \"pct\": 28.865979381443296}, {\"rgn\": \"East Coast (Zone 1)\", \"category\": \"B\", \"count\": 5, \"pct\": 15.625}, {\"rgn\": \"East Coast (Zone 2)\", \"category\": \"B\", \"count\": 8, \"pct\": 27.586206896551722}, {\"rgn\": \"East Malaysia\", \"category\": \"B\", \"count\": 36, \"pct\": 45.0}, {\"rgn\": \"Northern\", \"category\": \"B\", \"count\": 33, \"pct\": 34.375}, {\"rgn\": \"Southern\", \"category\": \"B\", \"count\": 33, \"pct\": 30.8411214953271}, {\"rgn\": \"Central 1\", \"category\": \"C\", \"count\": 15, \"pct\": 13.157894736842104}, {\"rgn\": \"Central 2\", \"category\": \"C\", \"count\": 19, \"pct\": 19.587628865979383}, {\"rgn\": \"East Coast (Zone 1)\", \"category\": \"C\", \"count\": 4, \"pct\": 12.5}, {\"rgn\": \"East Coast (Zone 2)\", \"category\": \"C\", \"count\": 0, \"pct\": 0.0}, {\"rgn\": \"East Malaysia\", \"category\": \"C\", \"count\": 3, \"pct\": 3.75}, {\"rgn\": \"Northern\", \"category\": \"C\", \"count\": 15, \"pct\": 15.625}, {\"rgn\": \"Southern\", \"category\": \"C\", \"count\": 13, \"pct\": 12.149532710280374}, {\"rgn\": \"Central 1\", \"category\": \"D\", \"count\": 21, \"pct\": 18.421052631578945}, {\"rgn\": \"Central 2\", \"category\": \"D\", \"count\": 13, \"pct\": 13.402061855670103}, {\"rgn\": \"East Coast (Zone 1)\", \"category\": \"D\", \"count\": 4, \"pct\": 12.5}, {\"rgn\": \"East Coast (Zone 2)\", \"category\": \"D\", \"count\": 3, \"pct\": 10.344827586206897}, {\"rgn\": \"East Malaysia\", \"category\": \"D\", \"count\": 9, \"pct\": 11.25}, {\"rgn\": \"Northern\", \"category\": \"D\", \"count\": 5, \"pct\": 5.208333333333334}, {\"rgn\": \"Southern\", \"category\": \"D\", \"count\": 12, \"pct\": 11.214953271028037}], \"computed_stats\": {\"rgn\": {\"dtype\": \"object\", \"count\": 28, \"missing\": 0, \"non_null\": 28}, \"category\": {\"dtype\": \"object\", \"count\": 28, \"missing\": 0, \"non_null\": 28}, \"count\": {\"dtype\": \"int64\", \"count\": 28, \"missing\": 0, \"min\": 0.0, \"p25\": 7.25, \"median\": 16.5, \"p75\": 33.0, \"max\": 49.0, \"mean\": 19.821428571428573, \"std\": 14.409496794947348}, \"pct\": {\"dtype\": \"float64\", \"count\": 28, \"missing\": 0, \"min\": 0.0, \"p25\": 12.412383177570094, \"median\": 19.004340748779164, \"p75\": 35.3173324742268, \"max\": 62.06896551724138, \"mean\": 25.0, \"std\": 16.72636707881982}}, \"context_stats\": {\"large_computed_stats\": {\"rgn\": {\"dtype\": \"object\", \"count\": 7, \"missing\": 0, \"non_null\": 7}, \"avg_total_score\": {\"dtype\": \"float64\", \"count\": 7, \"missing\": 0, \"min\": 92.34453608247422, \"p25\": 93.72011723233317, \"median\": 94.88689655172413, \"p75\": 96.41771875, \"max\": 98.08260416666667, \"mean\": 95.08424410936162, \"std\": 2.125297688304183}, \"avg_rate_performance\": {\"dtype\": \"float64\", \"count\": 7, \"missing\": 0, \"min\": 57.674226804123705, \"p25\": 59.28351425438596, \"median\": 60.256551724137935, \"p75\": 62.04271320093458, \"max\": 65.53049999999999, \"mean\": 60.87339049127181, \"std\": 2.7355755141877194}, \"avg_rate_quality\": {\"dtype\": \"float64\", \"count\": 7, \"missing\": 0, \"min\": 31.623250000000002, \"p25\": 33.391985571405144, \"median\": 34.62965517241379, \"p75\": 34.66557023195877, \"max\": 37.1071875, \"mean\": 34.210743468448804, \"std\": 1.7335107253667839}, \"cat_a\": {\"dtype\": \"int64\", \"count\": 7, \"missing\": 0, \"min\": 18.0, \"p25\": 25.5, \"median\": 37.0, \"p75\": 41.0, \"max\": 49.0, \"mean\": 33.857142857142854, \"std\": 11.725024114098465}, \"cat_b\": {\"dtype\": \"int64\", \"count\": 7, \"missing\": 0, \"min\": 5.0, \"p25\": 18.0, \"median\": 33.0, \"p75\": 34.5, \"max\": 39.0, \"mean\": 26.0, \"std\": 13.759844960366863}, \"cat_c\": {\"dtype\": \"int64\", \"count\": 7, \"missing\": 0, \"min\": 0.0, \"p25\": 3.5, \"median\": 13.0, \"p75\": 15.0, \"max\": 19.0, \"mean\": 9.857142857142858, \"std\": 7.358183005529092}, \"cat_d\": {\"dtype\": \"int64\", \"count\": 7, \"missing\": 0, \"min\": 3.0, \"p25\": 4.5, \"median\": 9.0, \"p75\": 12.5, \"max\": 21.0, \"mean\": 9.571428571428571, \"std\": 6.373307431706682}}, \"large_group_stats\": {}}}], \"metadata\": {}}",
    "```"
  ]
}
{
  "meta": {
    "ts": "2025-09-18T03:53:12.338263Z",
    "mode": "individual-multi",
    "provider": "gemini",
    "model": "gemini-2.0-flash",
    "selected_graphs": [
      "q2-month-March"
    ],
    "graph_label": "Outlet Category Distribution (% by Region) — March",
    "focus_hint": ""
  },
  "metadata": {},
  "charts_meta": [],
  "prompt": "Role: You are a strict, quantitative data analyst. Your sole task is to analyze the provided snapshot of CR KPI data.\nCritical Directive: Your analysis MUST be based exclusively on the provided figures. You MUST NOT infer any time-based trends (e.g., improvement, decline, momentum) as this is a single point in time.\n\nNon-Negotiable Context: All insights must frame performance through the fundamental trade-off between short-term financial performance (sales, revenue) and long-term customer health (satisfaction, loyalty).\n**Quantification Mandate: You MUST quantify all claims. Instead of 'low' or 'high', state the actual values, ranges, and percentages. Estimate potential impact (e.g., revenue risk, churn probability) based on the magnitude of quality gaps.**\n\nTimeframe Guard: Do NOT mention or assume timeframes (e.g., 'MTD', 'YTD', 'MoM', 'YoY') unless these exact terms appear in the dataset columns or metadata. If absent, treat percentages as timeless normalized achievements and avoid any timeframe terminology.\n\nYou are a senior data analyst presenting to business stakeholders. I will provide a chart dataset as JSON.\nReturn plain markdown only (no code fences, no introductory text). Be specific, quantified, and evidence-led.\nDo not be vague or ambiguous: avoid generic statements; support each key claim with concrete numbers, names, and explicit comparisons from the provided data.\n\nKNOWLEDGE BASE:\nKPI CALCULATION FORMULAS:\n- MTD Actual (%): Month-to-date achievement as percentage of target\n  * Performance KPIs: MTD Actual / MTD Target * 100\n  * Insurance: MTD Actual / MTD Target = % (2 Decimal Point)\n  * NPS: MTD Actual / MTD Target * 100\n  * QPI: xQPI * (Total claim submission by outlet (Aging ≤3days)/Total claim submission by outlet) * 100\n- Rate: Points * Achievement (based on MTD Actual %)\n- Ranking: Sorted based on Rate in Descending order\n\nOutlet Categories (A/B/C/D) reflect whether an outlet meets performance (quantity) and quality (service) thresholds:\n- A: Performance > threshold AND Quality > threshold (top performer).\n- B: Performance > threshold BUT Quality < threshold (good performer but poor service).\n- C: Performance < threshold BUT Quality > threshold (good service, underperforming).\n- D: Performance < threshold AND Quality < threshold (poor performer).\n\nCategorical Hierarchy: A > B > C > D. When comparing categories, treat A as strictly better than B, B better than C, and so on.\n\nOutlet Types indicate business functions and relevant KPIs: **1S (Sales only)**, **2S (Service only)**, **1+2S/3S (Sales & Service)**.\n- 1S KPIs: New Car Reg, Gear Up, Insurance, POV, NPS Sales. \n- 2S KPIs: Intake, Revenue, Parts, Lubricant, NPS Svc, E-Appointment, QPI.\n- 1+2S/3S use blended metrics from both sides.\n\nDefinition of Quality vs Performance parameters (use this consistently):\n- Quality parameters: QPI (qpi_pct), E-Appointment (eappointment_pct), NPS Sales (nps_sales_pct), NPS Service (cs_service_pct).\n- All other KPI % metrics belong to Performance.\n\nAxis Thresholds by Outlet Type (for interpreting X/Y scatter parameters):\n### Y is performance , X is quality\n- 1S: Threshold X = 35, Threshold Y = 60.\n- 2S: Threshold X = 40, Threshold Y = 55.\n- 1+2S: Threshold X = 30, Threshold Y = 50.\n- 3S: Threshold X = 35, Threshold Y = 60.\n\nInterpreting % Achievement: 100% = target achieved; >100% = target exceeded; <100% = gap.\nSome KPIs (e.g., NPS, QPI) are composites or tiered scores; >100% still indicates exceeding the blended target.\n\nOutlet Type KPI Scope Rule:\n- 1S (Sales-only) focus KPIs: New Car Reg, Gear Up, Insurance, POV, NPS Sales. Treat service KPIs as 0/NA for 1S.\n- 2S (Service-only) focus KPIs: Intake, Revenue, Parts, Lubricant, NPS Svc, E-Appointment, QPI. Treat sales KPIs as 0/NA for 2S.\n- 1+2S/3S use blended metrics from both sides; all KPIs apply.\n\nCATEGORICAL ANALYSIS DECISION TREE (USE THIS):\n- If the largest group is 'A' outlets: The region is healthy. Insight = 'This region successfully balances performance and quality.'\n- If the largest group is 'B' outlets: The region is at risk. Insight = 'This region is prioritizing short-term sales over customer experience, which threatens long-term loyalty.' This is the most common and critical insight.\n- If the largest group is 'C' outlets: The region is struggling but has good service. Insight = 'This region has strong customer processes but is failing to achieve sales and volume targets.'\n- If the largest group is 'D' outlets: The region is in crisis. Insight = 'This region is failing across all key performance and quality indicators.'\n- Compare A vs. D: Always note the disparity between top and bottom performers.\n\nDATA DICTIONARY:\nData Dictionary & Terminology:\nKPI Parameters:\nPerformance:\n- Car Reg (New Car Registration): Number of new vehicles registered (primary sales volume).\n- Intake (Job Intake): Number of repair orders/service jobs opened (service volume).\n- Revenue (Service Revenue): Income from repair orders (after-sales).\n- Parts (Parts Sales): Revenue from spare parts sales.\n- Lubricant (Lubricant Sales): Quantity or revenue from engine oil/lubricants.\n- Gear Up (Accessory Sales): Vehicles fitted with optional accessories / accessory revenue.\n- Ins. T1 (Insurance Tier 1 New): Insurance policies sold for new vehicles.\n- Ins. Renew O/all (Insurance Renewal Overall): Renewed insurance policies for vehicles of any age.\n- POV (Trade-In): Perodua vehicles taken as trade-ins for new purchases.\nQuality:\n- NPS Sales: Net Promoter Score from sales surveys.\n- NPS Svc: Net Promoter Score from service surveys.\n- E-Appt (E-Appointment): Digital service appointments (Booking/Confirmed/No-Show).\n- QPI (Quality Performance Indicator): % of warranty claims submitted within required timeframe (≤3 days).\n\nOther Terms:\n- Outlet Type: 1S (Sales), 2S (Service), 1+2S (Sales & Service), 3S (Sales, Service, Spare Parts).\n- Outlet Category: Grade A/B/C/D based on Performance & Quality thresholds.\n- MTD/YTD Actual/Target: Month/Year-to-date achieved vs goal.\n- Threshold: Minimum acceptable level for Performance/Quality.\n- Weightage: Relative KPI importance by outlet type.\n\nCOMPUTED STATISTICS (authoritative, precomputed from pandas):\nUse ONLY the computed statistics below for the 'Observation' section.\nDo NOT do any arithmetic yourself; treat these as exact facts.\nMANDATORY: Explicitly state the min and max for each numeric column. If grouped statistics are provided (by 'outlet_category' or 'outlet_type'), include the min and max per group for the primary KPIs you discuss.\nIf both a small and large table are present for a chart (e.g., Tab 3 KPI gaps), FOCUS your Observations on the SMALL table; use the large-table statistics only as supporting context.\n\n### Computed Statistics — Outlet Category Distribution (% by Region) — March\n- Month: count=4 (missing=0)\n- category: count=4 (missing=0)\n- count: min=32.0, p25=38.0, median=69.5, p75=100.5, max=105.0, mean=69.0, std=38.32318706301274 (missing=0)\n- pct: min=11.594202898550725, p25=13.768115942028986, median=25.181159420289855, p75=36.413043478260875, max=38.04347826086957, mean=25.0, std=13.885212703990122 (missing=0)\n\nGrouped statistics by dimension:\n- By Month:\n  - March:\n    - count: min=32.0, max=105.0, range=73.0, mean=69.0 (n=4)\n    - pct: min=11.59, max=38.04, range=26.45, mean=25.0 (n=4)\n\nMONTH-AWARE DIRECTIVE:\nIf a 'Month' column is present, you MUST compare months explicitly.\n- Quantify month-over-month deltas for the key KPIs you discuss (state sign and magnitude).\n- Identify where performance improved or declined the most by outlet_category/region/outlet_type as applicable.\n- Use only the provided computed statistics and grouped stats by 'Month' (if present) to support claims.\n- Keep comparisons concise and prioritized; avoid repeating trivial differences.\nProvide a structured analysis of the data based on the following format:\n\n### 1. Observation\n- State the most significant, factual patterns from the data.\n- Use short, direct bullet points.\n- Quantify your findings with precise numbers, ranges, or counts.\n  - **Example:** 'The [metric_name] for [Segment A] ranges from [X] to [Y].'\n  - **Example:** '[Number] of entities have a value of 0 for the [metric_name] parameter.'\n\n- Always state the explicit min and max for each numeric KPI you reference. If grouped statistics by 'outlet_category' or 'outlet_type' are provided, include the per-group min and max for the primary KPI(s).\n\n### 2. Interpretation\n- Explain the business or practical implications of your observations.\n- Identify the key drivers behind the observed patterns and the relationships between metrics.\n  - **Example:** 'The high performance in [Metric A] for [Segment B] appears to be negatively correlated with [Metric C], suggesting a potential trade-off.'\n- Quantify the potential impact, risk, or opportunity.\n  - **Example:** 'The cluster of [Number] entities in [Segment C] shows an average [Metric D] that is [Value/Percentage] below the target, indicating a high risk of [describe the business risk, e.g., user churn, quality failure, revenue loss].'\n\n### 3. Recommendation\n- Propose clear, actionable next steps based on your interpretation.\n- Prioritize your recommendations to guide decision-making.\n  - **High Priority:** Address critical issues (e.g., data integrity problems, major risks, or opportunities affecting the largest segments).\n  - **Medium Priority:** Focus on important optimizations or further investigations.\n  - **Foundation:** Suggest general best practices or foundational improvements.\n- Each recommendation should be directly linked to a specific, quantified observation.\n  - **Example:** 'Given that [Number] entities have 0 values for [metric_name], the top priority is to audit the data pipeline to correct this potential anomaly.'\n\n### Parameter Focus Coverage\n- Conclude with a brief summary for each key parameter analyzed.\n- For each parameter, provide a single bullet point with a one-sentence, numeric summary.\n  - **Example:** '[parameter_name]: The values range from [min] to [max], with the majority of entities clustered around [central_tendency_value].'\n  - **Example:** '[categorical_parameter]: The most prevalent category is '[Category_X],' accounting for [Percentage]% of the data.'\nJSON follows:\n```json\n{\"charts\": [{\"graph_id\": \"q2-month-March\", \"graph_label\": \"Outlet Category Distribution (% by Region) — March\", \"filters\": {\"outlet_categories\": [], \"regions\": [], \"outlet_types\": [], \"outlets\": [], \"search_text\": \"\", \"score_band\": \"All\", \"units_band\": \"All\", \"kpi_group\": \"All\", \"kpi_single\": null, \"months\": [\"March\"], \"compare_months\": true}, \"columns\": [\"Month\", \"category\", \"count\", \"pct\"], \"n_rows\": 4, \"rows\": [{\"Month\": \"March\", \"category\": \"A\", \"count\": 105, \"pct\": 38.04347826086957}, {\"Month\": \"March\", \"category\": \"B\", \"count\": 99, \"pct\": 35.869565217391305}, {\"Month\": \"March\", \"category\": \"C\", \"count\": 32, \"pct\": 11.594202898550725}, {\"Month\": \"March\", \"category\": \"D\", \"count\": 40, \"pct\": 14.492753623188406}], \"computed_stats\": {\"Month\": {\"dtype\": \"object\", \"count\": 4, \"missing\": 0, \"non_null\": 4}, \"category\": {\"dtype\": \"object\", \"count\": 4, \"missing\": 0, \"non_null\": 4}, \"count\": {\"dtype\": \"int64\", \"count\": 4, \"missing\": 0, \"min\": 32.0, \"p25\": 38.0, \"median\": 69.5, \"p75\": 100.5, \"max\": 105.0, \"mean\": 69.0, \"std\": 38.32318706301274}, \"pct\": {\"dtype\": \"float64\", \"count\": 4, \"missing\": 0, \"min\": 11.594202898550725, \"p25\": 13.768115942028986, \"median\": 25.181159420289855, \"p75\": 36.413043478260875, \"max\": 38.04347826086957, \"mean\": 25.0, \"std\": 13.885212703990122}}, \"group_stats\": {\"Month\": {\"March\": {\"count\": {\"min\": 32.0, \"max\": 105.0, \"mean\": 69.0, \"range\": 73.0, \"count\": 4}, \"pct\": {\"min\": 11.59, \"max\": 38.04, \"mean\": 25.0, \"range\": 26.45, \"count\": 4}}}}}], \"metadata\": {}}\n```",
  "prompt_lines": [
    "Role: You are a strict, quantitative data analyst. Your sole task is to analyze the provided snapshot of CR KPI data.",
    "Critical Directive: Your analysis MUST be based exclusively on the provided figures. You MUST NOT infer any time-based trends (e.g., improvement, decline, momentum) as this is a single point in time.",
    "",
    "Non-Negotiable Context: All insights must frame performance through the fundamental trade-off between short-term financial performance (sales, revenue) and long-term customer health (satisfaction, loyalty).",
    "**Quantification Mandate: You MUST quantify all claims. Instead of 'low' or 'high', state the actual values, ranges, and percentages. Estimate potential impact (e.g., revenue risk, churn probability) based on the magnitude of quality gaps.**",
    "",
    "Timeframe Guard: Do NOT mention or assume timeframes (e.g., 'MTD', 'YTD', 'MoM', 'YoY') unless these exact terms appear in the dataset columns or metadata. If absent, treat percentages as timeless normalized achievements and avoid any timeframe terminology.",
    "",
    "You are a senior data analyst presenting to business stakeholders. I will provide a chart dataset as JSON.",
    "Return plain markdown only (no code fences, no introductory text). Be specific, quantified, and evidence-led.",
    "Do not be vague or ambiguous: avoid generic statements; support each key claim with concrete numbers, names, and explicit comparisons from the provided data.",
    "",
    "KNOWLEDGE BASE:",
    "KPI CALCULATION FORMULAS:",
    "- MTD Actual (%): Month-to-date achievement as percentage of target",
    "  * Performance KPIs: MTD Actual / MTD Target * 100",
    "  * Insurance: MTD Actual / MTD Target = % (2 Decimal Point)",
    "  * NPS: MTD Actual / MTD Target * 100",
    "  * QPI: xQPI * (Total claim submission by outlet (Aging ≤3days)/Total claim submission by outlet) * 100",
    "- Rate: Points * Achievement (based on MTD Actual %)",
    "- Ranking: Sorted based on Rate in Descending order",
    "",
    "Outlet Categories (A/B/C/D) reflect whether an outlet meets performance (quantity) and quality (service) thresholds:",
    "- A: Performance > threshold AND Quality > threshold (top performer).",
    "- B: Performance > threshold BUT Quality < threshold (good performer but poor service).",
    "- C: Performance < threshold BUT Quality > threshold (good service, underperforming).",
    "- D: Performance < threshold AND Quality < threshold (poor performer).",
    "",
    "Categorical Hierarchy: A > B > C > D. When comparing categories, treat A as strictly better than B, B better than C, and so on.",
    "",
    "Outlet Types indicate business functions and relevant KPIs: **1S (Sales only)**, **2S (Service only)**, **1+2S/3S (Sales & Service)**.",
    "- 1S KPIs: New Car Reg, Gear Up, Insurance, POV, NPS Sales. ",
    "- 2S KPIs: Intake, Revenue, Parts, Lubricant, NPS Svc, E-Appointment, QPI.",
    "- 1+2S/3S use blended metrics from both sides.",
    "",
    "Definition of Quality vs Performance parameters (use this consistently):",
    "- Quality parameters: QPI (qpi_pct), E-Appointment (eappointment_pct), NPS Sales (nps_sales_pct), NPS Service (cs_service_pct).",
    "- All other KPI % metrics belong to Performance.",
    "",
    "Axis Thresholds by Outlet Type (for interpreting X/Y scatter parameters):",
    "### Y is performance , X is quality",
    "- 1S: Threshold X = 35, Threshold Y = 60.",
    "- 2S: Threshold X = 40, Threshold Y = 55.",
    "- 1+2S: Threshold X = 30, Threshold Y = 50.",
    "- 3S: Threshold X = 35, Threshold Y = 60.",
    "",
    "Interpreting % Achievement: 100% = target achieved; >100% = target exceeded; <100% = gap.",
    "Some KPIs (e.g., NPS, QPI) are composites or tiered scores; >100% still indicates exceeding the blended target.",
    "",
    "Outlet Type KPI Scope Rule:",
    "- 1S (Sales-only) focus KPIs: New Car Reg, Gear Up, Insurance, POV, NPS Sales. Treat service KPIs as 0/NA for 1S.",
    "- 2S (Service-only) focus KPIs: Intake, Revenue, Parts, Lubricant, NPS Svc, E-Appointment, QPI. Treat sales KPIs as 0/NA for 2S.",
    "- 1+2S/3S use blended metrics from both sides; all KPIs apply.",
    "",
    "CATEGORICAL ANALYSIS DECISION TREE (USE THIS):",
    "- If the largest group is 'A' outlets: The region is healthy. Insight = 'This region successfully balances performance and quality.'",
    "- If the largest group is 'B' outlets: The region is at risk. Insight = 'This region is prioritizing short-term sales over customer experience, which threatens long-term loyalty.' This is the most common and critical insight.",
    "- If the largest group is 'C' outlets: The region is struggling but has good service. Insight = 'This region has strong customer processes but is failing to achieve sales and volume targets.'",
    "- If the largest group is 'D' outlets: The region is in crisis. Insight = 'This region is failing across all key performance and quality indicators.'",
    "- Compare A vs. D: Always note the disparity between top and bottom performers.",
    "",
    "DATA DICTIONARY:",
    "Data Dictionary & Terminology:",
    "KPI Parameters:",
    "Performance:",
    "- Car Reg (New Car Registration): Number of new vehicles registered (primary sales volume).",
    "- Intake (Job Intake): Number of repair orders/service jobs opened (service volume).",
    "- Revenue (Service Revenue): Income from repair orders (after-sales).",
    "- Parts (Parts Sales): Revenue from spare parts sales.",
    "- Lubricant (Lubricant Sales): Quantity or revenue from engine oil/lubricants.",
    "- Gear Up (Accessory Sales): Vehicles fitted with optional accessories / accessory revenue.",
    "- Ins. T1 (Insurance Tier 1 New): Insurance policies sold for new vehicles.",
    "- Ins. Renew O/all (Insurance Renewal Overall): Renewed insurance policies for vehicles of any age.",
    "- POV (Trade-In): Perodua vehicles taken as trade-ins for new purchases.",
    "Quality:",
    "- NPS Sales: Net Promoter Score from sales surveys.",
    "- NPS Svc: Net Promoter Score from service surveys.",
    "- E-Appt (E-Appointment): Digital service appointments (Booking/Confirmed/No-Show).",
    "- QPI (Quality Performance Indicator): % of warranty claims submitted within required timeframe (≤3 days).",
    "",
    "Other Terms:",
    "- Outlet Type: 1S (Sales), 2S (Service), 1+2S (Sales & Service), 3S (Sales, Service, Spare Parts).",
    "- Outlet Category: Grade A/B/C/D based on Performance & Quality thresholds.",
    "- MTD/YTD Actual/Target: Month/Year-to-date achieved vs goal.",
    "- Threshold: Minimum acceptable level for Performance/Quality.",
    "- Weightage: Relative KPI importance by outlet type.",
    "",
    "COMPUTED STATISTICS (authoritative, precomputed from pandas):",
    "Use ONLY the computed statistics below for the 'Observation' section.",
    "Do NOT do any arithmetic yourself; treat these as exact facts.",
    "MANDATORY: Explicitly state the min and max for each numeric column. If grouped statistics are provided (by 'outlet_category' or 'outlet_type'), include the min and max per group for the primary KPIs you discuss.",
    "If both a small and large table are present for a chart (e.g., Tab 3 KPI gaps), FOCUS your Observations on the SMALL table; use the large-table statistics only as supporting context.",
    "",
    "### Computed Statistics — Outlet Category Distribution (% by Region) — March",
    "- Month: count=4 (missing=0)",
    "- category: count=4 (missing=0)",
    "- count: min=32.0, p25=38.0, median=69.5, p75=100.5, max=105.0, mean=69.0, std=38.32318706301274 (missing=0)",
    "- pct: min=11.594202898550725, p25=13.768115942028986, median=25.181159420289855, p75=36.413043478260875, max=38.04347826086957, mean=25.0, std=13.885212703990122 (missing=0)",
    "",
    "Grouped statistics by dimension:",
    "- By Month:",
    "  - March:",
    "    - count: min=32.0, max=105.0, range=73.0, mean=69.0 (n=4)",
    "    - pct: min=11.59, max=38.04, range=26.45, mean=25.0 (n=4)",
    "",
    "MONTH-AWARE DIRECTIVE:",
    "If a 'Month' column is present, you MUST compare months explicitly.",
    "- Quantify month-over-month deltas for the key KPIs you discuss (state sign and magnitude).",
    "- Identify where performance improved or declined the most by outlet_category/region/outlet_type as applicable.",
    "- Use only the provided computed statistics and grouped stats by 'Month' (if present) to support claims.",
    "- Keep comparisons concise and prioritized; avoid repeating trivial differences.",
    "Provide a structured analysis of the data based on the following format:",
    "",
    "### 1. Observation",
    "- State the most significant, factual patterns from the data.",
    "- Use short, direct bullet points.",
    "- Quantify your findings with precise numbers, ranges, or counts.",
    "  - **Example:** 'The [metric_name] for [Segment A] ranges from [X] to [Y].'",
    "  - **Example:** '[Number] of entities have a value of 0 for the [metric_name] parameter.'",
    "",
    "- Always state the explicit min and max for each numeric KPI you reference. If grouped statistics by 'outlet_category' or 'outlet_type' are provided, include the per-group min and max for the primary KPI(s).",
    "",
    "### 2. Interpretation",
    "- Explain the business or practical implications of your observations.",
    "- Identify the key drivers behind the observed patterns and the relationships between metrics.",
    "  - **Example:** 'The high performance in [Metric A] for [Segment B] appears to be negatively correlated with [Metric C], suggesting a potential trade-off.'",
    "- Quantify the potential impact, risk, or opportunity.",
    "  - **Example:** 'The cluster of [Number] entities in [Segment C] shows an average [Metric D] that is [Value/Percentage] below the target, indicating a high risk of [describe the business risk, e.g., user churn, quality failure, revenue loss].'",
    "",
    "### 3. Recommendation",
    "- Propose clear, actionable next steps based on your interpretation.",
    "- Prioritize your recommendations to guide decision-making.",
    "  - **High Priority:** Address critical issues (e.g., data integrity problems, major risks, or opportunities affecting the largest segments).",
    "  - **Medium Priority:** Focus on important optimizations or further investigations.",
    "  - **Foundation:** Suggest general best practices or foundational improvements.",
    "- Each recommendation should be directly linked to a specific, quantified observation.",
    "  - **Example:** 'Given that [Number] entities have 0 values for [metric_name], the top priority is to audit the data pipeline to correct this potential anomaly.'",
    "",
    "### Parameter Focus Coverage",
    "- Conclude with a brief summary for each key parameter analyzed.",
    "- For each parameter, provide a single bullet point with a one-sentence, numeric summary.",
    "  - **Example:** '[parameter_name]: The values range from [min] to [max], with the majority of entities clustered around [central_tendency_value].'",
    "  - **Example:** '[categorical_parameter]: The most prevalent category is '[Category_X],' accounting for [Percentage]% of the data.'",
    "JSON follows:",
    "```json",
    "{\"charts\": [{\"graph_id\": \"q2-month-March\", \"graph_label\": \"Outlet Category Distribution (% by Region) — March\", \"filters\": {\"outlet_categories\": [], \"regions\": [], \"outlet_types\": [], \"outlets\": [], \"search_text\": \"\", \"score_band\": \"All\", \"units_band\": \"All\", \"kpi_group\": \"All\", \"kpi_single\": null, \"months\": [\"March\"], \"compare_months\": true}, \"columns\": [\"Month\", \"category\", \"count\", \"pct\"], \"n_rows\": 4, \"rows\": [{\"Month\": \"March\", \"category\": \"A\", \"count\": 105, \"pct\": 38.04347826086957}, {\"Month\": \"March\", \"category\": \"B\", \"count\": 99, \"pct\": 35.869565217391305}, {\"Month\": \"March\", \"category\": \"C\", \"count\": 32, \"pct\": 11.594202898550725}, {\"Month\": \"March\", \"category\": \"D\", \"count\": 40, \"pct\": 14.492753623188406}], \"computed_stats\": {\"Month\": {\"dtype\": \"object\", \"count\": 4, \"missing\": 0, \"non_null\": 4}, \"category\": {\"dtype\": \"object\", \"count\": 4, \"missing\": 0, \"non_null\": 4}, \"count\": {\"dtype\": \"int64\", \"count\": 4, \"missing\": 0, \"min\": 32.0, \"p25\": 38.0, \"median\": 69.5, \"p75\": 100.5, \"max\": 105.0, \"mean\": 69.0, \"std\": 38.32318706301274}, \"pct\": {\"dtype\": \"float64\", \"count\": 4, \"missing\": 0, \"min\": 11.594202898550725, \"p25\": 13.768115942028986, \"median\": 25.181159420289855, \"p75\": 36.413043478260875, \"max\": 38.04347826086957, \"mean\": 25.0, \"std\": 13.885212703990122}}, \"group_stats\": {\"Month\": {\"March\": {\"count\": {\"min\": 32.0, \"max\": 105.0, \"mean\": 69.0, \"range\": 73.0, \"count\": 4}, \"pct\": {\"min\": 11.59, \"max\": 38.04, \"mean\": 25.0, \"range\": 26.45, \"count\": 4}}}}}], \"metadata\": {}}",
    "```"
  ]
}
{
  "meta": {
    "ts": "2025-09-18T03:53:18.913467Z",
    "mode": "individual-multi",
    "provider": "gemini",
    "model": "gemini-2.0-flash",
    "selected_graphs": [
      "q2-month-May"
    ],
    "graph_label": "Outlet Category Distribution (% by Region) — May",
    "focus_hint": ""
  },
  "metadata": {},
  "charts_meta": [],
  "prompt": "Role: You are a strict, quantitative data analyst. Your sole task is to analyze the provided snapshot of CR KPI data.\nCritical Directive: Your analysis MUST be based exclusively on the provided figures. You MUST NOT infer any time-based trends (e.g., improvement, decline, momentum) as this is a single point in time.\n\nNon-Negotiable Context: All insights must frame performance through the fundamental trade-off between short-term financial performance (sales, revenue) and long-term customer health (satisfaction, loyalty).\n**Quantification Mandate: You MUST quantify all claims. Instead of 'low' or 'high', state the actual values, ranges, and percentages. Estimate potential impact (e.g., revenue risk, churn probability) based on the magnitude of quality gaps.**\n\nTimeframe Guard: Do NOT mention or assume timeframes (e.g., 'MTD', 'YTD', 'MoM', 'YoY') unless these exact terms appear in the dataset columns or metadata. If absent, treat percentages as timeless normalized achievements and avoid any timeframe terminology.\n\nYou are a senior data analyst presenting to business stakeholders. I will provide a chart dataset as JSON.\nReturn plain markdown only (no code fences, no introductory text). Be specific, quantified, and evidence-led.\nDo not be vague or ambiguous: avoid generic statements; support each key claim with concrete numbers, names, and explicit comparisons from the provided data.\n\nKNOWLEDGE BASE:\nKPI CALCULATION FORMULAS:\n- MTD Actual (%): Month-to-date achievement as percentage of target\n  * Performance KPIs: MTD Actual / MTD Target * 100\n  * Insurance: MTD Actual / MTD Target = % (2 Decimal Point)\n  * NPS: MTD Actual / MTD Target * 100\n  * QPI: xQPI * (Total claim submission by outlet (Aging ≤3days)/Total claim submission by outlet) * 100\n- Rate: Points * Achievement (based on MTD Actual %)\n- Ranking: Sorted based on Rate in Descending order\n\nOutlet Categories (A/B/C/D) reflect whether an outlet meets performance (quantity) and quality (service) thresholds:\n- A: Performance > threshold AND Quality > threshold (top performer).\n- B: Performance > threshold BUT Quality < threshold (good performer but poor service).\n- C: Performance < threshold BUT Quality > threshold (good service, underperforming).\n- D: Performance < threshold AND Quality < threshold (poor performer).\n\nCategorical Hierarchy: A > B > C > D. When comparing categories, treat A as strictly better than B, B better than C, and so on.\n\nOutlet Types indicate business functions and relevant KPIs: **1S (Sales only)**, **2S (Service only)**, **1+2S/3S (Sales & Service)**.\n- 1S KPIs: New Car Reg, Gear Up, Insurance, POV, NPS Sales. \n- 2S KPIs: Intake, Revenue, Parts, Lubricant, NPS Svc, E-Appointment, QPI.\n- 1+2S/3S use blended metrics from both sides.\n\nDefinition of Quality vs Performance parameters (use this consistently):\n- Quality parameters: QPI (qpi_pct), E-Appointment (eappointment_pct), NPS Sales (nps_sales_pct), NPS Service (cs_service_pct).\n- All other KPI % metrics belong to Performance.\n\nAxis Thresholds by Outlet Type (for interpreting X/Y scatter parameters):\n### Y is performance , X is quality\n- 1S: Threshold X = 35, Threshold Y = 60.\n- 2S: Threshold X = 40, Threshold Y = 55.\n- 1+2S: Threshold X = 30, Threshold Y = 50.\n- 3S: Threshold X = 35, Threshold Y = 60.\n\nInterpreting % Achievement: 100% = target achieved; >100% = target exceeded; <100% = gap.\nSome KPIs (e.g., NPS, QPI) are composites or tiered scores; >100% still indicates exceeding the blended target.\n\nOutlet Type KPI Scope Rule:\n- 1S (Sales-only) focus KPIs: New Car Reg, Gear Up, Insurance, POV, NPS Sales. Treat service KPIs as 0/NA for 1S.\n- 2S (Service-only) focus KPIs: Intake, Revenue, Parts, Lubricant, NPS Svc, E-Appointment, QPI. Treat sales KPIs as 0/NA for 2S.\n- 1+2S/3S use blended metrics from both sides; all KPIs apply.\n\nCATEGORICAL ANALYSIS DECISION TREE (USE THIS):\n- If the largest group is 'A' outlets: The region is healthy. Insight = 'This region successfully balances performance and quality.'\n- If the largest group is 'B' outlets: The region is at risk. Insight = 'This region is prioritizing short-term sales over customer experience, which threatens long-term loyalty.' This is the most common and critical insight.\n- If the largest group is 'C' outlets: The region is struggling but has good service. Insight = 'This region has strong customer processes but is failing to achieve sales and volume targets.'\n- If the largest group is 'D' outlets: The region is in crisis. Insight = 'This region is failing across all key performance and quality indicators.'\n- Compare A vs. D: Always note the disparity between top and bottom performers.\n\nDATA DICTIONARY:\nData Dictionary & Terminology:\nKPI Parameters:\nPerformance:\n- Car Reg (New Car Registration): Number of new vehicles registered (primary sales volume).\n- Intake (Job Intake): Number of repair orders/service jobs opened (service volume).\n- Revenue (Service Revenue): Income from repair orders (after-sales).\n- Parts (Parts Sales): Revenue from spare parts sales.\n- Lubricant (Lubricant Sales): Quantity or revenue from engine oil/lubricants.\n- Gear Up (Accessory Sales): Vehicles fitted with optional accessories / accessory revenue.\n- Ins. T1 (Insurance Tier 1 New): Insurance policies sold for new vehicles.\n- Ins. Renew O/all (Insurance Renewal Overall): Renewed insurance policies for vehicles of any age.\n- POV (Trade-In): Perodua vehicles taken as trade-ins for new purchases.\nQuality:\n- NPS Sales: Net Promoter Score from sales surveys.\n- NPS Svc: Net Promoter Score from service surveys.\n- E-Appt (E-Appointment): Digital service appointments (Booking/Confirmed/No-Show).\n- QPI (Quality Performance Indicator): % of warranty claims submitted within required timeframe (≤3 days).\n\nOther Terms:\n- Outlet Type: 1S (Sales), 2S (Service), 1+2S (Sales & Service), 3S (Sales, Service, Spare Parts).\n- Outlet Category: Grade A/B/C/D based on Performance & Quality thresholds.\n- MTD/YTD Actual/Target: Month/Year-to-date achieved vs goal.\n- Threshold: Minimum acceptable level for Performance/Quality.\n- Weightage: Relative KPI importance by outlet type.\n\nCOMPUTED STATISTICS (authoritative, precomputed from pandas):\nUse ONLY the computed statistics below for the 'Observation' section.\nDo NOT do any arithmetic yourself; treat these as exact facts.\nMANDATORY: Explicitly state the min and max for each numeric column. If grouped statistics are provided (by 'outlet_category' or 'outlet_type'), include the min and max per group for the primary KPIs you discuss.\nIf both a small and large table are present for a chart (e.g., Tab 3 KPI gaps), FOCUS your Observations on the SMALL table; use the large-table statistics only as supporting context.\n\n### Computed Statistics — Outlet Category Distribution (% by Region) — May\n- Month: count=4 (missing=0)\n- category: count=4 (missing=0)\n- count: min=27.0, p25=34.5, median=60.0, p75=95.25, max=132.0, mean=69.75, std=48.13436056152264 (missing=0)\n- pct: min=9.67741935483871, p25=12.365591397849462, median=21.50537634408602, p75=34.13978494623656, max=47.31182795698925, mean=24.999999999999996, std=17.252458982624606 (missing=0)\n\nGrouped statistics by dimension:\n- By Month:\n  - May:\n    - count: min=27.0, max=132.0, range=105.0, mean=69.75 (n=4)\n    - pct: min=9.68, max=47.31, range=37.63, mean=25.0 (n=4)\n\nMONTH-AWARE DIRECTIVE:\nIf a 'Month' column is present, you MUST compare months explicitly.\n- Quantify month-over-month deltas for the key KPIs you discuss (state sign and magnitude).\n- Identify where performance improved or declined the most by outlet_category/region/outlet_type as applicable.\n- Use only the provided computed statistics and grouped stats by 'Month' (if present) to support claims.\n- Keep comparisons concise and prioritized; avoid repeating trivial differences.\nProvide a structured analysis of the data based on the following format:\n\n### 1. Observation\n- State the most significant, factual patterns from the data.\n- Use short, direct bullet points.\n- Quantify your findings with precise numbers, ranges, or counts.\n  - **Example:** 'The [metric_name] for [Segment A] ranges from [X] to [Y].'\n  - **Example:** '[Number] of entities have a value of 0 for the [metric_name] parameter.'\n\n- Always state the explicit min and max for each numeric KPI you reference. If grouped statistics by 'outlet_category' or 'outlet_type' are provided, include the per-group min and max for the primary KPI(s).\n\n### 2. Interpretation\n- Explain the business or practical implications of your observations.\n- Identify the key drivers behind the observed patterns and the relationships between metrics.\n  - **Example:** 'The high performance in [Metric A] for [Segment B] appears to be negatively correlated with [Metric C], suggesting a potential trade-off.'\n- Quantify the potential impact, risk, or opportunity.\n  - **Example:** 'The cluster of [Number] entities in [Segment C] shows an average [Metric D] that is [Value/Percentage] below the target, indicating a high risk of [describe the business risk, e.g., user churn, quality failure, revenue loss].'\n\n### 3. Recommendation\n- Propose clear, actionable next steps based on your interpretation.\n- Prioritize your recommendations to guide decision-making.\n  - **High Priority:** Address critical issues (e.g., data integrity problems, major risks, or opportunities affecting the largest segments).\n  - **Medium Priority:** Focus on important optimizations or further investigations.\n  - **Foundation:** Suggest general best practices or foundational improvements.\n- Each recommendation should be directly linked to a specific, quantified observation.\n  - **Example:** 'Given that [Number] entities have 0 values for [metric_name], the top priority is to audit the data pipeline to correct this potential anomaly.'\n\n### Parameter Focus Coverage\n- Conclude with a brief summary for each key parameter analyzed.\n- For each parameter, provide a single bullet point with a one-sentence, numeric summary.\n  - **Example:** '[parameter_name]: The values range from [min] to [max], with the majority of entities clustered around [central_tendency_value].'\n  - **Example:** '[categorical_parameter]: The most prevalent category is '[Category_X],' accounting for [Percentage]% of the data.'\nJSON follows:\n```json\n{\"charts\": [{\"graph_id\": \"q2-month-May\", \"graph_label\": \"Outlet Category Distribution (% by Region) — May\", \"filters\": {\"outlet_categories\": [], \"regions\": [], \"outlet_types\": [], \"outlets\": [], \"search_text\": \"\", \"score_band\": \"All\", \"units_band\": \"All\", \"kpi_group\": \"All\", \"kpi_single\": null, \"months\": [\"May\"], \"compare_months\": true}, \"columns\": [\"Month\", \"category\", \"count\", \"pct\"], \"n_rows\": 4, \"rows\": [{\"Month\": \"May\", \"category\": \"A\", \"count\": 132, \"pct\": 47.31182795698925}, {\"Month\": \"May\", \"category\": \"B\", \"count\": 83, \"pct\": 29.749103942652326}, {\"Month\": \"May\", \"category\": \"C\", \"count\": 37, \"pct\": 13.261648745519713}, {\"Month\": \"May\", \"category\": \"D\", \"count\": 27, \"pct\": 9.67741935483871}], \"computed_stats\": {\"Month\": {\"dtype\": \"object\", \"count\": 4, \"missing\": 0, \"non_null\": 4}, \"category\": {\"dtype\": \"object\", \"count\": 4, \"missing\": 0, \"non_null\": 4}, \"count\": {\"dtype\": \"int64\", \"count\": 4, \"missing\": 0, \"min\": 27.0, \"p25\": 34.5, \"median\": 60.0, \"p75\": 95.25, \"max\": 132.0, \"mean\": 69.75, \"std\": 48.13436056152264}, \"pct\": {\"dtype\": \"float64\", \"count\": 4, \"missing\": 0, \"min\": 9.67741935483871, \"p25\": 12.365591397849462, \"median\": 21.50537634408602, \"p75\": 34.13978494623656, \"max\": 47.31182795698925, \"mean\": 24.999999999999996, \"std\": 17.252458982624606}}, \"group_stats\": {\"Month\": {\"May\": {\"count\": {\"min\": 27.0, \"max\": 132.0, \"mean\": 69.75, \"range\": 105.0, \"count\": 4}, \"pct\": {\"min\": 9.68, \"max\": 47.31, \"mean\": 25.0, \"range\": 37.63, \"count\": 4}}}}}], \"metadata\": {}}\n```",
  "prompt_lines": [
    "Role: You are a strict, quantitative data analyst. Your sole task is to analyze the provided snapshot of CR KPI data.",
    "Critical Directive: Your analysis MUST be based exclusively on the provided figures. You MUST NOT infer any time-based trends (e.g., improvement, decline, momentum) as this is a single point in time.",
    "",
    "Non-Negotiable Context: All insights must frame performance through the fundamental trade-off between short-term financial performance (sales, revenue) and long-term customer health (satisfaction, loyalty).",
    "**Quantification Mandate: You MUST quantify all claims. Instead of 'low' or 'high', state the actual values, ranges, and percentages. Estimate potential impact (e.g., revenue risk, churn probability) based on the magnitude of quality gaps.**",
    "",
    "Timeframe Guard: Do NOT mention or assume timeframes (e.g., 'MTD', 'YTD', 'MoM', 'YoY') unless these exact terms appear in the dataset columns or metadata. If absent, treat percentages as timeless normalized achievements and avoid any timeframe terminology.",
    "",
    "You are a senior data analyst presenting to business stakeholders. I will provide a chart dataset as JSON.",
    "Return plain markdown only (no code fences, no introductory text). Be specific, quantified, and evidence-led.",
    "Do not be vague or ambiguous: avoid generic statements; support each key claim with concrete numbers, names, and explicit comparisons from the provided data.",
    "",
    "KNOWLEDGE BASE:",
    "KPI CALCULATION FORMULAS:",
    "- MTD Actual (%): Month-to-date achievement as percentage of target",
    "  * Performance KPIs: MTD Actual / MTD Target * 100",
    "  * Insurance: MTD Actual / MTD Target = % (2 Decimal Point)",
    "  * NPS: MTD Actual / MTD Target * 100",
    "  * QPI: xQPI * (Total claim submission by outlet (Aging ≤3days)/Total claim submission by outlet) * 100",
    "- Rate: Points * Achievement (based on MTD Actual %)",
    "- Ranking: Sorted based on Rate in Descending order",
    "",
    "Outlet Categories (A/B/C/D) reflect whether an outlet meets performance (quantity) and quality (service) thresholds:",
    "- A: Performance > threshold AND Quality > threshold (top performer).",
    "- B: Performance > threshold BUT Quality < threshold (good performer but poor service).",
    "- C: Performance < threshold BUT Quality > threshold (good service, underperforming).",
    "- D: Performance < threshold AND Quality < threshold (poor performer).",
    "",
    "Categorical Hierarchy: A > B > C > D. When comparing categories, treat A as strictly better than B, B better than C, and so on.",
    "",
    "Outlet Types indicate business functions and relevant KPIs: **1S (Sales only)**, **2S (Service only)**, **1+2S/3S (Sales & Service)**.",
    "- 1S KPIs: New Car Reg, Gear Up, Insurance, POV, NPS Sales. ",
    "- 2S KPIs: Intake, Revenue, Parts, Lubricant, NPS Svc, E-Appointment, QPI.",
    "- 1+2S/3S use blended metrics from both sides.",
    "",
    "Definition of Quality vs Performance parameters (use this consistently):",
    "- Quality parameters: QPI (qpi_pct), E-Appointment (eappointment_pct), NPS Sales (nps_sales_pct), NPS Service (cs_service_pct).",
    "- All other KPI % metrics belong to Performance.",
    "",
    "Axis Thresholds by Outlet Type (for interpreting X/Y scatter parameters):",
    "### Y is performance , X is quality",
    "- 1S: Threshold X = 35, Threshold Y = 60.",
    "- 2S: Threshold X = 40, Threshold Y = 55.",
    "- 1+2S: Threshold X = 30, Threshold Y = 50.",
    "- 3S: Threshold X = 35, Threshold Y = 60.",
    "",
    "Interpreting % Achievement: 100% = target achieved; >100% = target exceeded; <100% = gap.",
    "Some KPIs (e.g., NPS, QPI) are composites or tiered scores; >100% still indicates exceeding the blended target.",
    "",
    "Outlet Type KPI Scope Rule:",
    "- 1S (Sales-only) focus KPIs: New Car Reg, Gear Up, Insurance, POV, NPS Sales. Treat service KPIs as 0/NA for 1S.",
    "- 2S (Service-only) focus KPIs: Intake, Revenue, Parts, Lubricant, NPS Svc, E-Appointment, QPI. Treat sales KPIs as 0/NA for 2S.",
    "- 1+2S/3S use blended metrics from both sides; all KPIs apply.",
    "",
    "CATEGORICAL ANALYSIS DECISION TREE (USE THIS):",
    "- If the largest group is 'A' outlets: The region is healthy. Insight = 'This region successfully balances performance and quality.'",
    "- If the largest group is 'B' outlets: The region is at risk. Insight = 'This region is prioritizing short-term sales over customer experience, which threatens long-term loyalty.' This is the most common and critical insight.",
    "- If the largest group is 'C' outlets: The region is struggling but has good service. Insight = 'This region has strong customer processes but is failing to achieve sales and volume targets.'",
    "- If the largest group is 'D' outlets: The region is in crisis. Insight = 'This region is failing across all key performance and quality indicators.'",
    "- Compare A vs. D: Always note the disparity between top and bottom performers.",
    "",
    "DATA DICTIONARY:",
    "Data Dictionary & Terminology:",
    "KPI Parameters:",
    "Performance:",
    "- Car Reg (New Car Registration): Number of new vehicles registered (primary sales volume).",
    "- Intake (Job Intake): Number of repair orders/service jobs opened (service volume).",
    "- Revenue (Service Revenue): Income from repair orders (after-sales).",
    "- Parts (Parts Sales): Revenue from spare parts sales.",
    "- Lubricant (Lubricant Sales): Quantity or revenue from engine oil/lubricants.",
    "- Gear Up (Accessory Sales): Vehicles fitted with optional accessories / accessory revenue.",
    "- Ins. T1 (Insurance Tier 1 New): Insurance policies sold for new vehicles.",
    "- Ins. Renew O/all (Insurance Renewal Overall): Renewed insurance policies for vehicles of any age.",
    "- POV (Trade-In): Perodua vehicles taken as trade-ins for new purchases.",
    "Quality:",
    "- NPS Sales: Net Promoter Score from sales surveys.",
    "- NPS Svc: Net Promoter Score from service surveys.",
    "- E-Appt (E-Appointment): Digital service appointments (Booking/Confirmed/No-Show).",
    "- QPI (Quality Performance Indicator): % of warranty claims submitted within required timeframe (≤3 days).",
    "",
    "Other Terms:",
    "- Outlet Type: 1S (Sales), 2S (Service), 1+2S (Sales & Service), 3S (Sales, Service, Spare Parts).",
    "- Outlet Category: Grade A/B/C/D based on Performance & Quality thresholds.",
    "- MTD/YTD Actual/Target: Month/Year-to-date achieved vs goal.",
    "- Threshold: Minimum acceptable level for Performance/Quality.",
    "- Weightage: Relative KPI importance by outlet type.",
    "",
    "COMPUTED STATISTICS (authoritative, precomputed from pandas):",
    "Use ONLY the computed statistics below for the 'Observation' section.",
    "Do NOT do any arithmetic yourself; treat these as exact facts.",
    "MANDATORY: Explicitly state the min and max for each numeric column. If grouped statistics are provided (by 'outlet_category' or 'outlet_type'), include the min and max per group for the primary KPIs you discuss.",
    "If both a small and large table are present for a chart (e.g., Tab 3 KPI gaps), FOCUS your Observations on the SMALL table; use the large-table statistics only as supporting context.",
    "",
    "### Computed Statistics — Outlet Category Distribution (% by Region) — May",
    "- Month: count=4 (missing=0)",
    "- category: count=4 (missing=0)",
    "- count: min=27.0, p25=34.5, median=60.0, p75=95.25, max=132.0, mean=69.75, std=48.13436056152264 (missing=0)",
    "- pct: min=9.67741935483871, p25=12.365591397849462, median=21.50537634408602, p75=34.13978494623656, max=47.31182795698925, mean=24.999999999999996, std=17.252458982624606 (missing=0)",
    "",
    "Grouped statistics by dimension:",
    "- By Month:",
    "  - May:",
    "    - count: min=27.0, max=132.0, range=105.0, mean=69.75 (n=4)",
    "    - pct: min=9.68, max=47.31, range=37.63, mean=25.0 (n=4)",
    "",
    "MONTH-AWARE DIRECTIVE:",
    "If a 'Month' column is present, you MUST compare months explicitly.",
    "- Quantify month-over-month deltas for the key KPIs you discuss (state sign and magnitude).",
    "- Identify where performance improved or declined the most by outlet_category/region/outlet_type as applicable.",
    "- Use only the provided computed statistics and grouped stats by 'Month' (if present) to support claims.",
    "- Keep comparisons concise and prioritized; avoid repeating trivial differences.",
    "Provide a structured analysis of the data based on the following format:",
    "",
    "### 1. Observation",
    "- State the most significant, factual patterns from the data.",
    "- Use short, direct bullet points.",
    "- Quantify your findings with precise numbers, ranges, or counts.",
    "  - **Example:** 'The [metric_name] for [Segment A] ranges from [X] to [Y].'",
    "  - **Example:** '[Number] of entities have a value of 0 for the [metric_name] parameter.'",
    "",
    "- Always state the explicit min and max for each numeric KPI you reference. If grouped statistics by 'outlet_category' or 'outlet_type' are provided, include the per-group min and max for the primary KPI(s).",
    "",
    "### 2. Interpretation",
    "- Explain the business or practical implications of your observations.",
    "- Identify the key drivers behind the observed patterns and the relationships between metrics.",
    "  - **Example:** 'The high performance in [Metric A] for [Segment B] appears to be negatively correlated with [Metric C], suggesting a potential trade-off.'",
    "- Quantify the potential impact, risk, or opportunity.",
    "  - **Example:** 'The cluster of [Number] entities in [Segment C] shows an average [Metric D] that is [Value/Percentage] below the target, indicating a high risk of [describe the business risk, e.g., user churn, quality failure, revenue loss].'",
    "",
    "### 3. Recommendation",
    "- Propose clear, actionable next steps based on your interpretation.",
    "- Prioritize your recommendations to guide decision-making.",
    "  - **High Priority:** Address critical issues (e.g., data integrity problems, major risks, or opportunities affecting the largest segments).",
    "  - **Medium Priority:** Focus on important optimizations or further investigations.",
    "  - **Foundation:** Suggest general best practices or foundational improvements.",
    "- Each recommendation should be directly linked to a specific, quantified observation.",
    "  - **Example:** 'Given that [Number] entities have 0 values for [metric_name], the top priority is to audit the data pipeline to correct this potential anomaly.'",
    "",
    "### Parameter Focus Coverage",
    "- Conclude with a brief summary for each key parameter analyzed.",
    "- For each parameter, provide a single bullet point with a one-sentence, numeric summary.",
    "  - **Example:** '[parameter_name]: The values range from [min] to [max], with the majority of entities clustered around [central_tendency_value].'",
    "  - **Example:** '[categorical_parameter]: The most prevalent category is '[Category_X],' accounting for [Percentage]% of the data.'",
    "JSON follows:",
    "```json",
    "{\"charts\": [{\"graph_id\": \"q2-month-May\", \"graph_label\": \"Outlet Category Distribution (% by Region) — May\", \"filters\": {\"outlet_categories\": [], \"regions\": [], \"outlet_types\": [], \"outlets\": [], \"search_text\": \"\", \"score_band\": \"All\", \"units_band\": \"All\", \"kpi_group\": \"All\", \"kpi_single\": null, \"months\": [\"May\"], \"compare_months\": true}, \"columns\": [\"Month\", \"category\", \"count\", \"pct\"], \"n_rows\": 4, \"rows\": [{\"Month\": \"May\", \"category\": \"A\", \"count\": 132, \"pct\": 47.31182795698925}, {\"Month\": \"May\", \"category\": \"B\", \"count\": 83, \"pct\": 29.749103942652326}, {\"Month\": \"May\", \"category\": \"C\", \"count\": 37, \"pct\": 13.261648745519713}, {\"Month\": \"May\", \"category\": \"D\", \"count\": 27, \"pct\": 9.67741935483871}], \"computed_stats\": {\"Month\": {\"dtype\": \"object\", \"count\": 4, \"missing\": 0, \"non_null\": 4}, \"category\": {\"dtype\": \"object\", \"count\": 4, \"missing\": 0, \"non_null\": 4}, \"count\": {\"dtype\": \"int64\", \"count\": 4, \"missing\": 0, \"min\": 27.0, \"p25\": 34.5, \"median\": 60.0, \"p75\": 95.25, \"max\": 132.0, \"mean\": 69.75, \"std\": 48.13436056152264}, \"pct\": {\"dtype\": \"float64\", \"count\": 4, \"missing\": 0, \"min\": 9.67741935483871, \"p25\": 12.365591397849462, \"median\": 21.50537634408602, \"p75\": 34.13978494623656, \"max\": 47.31182795698925, \"mean\": 24.999999999999996, \"std\": 17.252458982624606}}, \"group_stats\": {\"Month\": {\"May\": {\"count\": {\"min\": 27.0, \"max\": 132.0, \"mean\": 69.75, \"range\": 105.0, \"count\": 4}, \"pct\": {\"min\": 9.68, \"max\": 47.31, \"mean\": 25.0, \"range\": 37.63, \"count\": 4}}}}}], \"metadata\": {}}",
    "```"
  ]
}
